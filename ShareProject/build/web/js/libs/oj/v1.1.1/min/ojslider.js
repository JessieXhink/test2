/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojeditablevalue","jqueryui-amd/draggable","ojs/ojtouchproxy"],function(a,f){(function(){a.Da("oj.ojSlider",f.oj.editableValue,{defaultElement:"\x3cinput\x3e",version:"1.1.1",widgetEventPrefix:"oj",options:{distance:0,max:100,min:0,orientation:"horizontal",readOnly:!1,disabled:!1,step:1,type:"fromMin",value:0},bU:5,Ke:function(){return"rtl"===a.C.ns()},_ComponentCreate:function(){this._super();this.aA=[];this.element.removeAttr("pattern");this.Zt=this.Lo=!1;this.Oi=
null;this.eT=!1;this.element.is("INPUT")?(this.eT=!0,this.element[0].style&&(this.Qda=this.element[0].style.cssText),this.cT=this.element.css("display"),this.element.css("display","none"),this.Wg=f(this.element).wrap("\x3cdiv\x3e \x3c/div\x3e").parent()):this.Wg=this.element;var a="oj-slider ",a=this.wc()?a+"oj-slider-vertical":a+"oj-slider-horizontal";this.Wg.addClass(a+" ui-widget ui-widget-content");this.Le="range"===this.options.type?!0:!1;this.PO();this.za();this.Li()},Sg:function(){this._super();
this.Oo();var a=this.E1();if(a){var b=this.Wg.find(".oj-slider-thumb"),c=a.attr("id");c||(c=a.attr("for"));b.attr("aria-labelledby",c);1<a.length&&1<b.length&&b[1].attr("aria-labelledby",String(c))}else if(a=this.element.attr("aria-label"))b=this.Wg.find(".oj-slider-thumb"),b.attr("aria-label",a)},E1:function(){var a=this.o7();if(null!==a&&0!==a.length)return a;a=this.n7();if(null!==a&&0!==a.length)return a},n7:function(){var a=this.element.prop("id");if(void 0!==a){var b=f("label[for\x3d'"+a+"']");
if(0<b.length)return b;a="span[for\x3d'"+a+"']";if(0!==f(a).length)return f(a)}return null},o7:function(){var a=this.element.attr("aria-labelledby");if(void 0!==a){var b=f("label[id\x3d'"+a+"']");if(0<b.length)return b;a=f("span[id\x3d'"+a+"']");if(0<a.length)return a}else return null},widget:function(){return this.Wg},za:function(){this.V5();this.u5();this.T5();this.Z5();this.Zk()},dz:function(){return this.element[0].id},Au:function(a){return this.dz()+"-thumb"+a},Wy:function(){return this.dz()+
"-barValue"},xF:function(){return this.dz()+"-barBack"},G8:function(){return this.dz()+"-sliderWrapper"},Z5:function(){var a,b,c="",e="class\x3d'oj-slider-thumb ui-state-default' tabindex\x3d'0' role\x3d'slider'"+("aria-valuemin \x3d '"+this.od()+"' ")+("aria-valuemax \x3d '"+this.lf()+"' ")+"\x3e\x3c/span\x3e",g=[];b=this.Le?this.options.value.length:1;for(a=0;a<b;a++)c="\x3cspan "+("id\x3d'"+this.Au(a)+"' ")+e,g.push(c);this.dh=f(g.join("")).appendTo(this.Ni);this.dl=this.dh.eq(0);var h=this;this.dh.each(function(a){f(this).data("oj-slider-thumb-index",
a);h.wc()&&f(this).attr("aria-orientation","vertical");h.options.disabled?(f(this).attr("aria-disabled","true"),f(this).removeAttr("tabindex")):f(this).removeAttr("aria-disabled");h.options.readOnly?f(this).attr("title","read only"):f(this).removeAttr("title")})},V5:function(){var a=this.G8(),b=this.Wg.find("#"+a);b.length&&b.remove();this.Ni=f("\x3cdiv\x3e\x3c/div\x3e");f(this.Ni).attr("id",a);this.Ni.addClass("oj-slider-container");this.element.after(this.Ni);this.Ni[0].style.cssText=this.Qda;this.wc()&&
""==this.Ni[0].style.height&&(this.Ni[0].style.height="150px")},u5:function(){var a=this.xF(),b=this.Wg.find("#"+a);b.length&&b.remove();this.xb=f("\x3cdiv\x3e\x3c/div\x3e");b="oj-slider-bar";b=this.wc()?b+" oj-slider-vertical":b+" oj-slider-horizontal";f(this.xb).attr("id",a);this.xb.addClass(b);this.Ni.append(this.xb);var c=this;this.xb.on("mousedown"+c.eventNamespace,function(a){c.UG(a,!1);c.$u(a);c.kA();c.Vy().addClass("ui-state-active").focus()})},T5:function(){var a=this.options,b="";if(a.type){this.options.value?
this.Le&&(2===this.options.value.length?this.options.value=this.options.value.slice(0):(this.options.value=[this.options.value[0],this.lf()],this.option("value",this.options.value,{_context:{rd:!0,mb:!0}}))):(this.options.value=this.Le?[this.od(),this.lf()]:this.od(),this.option("value",this.options.value,{_context:{rd:!0,mb:!0}}));if(this.Ib&&this.Ib.length)this.Ib.removeClass("oj-slider-range-min oj-slider-range-max").css({left:"",top:""});else{this.Ib=f("\x3cdiv\x3e\x3c/div\x3e");f(this.Ib).attr("id",
this.Wy());this.Ni.append(this.Ib);var b="oj-slider-range oj-slider-bar-value",c=this;this.Ib.on("mousedown"+c.eventNamespace,function(a){c.UG(a,!1);c.$u(a);c.kA();c.Vy().addClass("ui-state-active").focus()})}this.Ib=this.Ni.find("#"+this.Wy());var e="";"fromMin"===a.type?e=" oj-slider-range-min":"fromMax"===a.type&&(e=" oj-slider-range-max");this.Ib.addClass(b+e)}else this.Ib&&this.Ib.remove(),this.Ib=null},Dda:function(d){this.zI=a.be.iX(d)},Wda:function(d){a.be.c_(d)},Li:function(){this.dh.toArray().forEach(function(a){a=
f(a);this.tq(a);this._on(a,this.aea);this.Dda(a);this._hoverable(a);this._focusable(a)},this)},_destroy:function(){this.dh.toArray().forEach(function(a){a=f(a);this.Wda(a)},this);this.Ni.remove();a.C.unwrap(this.element,this.Wg);this.element.css("display",this.cT);this.mq(this.element);return this._super()},UG:function(a,b){var c,e,g,h,k=this,l=this.options;this.mP=this.dl;if(l.disabled||l.readOnly)return!1;!b||this.Le?(c={x:a.pageX,y:a.pageY},e=this.p8(c)):e=this.FR();g=this.lf()-this.od()+1;this.Le&&
this.dh.each(function(a){var b=Math.abs(e-k.wo(a));if(g>b||g===b&&(a===k.saa||k.wo(a)===l.min))g=b,this.mP=f(this),h=a});this.Zt=!0;this.Oi=h;if(this.mP)return this.dh.hasClass("ui-state-hover")||this.Ir(a,h,e),this.Vy().addClass("ui-state-active").focus(),!0},jH:function(){return!0},Vz:function(){var a=100*this.lR();this.Le?this.VV(a,this.Oi):this.SV(a);return!1},$u:function(a){this.dh.removeClass("ui-state-active");this.Zt=!1;var b=this.FR();this.Ir(a,this.Oi,b);this.pg(a,this.Oi);this.Oi=null;
return!1},wc:function(){return"vertical"===this.options.orientation},GR:function(a){1<a&&(a=1);0>a&&(a=0);this.wc()&&(a=1-a);return a},p8:function(a){var b=this.R7(a);a=this.lf()-this.od();this.Ke()&&!this.wc()&&(b=1-b);return this.Pi(this.od()+b*a)},R7:function(a){var b;this.wc()?(b=this.xb.height(),a=a.y-this.xb.offset().top):(b=this.xb.width(),a=a.x-this.xb.offset().left);return 0==b?1:b=this.GR(a/b)},Vy:function(){return this.Le?f(this.dh[this.Oi]):this.dl},lR:function(){var a,b;a=this.Vy();this.wc()?
(b=a.outerHeight()/2,b=a.offset().top+b,a=this.xb.height(),b-=this.xb.offset().top):(b=a.outerWidth()/2,b=a.offset().left+b,a=this.xb.width(),b-=this.xb.offset().left);return 0==a?1:a=this.GR(b/a)},FR:function(){var a,b;a=this.lR();b=this.lf()-this.od();this.Ke()&&!this.wc()&&(a=1-a);return this.Pi(this.od()+a*b)},Ir:function(a,b,c){var e;this.Le?(e=this.wo(b?0:1),2===this.options.value.length&&(0===b&&c>e||1===b&&c<e)&&(c=e),c!==this.wo(b)&&this.qda(a,b,c)):c!==this.cG()&&(this.tda(a,c),this.eT&&
this.element.val(c))},pg:function(a,b){this.Lo||this.Zt||(this.Le?(this.taa=this.n8(b,this.aA[b]),this.tc(this.taa,a)):this.tc(this.mH,a),this.saa=b)},cG:function(){return this.Lo||this.Zt?isNaN(this.mH)?this.mG():this.mH:this.mG()},tda:function(a,b){this.mH=this.Pi(b);this.pg(a,0);this.Zk()},wo:function(a){return this.Le?this.Lo||this.Zt?a!==this.Oi||isNaN(this.aA[a])?this.iS(a):this.aA[a]:this.iS(a):this.cG()},qda:function(a,b,c){this.aA[b]=this.Pi(c);this.pg(a,b);this.Zk()},_setOption:function(a,
b,c){"value"===a&&(Array.isArray(b)?this.Le=!0:(this.Le=!1,this.Yk(a,b)));b="max"===a||"min"===a?this.Yk(a,b):"step"===a?this.dv(b):b;"disabled"!=a&&this._super(a,b,c);"readOnly"===a&&(this.Wg.toggleClass("oj-read-only",!!b),this.za());"disabled"===a&&(this.p6(),this.Wg.toggleClass("oj-disabled",!!b),this.options.disabled=b,this.za());switch(a){case "orientation":this.Wg.removeClass("oj-slider-horizontal oj-slider-vertical");this.xb.removeClass("oj-slider-horizontal oj-slider-vertical");this.wc()?
(this.Wg.addClass("oj-slider-vertical"),this.xb.addClass("oj-slider-vertical")):(this.Wg.addClass("oj-slider-horizontal"),this.xb.addClass("oj-slider-horizontal"));this.Zk();this.dh.css("horizontal"===b?"top":"left","");this.Oo();break;case "value":this.Zk();this.Oo();break;case "step":case "min":case "max":this.PO();this.Zk();this.Oo();break;case "range":this.za()}},mG:function(){var a=this.options.value;return a=this.Pi(a)},iS:function(a){return this.Pi(this.options.value[a])},n8:function(a,b){var c,
e;c=this.options.value.slice();for(e=0;e<c.length;e+=1)c[e]=this.Pi(c[e]);a===this.Oi&&(c[a]=b);return c},Pi:function(a){if(a<=this.od())return this.od();if(a>=this.lf())return this.lf();var b=0<this.options.step?this.options.step:1,c=(a-this.od())%b;a-=c;2*Math.abs(c)>=b&&(a+=0<c?b:-b);return parseFloat(a.toFixed(5))},PO:function(){var a=this.od();this.max=0!==(this.options.max-a)/this.options.step%1?this.options.max-(this.options.max-a)%this.options.step:this.options.max},od:function(){return this.options.min},
lf:function(){return this.max},mR:function(){var a;a=0<this.options.step?(this.lf()-this.od())/this.options.step:100;a=(this.wc()?this.xb.height():this.xb.width())/a;1>a&&(a=1);return this.wc()?[1,a]:[a,1]},Bu:function(a){return(this.wo(a)-this.od())/(this.lf()-this.od())},Zk:function(){var a,b,c,e;this.Le?this.dh.toArray().forEach(function(b,c){var e=f(b);a=100*this.Bu(c);this.Ke()&&!this.wc()&&(a=100-a);this.wc()?f(e).css({top:100-a+"%"}):f(e).css({left:a+"%"});f(e).attr("aria-valuenow",this.wo(c));
this.VV(a,c)},this):(b=this.mG(),c=this.od(),e=this.lf(),a=e!==c?(b-c)/(e-c)*100:0,this.Ke()&&!this.wc()&&(a=100-a),this.wc()?this.dl.css({top:100-a+"%"}):this.dl.css({left:a+"%"}),f(this.dl).attr("aria-valuenow",b),this.SV(a))},SV:function(a){var b=this.options.type;this.wc()?("fromMin"===b&&this.Ib.css({height:a+"%"}),"fromMax"===b&&this.Ib.css({height:100-a+"%"})):this.Ke()?("fromMin"===b&&this.Ib.css({width:100-a+"%"}),"fromMax"===b&&this.Ib.css({width:a+"%"})):("fromMin"===b&&this.Ib.css({width:a+
"%"}),"fromMax"===b&&this.Ib.css({width:100-a+"%"}))},VV:function(a,b){var c=this.Ib.attr("id");if(0==b)switch(c=100*this.Bu(1),this.options.type){case "fromMin":this.wc()?this.Ib.css({height:a+"%"}):this.Ib.css({width:a+"%"});break;case "range":this.wc()?(this.Ib.css({top:100-c+"%"}),this.Ib.css({height:c-a+"%"})):this.Ke()?(this.Ib.css({left:100-c+"%"}),this.Ib.css({width:c-(100-a)+"%"})):(this.Ib.css({left:a+"%"}),this.Ib.css({width:c-a+"%"}))}else{var e=100*this.Bu(0);switch(this.options.type){case "fromMax":this.wc()?
this.Ib.css({height:100-a+"%"}):this.Ib.css({width:100-a+"%"});break;case "range":this.wc()?document.getElementById(c)&&(this.Ib.css({top:100-a+"%"}),this.Ib.css({height:a-e+"%"})):this.Ke()?document.getElementById(c)&&(this.Ib.css({left:a+"%"}),this.Ib.css({width:-a+100-e+"%"})):document.getElementById(c)&&this.Ib.css({width:a-parseInt(document.getElementById(c).style.left,10)+"%"})}}},aea:{keydown:function(a){var b,c,e,g=f(a.target).data("oj-slider-thumb-index");this.Oi=g;switch(a.keyCode){case f.ui.keyCode.HOME:case f.ui.keyCode.END:case f.ui.keyCode.PAGE_UP:case f.ui.keyCode.PAGE_DOWN:case f.ui.keyCode.UP:case f.ui.keyCode.RIGHT:case f.ui.keyCode.DOWN:case f.ui.keyCode.LEFT:a.preventDefault(),
this.Lo||(this.Lo=!0,f(a.target).addClass("ui-state-active"))}e=this.options.step;b=this.Le?c=this.wo(g):c=this.cG();switch(a.keyCode){case f.ui.keyCode.HOME:c=this.od();break;case f.ui.keyCode.END:c=this.lf();break;case f.ui.keyCode.PAGE_UP:c=this.Pi(b+(this.lf()-this.od())/this.bU);break;case f.ui.keyCode.PAGE_DOWN:c=this.Pi(b-(this.lf()-this.od())/this.bU);break;case f.ui.keyCode.UP:case f.ui.keyCode.RIGHT:if(!this.Ke()||this.wc()){if(b===this.lf())return;b+=e}else{if(b===this.od())return;b-=e}c=
this.Pi(b);break;case f.ui.keyCode.DOWN:case f.ui.keyCode.LEFT:if(!this.Ke()||this.wc()){if(b===this.od())return;b-=e}else{if(b===this.lf())return;b+=e}c=this.Pi(b)}this.Ir(a,g,c)},keyup:function(a){var b=f(a.target).data("oj-slider-thumb-index");this.Oi=b;this.Lo&&(this.Lo=!1,this.pg(a,b),f(a.target).removeClass("ui-state-active"));this.Oi=null;this.kA()}},ae:function(d,b){var c=this.options,e=this;this._superApply(arguments);a.Be.vl([{W:"disabled",ra:!1,rc:!0},{W:"placeholder",ra:""},{W:"value",
ra:null},{W:"readonly",option:"readOnly",ra:!1,rc:!0},{W:"required",ra:!1,je:!0,rc:!0},{W:"title",ra:""},{W:"min",ra:null},{W:"max",ra:null},{W:"step",ra:1}],b,this,function(a){for(var b=["value","step","min","max"],d=0;d<b.length;d++){var f=b[d],m=f in a?a[f]:c[f];null!=m&&("step"===f?a[f]=e.dv(m):"min"===f||"max"===f?a[f]=e.Yk(f,m):"value"===f&&(Array.isArray(m)?a[f]=m:a[f]=e.Yk(f,m)))}});if(void 0===c.value)throw Error(this.D("noValue"));if(null!=c.min&&null!=c.max){if(c.max<c.min)throw Error(this.D("maxMin"));
if(c.value<c.min||c.value>c.max)throw Error(this.D("valueRange"));}},getNodeBySubId:function(a){if(null==a)return this.element?this.element[0]:null;a=a.subId;return"oj-slider-thumb-0"===a?(a="#"+this.Au(0),this.widget().find(a)[0]):"oj-slider-thumb-1"===a?(a="#"+this.Au(1),this.widget().find(a)[0]):"oj-slider-bar"===a?(a="#"+this.xF(),this.widget().find(a)[0]):"oj-slider-bar-value"===a?(a="#"+this.Wy(),this.widget().find(a)[0]):null},getSubIdByNode:function(a){if(null!=a){if(a.id===this.Au(0)&&f(a).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-0"};
if(a.id===this.Au(1)&&f(a).hasClass("oj-slider-thumb"))return{subId:"oj-slider-thumb-1"};if(a.id===this.xF()&&f(a).hasClass("oj-slider-bar"))return{subId:"oj-slider-bar"};if(a.id===this.Wy()&&f(a).hasClass("oj-slider-bar-value"))return{subId:"oj-slider-bar-value"}}return null},_GetDefaultStyleClass:function(){return"oj-slider"},Yk:function(a,b){var c;c=null!==b?+b:b;if(isNaN(c))throw Error(this.D("optionNum",{option:a}));return c},dv:function(a){if(null===a)return 1;a=this.Yk("step",a);if(0>=a)throw Error(this.D("invalidStep"));
if(null===a||0>=a)a=1;return a},P7:function(){return this.xb.offset().left+this.xb.width()},I8:function(){return this.xb.offset().left},YQ:function(a){var b=this.XQ(),c=b[0],e=b[1],f=b[2],b=b[3];this.dl.outerHeight();switch(a){case 0:a=this.Bu(1);this.wc()?(b=this.xb.offset().top+this.xb.height(),e=this.xb.offset().top+(1-a)*this.xb.height()):this.Ke()?(f=this.P7(),c=f-a*this.xb.width()):f=c+a*this.xb.width();break;case 1:a=this.Bu(0),this.wc()?(e=this.xb.offset().top,b=e+(1-a)*this.xb.height()):
this.Ke()?(c=this.I8(),f=c+(1-a)*this.xb.width()):c=this.xb.offset().left+a*this.xb.width()}return[c,e,f,b]},XQ:function(){var a=this.xb.offset().left,b;b=this.xb.offset().top;var c=a+this.xb.width(),e=b+this.xb.height();return[a,b,c,e]},QO:function(a,b){var c=this.mR(),e=this;a.draggable({axis:this.wc()?"y":"x",containment:b,grid:c,disabled:!1,start:function(a){e.UG(a,!0)},drag:function(a){e.Vz(a)},stop:function(a){e.$u(a);e.kA()}})},kA:function(){var a;this.Le&&this.dh.toArray().forEach(function(b,
c){var e=f(b);a=this.YQ(c);e.draggable("option","containment",a)},this)},Oo:function(){if(!this.options.disabled){var a;this.Le?this.dh.toArray().forEach(function(b,c){var e=f(b);a=this.YQ(c);this.QO(e,a)},this):(a=this.XQ(),this.QO(this.dl,a))}},p6:function(){this.Le?this.dh.toArray().forEach(function(a){a=f(a);a.is(".ui-draggable")&&a.draggable("disable")},this):this.dl.is(".ui-draggable")&&this.dl.draggable("disable")}})})()});