/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojdvt-base","ojs/internal-deps/dvt/DvtThematicMap"],function(a,f,d,b,c){a.Da("oj.ojThematicMap",f.oj.dvtBaseComponent,{widgetEventPrefix:"oj",options:{load:null,optionChange:null},LP:"",Rz:[],zW:{ar:"ar",cs:"cs",da:"da",de:"de",el:"el",es:"es",fi:"fi",fr:"fr","fr-ca":"fr_CA",he:"iw",hu:"hu",it:"it",ja:"ja",ko:"ko",nl:"nl",no:"no",pl:"pl",pt:"pt_BR","pt-pt":"pt",ro:"ro",ru:"ru",sk:"sk",sv:"sv",th:"th",tr:"tr","zh-hans":"zh_CN","zh-hant":"zh_TW"},
_ComponentCreate:function(){this.ho=[];this.bT=!1;this.Gq=[];this._super()},Ef:function(a,b,d){return c.DvtThematicMap.newInstance(a,b,d)},mj:function(a){var b=a.subId;"oj-thematicmap-area"==b?b=a.dataLayer+":area["+a.index+"]":"oj-thematicmap-marker"==b&&(b=a.dataLayer+":marker["+a.index+"]");return b},nj:function(a){var b={};0<a.indexOf(":area")?(b.subId="oj-thematicmap-area",b.dataLayer=a.substring(0,a.indexOf(":")),b.index=this.ri(a)):0<a.indexOf(":marker")&&(b.subId="oj-thematicmap-marker",b.dataLayer=
a.substring(0,a.indexOf(":")),b.index=this.ri(a));return b},He:function(){var a=this._super();a.push("oj-thematicmap");return a},pi:function(){var a=this._super();a["oj-dvtbase oj-thematicmap"]={path:"animationDuration",property:"animation-duration"};a["oj-thematicmap-arealayer"]=[{path:"styleDefaults/areaStyle",property:"CSS_BACKGROUND_PROPERTIES"},{path:"styleDefaults/labelStyle",property:"CSS_TEXT_PROPERTIES"}];a["oj-thematicmap-area"]={path:"styleDefaults/dataAreaDefaults/borderColor",property:"border-top-color"};
a["oj-thematicmap-area oj-hover"]={path:"styleDefaults/dataAreaDefaults/hoverColor",property:"border-top-color"};a["oj-thematicmap-area oj-selected"]=[{path:"styleDefaults/dataAreaDefaults/selectedInnerColor",property:"border-top-color"},{path:"styleDefaults/dataAreaDefaults/selectedOuterColor",property:"border-bottom-color"}];a["oj-thematicmap-marker"]=[{path:"styleDefaults/dataMarkerDefaults/labelStyle",property:"CSS_TEXT_PROPERTIES"},{path:"styleDefaults/dataMarkerDefaults/color",property:"background-color"},
{path:"styleDefaults/dataMarkerDefaults/opacity",property:"opacity"},{path:"styleDefaults/dataMarkerDefaults/borderColor",property:"border-top-color"}];return a},qi:function(){return["load","optionChange"]},_setOptions:function(b,c){var d=Object.keys(b).length,f=b.areaLayers,l=this.options.areaLayers,m=b.pointDataLayers;if(1==d&&f&&l&&0<l.length)for(d=0;d<f.length;d++){var m=f[d],n=l[d],q=!0,p;for(p in m)"areaDataLayer"!=p&&m[p]!=n[p]&&(q=q&&!1);q&&!a.b.Cg(n.areaDataLayer,m.areaDataLayer)&&this.Gq.push({options:m.areaDataLayer,
parentLayer:m.layer,isADL:!0})}else if(1==d&&m&&this.options.pointDataLayers&&0<this.options.pointDataLayers.length)for(d=0;d<m.length;d++)a.b.Cg(this.options.pointDataLayers[d],m[d])||this.Gq.push({options:m[d],parentLayer:m[d].id,isADL:!1});this._super(b,c)},Gf:function(){this.Aaa();for(var b=0;b<this.ho.length;b++)if(!this.Rz[this.ho[b]])return;this.ho=[];this.uea();var c=this.options.areaLayers;if(c)for(b=0;b<c.length;b++){var d=c[b].areaDataLayer;if(d){var f=d.renderer;if(f){var l=d.markers;
d._components=this.sW(l,f)}}}if(c=this.options.pointDataLayers)for(b=0;b<c.length;b++)if(d=c[b])if(f=d.renderer)l=d.markers,d._components=this.sW(l,f);if(this.bT&&0<this.Gq.length)if(this.If.isReadyToRender()){for(b=0;b<this.Gq.length;b++)f=this.Gq[b],this.qa.updateLayer(f.options,f.parentLayer,f.isADL);this.Gq=[]}else a.u.error(this.RJ("messageNotReadyToRender").summary);else this._super(),this.bT=!0;this._trigger("load",null,null)},sW:function(b,c){for(var d=[],f=0;f<b.length;f++){var l=document.createElement("div");
l.style.display="none";l.dF=this.If;this.element.append(l);var m={component:a.Components.Eg(this.element),parentElement:l,data:b[f]};(m=c.call(this,m))||(m=l.children[0]);(l=this.gt(m))&&d.push({id:b[f].id,location:b[f].location,x:b[f].x,y:b[f].y,displayable:l})}return d},Aaa:function(){var b=this.options.basemap;if(b){var c=a.ba.Vf();c!==this.LP&&(this.LP=c,this.Rz=[]);var b=b.charAt(0).toUpperCase()+b.slice(1),d=this.options.areaLayers;if(d)for(var f=0;f<d.length;f++){var l=d[f].layer;l&&(l=l.charAt(0).toUpperCase()+
l.slice(1),this.HT(b,l,c))}(d=this.options.pointDataLayers)&&0<d.length&&this.HT(b,"Cities",c)}},KT:function(b){if(!this.Rz[b]){var c=a.ba.kb(b),d=this,k=this.Rz;f.getScript(c,function(){k[b]=!0;d.Gf()})}},HT:function(a,b,c){var d="resources/internal-deps/dvt/thematicMap/basemaps/DvtBaseMap"+a+b+".js";-1==this.ho.indexOf(d)&&(this.ho.push(d),this.KT(d));if(-1===c.indexOf("en"))for(d=c.toLowerCase().split("-"),c=[d[0]],1<d.length&&c.unshift(d[0]+"-"+d[1]),2<d.length&&c.unshift(d[0]+"-"+d[2],d[0]+"-"+
d[1]+"-"+d[2]),a="resources/internal-deps/dvt/thematicMap/resourceBundles/"+a+b+"Bundle",b=0;b<c.length;b++)if(this.zW[c[b]]){a=a+"_"+this.zW[c[b]]+".js";-1==this.ho.indexOf(a)&&(this.ho.push(a),this.KT(a));break}},si:function(a){var b,d;if((a&&a.getType?a.getType():null)===c.DvtSelectionEvent.TYPE){b={};d=a.getParamValue("clientId");b[d]=a.getSelection();if(this.options.selection)for(var f in this.options.selection)d!==f&&(b[f]=this.options.selection[f]);this.Cc("selection",b)}else this._super(a)},
Gh:function(){var a=this.options.translations,b=this._super();b["DvtUtilBundle.THEMATIC_MAP"]=a.componentName;return b},uea:function(){var a=this.options.selection;if(a){var b=this.options.pointDataLayers;if(b)for(var c=0;c<b.length;c++)a[b[c].id]&&(b[c].selection=a[b[c].id]);b=this.options.areaLayers;for(c=0;c<b.length;c++){var d=b[c].areaDataLayer;a[d.id]&&(d.selection=a[d.id])}}},getArea:function(a,b){var c=this.qa.getAutomation().getData(a,"area",b);this.kg(c);return c},getMarker:function(a,b){var c=
this.qa.getAutomation().getData(a,"marker",b);this.kg(c);return c}})});