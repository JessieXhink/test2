/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","jqueryui-amd/position"],function(a,f){a.fd={};a.fd.Ig=function(d,b){a.j.ie(d,"position");for(var c=f.extend({},d),e=0;e<a.fd.nM.length;e++){var g=a.fd.nM[e],h=c[g];h&&(c[g]=h.replace("start",b?"right":"left").replace("end",b?"left":"right").replace("\x3c",b?"+":"-").replace("\x3e",b?"-":"+"))}return c};a.fd.Nga=function(a,b,c){return"event"===a?c:null==a||"launcher"===a?b:a};a.fd.nM=["my","at"];a.fd.Pia=function(){return!1};f.ui.position.flipcenter=
{left:function(d,b){var c=d.left;f.ui.position.flip.left.call(this,d,b);var e=b.within,g=e.isWindow?e.scrollLeft:e.offset.left,h=d.left-b.collisionPosition.marginLeft,e=h+b.collisionWidth-e.width-g;if(0<g-h||0<e)"right"===b.at[0]?c-=b.targetWidth/2:"left"===b.at[0]&&(c+=b.targetWidth/2),g="rtl"===a.C.ns()?-1:1,c-=b.elemWidth/2*g,d.left=c},top:function(a,b){var c=a.top;f.ui.position.flip.top.call(this,a,b);var e=b.within,e=e.isWindow?e.scrollTop:e.offset.top,g=a.top-b.collisionPosition.marginTop,h=
g+b.collisionHeight-b.within.height-e;if(0<e-g||0<h)"top"===b.at[1]?c+=b.targetHeight/2:"bottom"===b.at[1]&&(c-=b.targetHeight/2),c+=b.elemHeight/2,a.top=c}};a.T=function(){this.Init()};a.b.ga(a.T,a.b,"oj.PopupService");a.T.prototype.Init=function(){a.T.q.Init.call(this)};a.T.le=function(){a.T.zH||(a.T.zH=new a.pb);return a.T.zH};a.T.prototype.open=function(){a.j.Xa()};a.T.prototype.close=function(){a.j.Xa()};a.T.prototype.$v=function(){a.j.Xa()};a.T.prototype.iL=function(){a.j.Xa()};a.T.prototype.destroy=
function(){delete a.T.zH};a.T.ji={NONE:"none",EC:"modal",D0:"modeless"};a.T.sc={Tp:"ojPopupRemove",Sp:"ojPopupClose",Rl:"ojPopupRefresh",Rp:"ojPopupAutoDismiss"};a.T.ab={Cf:"popup",In:"events",ji:"modality",Os:"launcher",Ss:"position",Pl:"layerSelectors"};a.pb=function(){this.Init()};a.b.ga(a.pb,a.T,"oj.PopupServiceImpl");a.pb.prototype.open=function(d){a.j.ie(d);var b=d[a.T.ab.Cf];a.j.Va(b,jQuery);var c=d[a.T.ab.Os];a.j.Va(c,jQuery);var e=d[a.T.ab.Ss];a.j.fJ(e);var f=d[a.T.ab.In];a.j.ie(f);var h=
d[a.T.ab.ji];a.j.Yv(h);if(!h||a.T.ji.D0!==h&&a.T.ji.EC!==h)h=a.T.ji.NONE;d=d[a.T.ab.Pl];a.j.il(d);a.C.o_(b,c);a.N.Nea(b,c,f,h,d);b.show();b.removeAttr("aria-hidden");e&&b.position(e);this.QD();a.Components.Il(b[0])};a.pb.prototype.close=function(d){a.j.ie(d);d=d[a.T.ab.Cf];a.j.Va(d,jQuery);a.N.cha(d);d.hide();d.attr("aria-hidden","true");a.C.o_(d,null);this.QD();a.Components.Cn(d[0])};a.pb.prototype.$v=function(d){a.j.ie(d);var b=d[a.T.ab.Cf];a.j.Va(b,jQuery);b=a.N.hw(b);a.j.Va(b,jQuery);var c=d[a.T.ab.In];
a.j.fJ(c);c&&a.N.lX(b,c);(c=d[a.T.ab.ji])&&a.N.mX(b,c);d=d[a.T.ab.Pl];a.Ba.Wh(d)||b.attr("class",d)};a.pb.prototype.iL=function(d,b,c){var e={};e.event=b;e.argsArray=c;d=a.N.hw(d);a.N.JK(d,this.lea,e)};a.pb.prototype.lea=function(d,b){var c=b.event,e=b.argsArray,g=a.N.IJ(d);g&&f.isFunction(g[c])&&g[c].apply(this,e);return a.N.jg.Gn};a.pb.prototype.QD=function(){var d=a.N.VY(),b=this.SO;if(!d&&b){window.removeEventListener("resize",a.pb.Om,!0);window.removeEventListener("scroll",a.pb.Om,!0);d=document.documentElement;
d.removeEventListener("mousewheel",a.pb.Om,!0);d.removeEventListener("DOMMouseScroll",a.pb.Om,!0);delete this.SO;for(var c=0;c<a.pb.Jx.length;c++){var e=a.pb.Jx[c];d.removeEventListener(e,b,!0)}if(b=this.kW)b.destroy(),delete this.kW}else if(d&&!b){window.addEventListener("resize",a.pb.Om,!0);window.addEventListener("scroll",a.pb.Om,!0);d=document.documentElement;d.addEventListener("mousewheel",a.pb.Om,!0);d.addEventListener("DOMMouseScroll",a.pb.Om,!0);b=this.SO=f.proxy(this.M6,this);for(c=0;c<a.pb.Jx.length;c++)e=
a.pb.Jx[c],d.addEventListener(e,b,!0);a.C.sf()&&(this.kW=new a.ni(b))}};a.pb.prototype.M6=function(d){var b=f(d.target);if(!a.N.VY())this.QD();else if(!a.C.eZ(d)&&("focus"!==d.type||b.is(":focusable"))){var c=a.N.hn();if("keydown"===d.type&&a.N.kga()&&!a.C.Yj(c[0],b[0]))a.N.QX(f.Event(d));else{var e=a.N.hw(b);if(c[0]!==e[0]){if(!e.hasClass(a.pb.rx)){var g=this.dH;g&&g.removeClass(a.pb.rx);e.addClass(a.pb.rx);this.dH=e}}else if(g=this.dH)g.removeClass(a.pb.rx),delete this.dH;if("focus"!==d.type||"-1"!==
b.attr("tabindex")){var b={},e={},h;for(h in d)f.isFunction(d[h])||(e[h]=d[h]);b.event=f.Event(d,e);a.N.JK(c,a.pb.Wba,b)}}}};a.pb.Wba=function(d,b){var c=a.N.IJ(d),e=b.event;if(c&&f.isFunction(c[a.T.sc.Rp]))c[a.T.sc.Rp](e);return a.N.jg.Gn};a.pb.Om=function(){isNaN(a.pb.QU)&&(a.pb.QU=window.setTimeout(function(){delete a.pb.QU;var d=a.N.hn();a.N.JK(d,a.pb.$ba)},a.pb.P2))};a.pb.$ba=function(d,b){if(0<b.level)return a.N.jg.dx;var c=a.N.IJ(d);if(c&&f.isFunction(c[a.T.sc.Rl]))c[a.T.sc.Rl]();return a.N.jg.Gn};
a.pb.prototype.destroy=function(){a.pb.q.destroy.call(this)};a.pb.rx="oj-focus-within";a.pb.Jx=["focus","mousedown","keydown"];a.pb.P2=100;a.N={};a.N.hw=function(d){if(!d)return a.N.hn();for(;d&&0<d.length&&d.attr("oj.ZOrderUtils._SURROGATE_ATTR")!==a.N.$C;){if(a.N.KG(d[0]))return d;d=d.parent()}return a.N.hn()};a.N.hn=function(){var d=f("#"+a.N.$C);if(0<d.length)return d;d=f("\x3cdiv\x3e");d.attr("role","presentation");d.attr("id",a.N.$C);d.prependTo(f(document.body));return d};a.N.Nea=function(d,
b,c,e,g){var h=d[0];if(a.N.KG(h.parentNode))throw Error("JET Popup is already open - id: "+h.getAttribute("id"));b=a.N.hw(e!==a.T.ji.NONE?null:b);var k=f("\x3cdiv\x3e"),l=d.attr("id");a.Ba.Wh(l)?k.uniqueId():k.attr("id",[l,"layer"].join("_"));k.attr("role","presentation");k.addClass(g);d.after(k);g=a.N.W5(k);a.Components.ag(h);d.appendTo(k);k.appendTo(b);a.Components.vf(h);a.N.mX(k,e);a.N.lX(k,c,g)};a.N.lX=function(d,b,c){if(!c){var e=d.attr(a.N.tt);e&&(c=f("#"+e))}d.data(a.N.qx,b);c&&b&&f.isFunction(b[a.T.sc.Tp])&&
(c.surrogate(),c.surrogate("option","beforeDestroy",b[a.T.sc.Tp]))};a.N.IJ=function(d){return d.data(a.N.qx)};a.N.W5=function(d){var b=f("\x3cscript\x3e"),c=d.attr("id");a.Ba.Wh(c)?b.uniqueId():b.attr("id",[c,"surrogate"].join("_"));b.insertBefore(d);c=b.attr("id");d.attr(a.N.tt,c);return b};a.N.wca=function(d){var b=d.attr(a.N.tt);d.removeAttr(a.N.tt);b=f("#"+b);d.insertAfter(b);b.surrogate("option","beforeDestroy",null);b.remove()};a.N.cha=function(d){var b=a.N.hw(d);a.N.LK(b,a.N.b5);a.N.TH(b);
b.removeData(a.N.qx);b.removeData(a.N.hD);var c=d[0];a.Components.ag(c);a.N.wca(b);a.C.unwrap(d,b);a.Components.vf(c)};a.N.b5=function(d,b){if(0<b.level)return a.N.jg.dx;var c=d.data(a.N.qx);if(c&&f.isFunction(c[a.T.sc.Sp]))c[a.T.sc.Sp]();return a.N.jg.Gn};a.N.mX=function(d,b){var c=d.data(a.N.hD);d.data(a.N.hD,b);a.Ba.Wh(c)?a.T.ji.EC===b?a.N.hO(d):a.N.TH(d):c!==b&&(b!==c&&b===a.T.ji.EC?a.N.hO(d):a.N.TH(d))};a.N.kga=function(){for(var d=a.N.hn().children(),b=d.length-1;-1<b;b--)if(f(d[b]).hasClass(a.N.qN))return!0;
return!1};a.N.hO=function(d){var b=f("\x3cdiv\x3e");b.addClass(a.N.qN);b.attr("role","presentation");var c=d.attr("id");a.Ba.Wh(c)?b.uniqueId():b.attr("id",[c,"overlay"].join("_"));d.before(b);b.on("keydown keyup keypress mousedown mouseup mouseover mouseout click focusin focus",a.N.QX);b=b.attr("id");d.attr(a.N.kD,b)};a.N.TH=function(d){var b=d.attr(a.N.kD);a.Ba.Wh(b)||(d.removeAttr(a.N.kD),f("#"+b).remove())};a.N.jg={Gn:0,dx:1,kC:2};a.N.Tx={QL:0,PL:1};a.N.JK=function(d,b,c){c||(c={});c.level=0;
c.type=a.N.Tx.PL;a.N.bJ(d,b,c)};a.N.LK=function(d,b,c){c||(c={});c.level=0;c.type=a.N.Tx.QL;a.N.bJ(d,b,c)};a.N.bJ=function(d,b,c){var e=c.level;d=d.children();for(var g=d.length-1;-1<g;g--){var h=f(d[g]);if(a.N.KG(h[0])){var k;if(c.type===a.N.Tx.QL){k=b(h,c);if(k===a.N.jg.kC)return k;if(k===a.N.jg.dx)break}c.level=e+1;k=a.N.bJ(h,b,c);c.level=e;if(k===a.N.jg.kC)return k;if(c.type===a.N.Tx.PL){k=b(h,c);if(k===a.N.jg.kC)return k;if(k===a.N.jg.dx)break}}}return a.N.jg.Gn};a.N.KG=function(d){return 1===
d.nodeType&&d.hasAttribute(a.N.tt)?!0:!1};a.N.VY=function(){return 0<a.N.hn().children().length};a.N.PJ=function(){var d={popupCount:0},b=a.N.hn();a.N.LK(b,a.N.iba,d);return d.popupCount};a.N.iba=function(d,b){b.popupCount+=1;return a.N.jg.Gn};a.N.AJ=function(){var d={},b=[];d.popups=b;b=a.N.hn();a.N.LK(b,a.N.jba,d);b=d.popups;return f(b)};a.N.jba=function(d,b){b.popups.push(d[0]);return a.N.jg.Gn};a.N.qJ=function(d,b){function c(b,c){for(var d=["absolute","relative","fixed"],e=b.parents(),g=[],h=
e.length-1;-1<h;h--)g.push(f(e[h]));e=g;e.push(b);for(var g=[],k=0,h=0;h<e.length;h++){var l=e[h],m=l.css("position"),n=a.C.Nfa(l.css("opacity")),D=a.C.Ofa(l.css("z-index")),l=f.inArray(l[0],l.parent().children());-1<f.inArray(m,d)?g.push({weight:[k++,D,l],order:[l]}):1>n?g.push({weight:[k++,1,l],order:[l]}):c&&g.push({weight:[0,0,l],order:[l]})}return g}function e(a,b){for(var c=Math.max(a.length,b.length),d=0;d<c;d++){var e=d<a.length?a[d]:-1,f=d<b.length?b[d]:-1;if(e!==f)return e<f?-1:1}return 0}
a.j.Va(d,jQuery);a.j.Va(b,jQuery);for(var g=c(d,!1),h=c(b,!1),k=Math.max(g.length,h.length),l=0;l<k;l++){var m=l<g.length?g[l].weight:[-1],n=l<h.length?h[l].weight:[-1],m=e(m,n);if(0!==m)return m}g=c(d,!0);h=c(b,!0);k=Math.max(g.length,h.length);for(l=0;l<k;l++)if(m=l<g.length?g[l].order:[-1],n=l<h.length?h[l].order:[-1],m=e(m,n),0!==m)return m;return 0};a.N.QX=function(a){a.stopPropagation();a.preventDefault()};a.N.qx="oj-popup-events";a.N.hD="oj-popup-modality";a.N.$C="__oj_zorder_container";a.N.tt=
"data-oj-surrogate-id";a.N.kD="data-oj-overlayid";a.N.qN="oj-component-overlay";f.widget("oj.surrogate",{options:{create:null,beforeDestroy:null},_create:function(){this._super();this.element.uniqueId()},_destroy:function(){this._trigger("beforeDestroy");this.element.removeUniqueId();this._super()}});a.ni=function(a){this.FW=a;this.Init()};a.b.ga(a.ni,a.b,"oj.SimpleTapRecognizer");a.ni.prototype.Init=function(){a.ni.q.Init.call(this);for(var d=this.uQ=f.proxy(this.Ky,this),b=document.documentElement,
c=0;c<a.ni.Qx.length;c++)b.addEventListener(a.ni.Qx[c],d,!0)};a.ni.prototype.Ky=function(a){var b=this.FW,c=a.type;"touchstart"===c?this.MA=a:"touchmove"===c||"touchcancel"===c?delete this.MA:"touchend"===c&&(this.MA&&b(this.MA),delete this.MA)};a.ni.prototype.destroy=function(){delete this.FW;var d=this.uQ;delete this.uQ;for(var b=document.documentElement,c=0;c<a.ni.Qx.length;c++)b.removeEventListener(a.ni.Qx[c],d,!0)};a.ni.Qx=["touchstart","touchmove","touchcancel","touchend"];a.$d=function(){this.Init()};
a.b.ga(a.$d,a.b,"oj.PopupLiveRegion");a.$d.prototype.Init=function(){a.$d.q.Init.call(this);isNaN(a.$d.ov)?a.$d.ov=1:++a.$d.ov};a.$d.prototype.destroy=function(){if(!isNaN(a.$d.ov)&&(--a.$d.ov,1>a.$d.ov)){var d=f("#"+a.$d.oD);0<d.length&&d.remove()}};a.$d.prototype.Qea=function(d){if(!a.Ba.Gg(d)){var b=a.$d.h8();b.children().remove();f("\x3cdiv\x3e").text(d).appendTo(b)}};a.$d.h8=function(){var d=f("#"+a.$d.oD);0===d.length&&(d=f("\x3cdiv\x3e"),d.attr({id:a.$d.oD,role:"log","aria-live":"polite","aria-relevant":"additions"}),
d.addClass("oj-helper-hidden-accessible"),d.appendTo(document.body));return d};a.$d.oD="__oj_popup_arialiveregion";a.Dh=function(d,b,c,e){a.j.Va(d,jQuery);a.j.il(b);a.j.hl(c);a.j.Yv(e);this.AA=d;this.rr=b;this.nE=c;this.JS=e?e:"";this.Init()};a.b.ga(a.Dh,a.b,"oj.PopupSkipLink");a.Dh.prototype.Init=function(){a.Dh.q.Init.call(this);var d=this.AA,b=this.nE,c=this.rr;delete this.rr;var e=this.JS;delete this.JS;var g=f("\x3ca\x3e").attr({tabindex:"-1",href:"#"});a.Ba.Gg(e)||g.attr("id",e);g.addClass("oj-helper-hidden-accessible");
g.text(c);g.insertAfter(d);g.on("click",b);d.data(a.Dh.Nx,g)};a.Dh.prototype.destroy=function(){var d=this.AA;delete this.AA;var b=this.nE;delete this.nE;if(d){var c=d.data(a.Dh.Nx);d.removeData(a.Dh.Nx);c&&(c.off("click",b),c.remove())}};a.Dh.prototype.getLink=function(){var d=this.AA,b;d&&(b=d.data(a.Dh.Nx));return b};a.Dh.Nx="oj-skiplink"});