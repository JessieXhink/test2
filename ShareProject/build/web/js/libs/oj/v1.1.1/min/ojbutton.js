/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
/*
 Copyright 2013 jQuery Foundation and other contributors
 Released under the MIT license.
 http://jquery.org/license
*/
define(["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(a,f){(function(){function d(a,b){var c=a.name,d=a.form;c?(c=c.replace(/'/g,"\\'"),c=":radio[name\x3d'"+c+"']:oj-button",d=b?b.filter(c):d?f(d).find(c):f(c,a.ownerDocument).filter(function(){return!this.form})):d=(b?b.filter(a):f(a)).filter(":oj-button");return d}a.Da("oj.ojButton",f.oj.baseComponent,{defaultElement:"\x3cbutton\x3e",widgetEventPrefix:"oj",options:{disabled:!1,display:"all",label:null,icons:{start:null,end:null},menu:null},
ae:function(a,b){this._super(a,b);this.t$();"disabled"in b||this.option("disabled",!!this.element.prop("disabled"),{_context:{mb:!0}});"label"in b||(this.Cga=!0,this.option("label","inputPush"===this.type?this.Zc.val():this.Zc.html(),{_context:{mb:!0}}));!this.options.menu||b.icons&&void 0!==b.icons.end||this.option("icons.end","oj-component-icon oj-button-menu-dropdown-icon",{_context:{rd:!0,mb:!0}})},_ComponentCreate:function(){function a(){d.uaa=Date.now();d.vb.removeClass(k);d.vb.removeClass("oj-hover");
d.eh()}this._super();this.element.closest("form").unbind("reset"+e).bind("reset"+e,function(){var a=f(this);setTimeout(function(){a.find(":oj-button").each(function(){f(this).data("oj-ojButton").by(!1)}).length||a.unbind("reset"+e)},1)});this.As=this.eventNamespace+"menu";this.u$();this.YJ=!!this.vb.attr("title");var d=this,h=this.Ru,k=h?"":"oj-active";this.vb.addClass(g);this.document.bind("touchend"+this.eventNamespace+" touchcancel"+this.eventNamespace,a);this.Zc.bind("touchstart"+this.eventNamespace,
function(){d.Id()||(f(this).addClass(k),d.eh())}).bind("touchend"+this.eventNamespace+" touchcancel"+this.eventNamespace,a).bind("mouseenter"+this.eventNamespace,function(){d.Id()||d.DU()||(this===b&&d.vb.addClass("oj-active"),d.vb.addClass("oj-hover").removeClass("oj-default oj-focus-only"))}).bind("mouseleave"+this.eventNamespace,function(){d.vb.removeClass("oj-hover");d.Id()||(d.vb.removeClass(k),d.eh())}).bind("click"+this.eventNamespace,function(a){var b=d.Id();b&&a.preventDefault();b&&a.stopImmediatePropagation()});
this.element.attr("role","button").bind("focus"+this.eventNamespace,function(){d.vb.addClass("oj-focus");d.eh()}).bind("blur"+this.eventNamespace,function(){d.vb.removeClass("oj-focus");d.eh()});h&&(this.element.bind("change"+this.eventNamespace,function(a){d.by(!0);var b=f(this).closest(":oj-buttonset").data("oj-ojButtonset"),c=b&&b.SQ(b.ue);b&&void 0!==c&&b.option("checked",c,{_context:{rd:!0,originalEvent:a,mb:!0}})}),this.Zc.bind("mousedown"+this.eventNamespace,function(){d.Id()||(c=this,d.document.one("mouseup",
function(){c=null}))}).bind("mouseup"+this.eventNamespace,function(){d.Id()||this!==c||d.element.focus()}));"checkbox"===this.type?(this.Zc.bind("click"+this.eventNamespace,function(){if(d.Id())return!1}),this.element.bind("keyup"+this.eventNamespace,function(a){a.keyCode===f.ui.keyCode.ENTER&&(d.Id()||d.element.click())})):"radio"===this.type?(this.Zc.bind("click"+this.eventNamespace,function(){if(d.Id())return!1}),this.element.bind("keyup"+this.eventNamespace,function(a){a.keyCode!==f.ui.keyCode.ENTER||
d.element[0].checked||d.Id()||(d.element[0].checked=!0,d.element.change(),d.element.click())})):(this.Zc.bind("mousedown"+this.eventNamespace,function(a){if(d.Id())return!1;1!==a.which||d.DU()||(f(this).addClass("oj-active").removeClass("oj-default oj-focus-only"),b=this,d.document.one("mouseup",function(){b=null}))}).bind("mouseup"+this.eventNamespace,function(){if(d.Id())return!1;f(this).removeClass("oj-active");d.eh()}).bind("keydown"+this.eventNamespace,function(a){if(d.Id())return!1;var b=a.keyCode===
f.ui.keyCode.SPACE;"anchor"===d.type&&b&&a.preventDefault();(b||a.keyCode===f.ui.keyCode.ENTER)&&f(this).addClass("oj-active").removeClass("oj-default oj-focus-only")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){f(this).removeClass("oj-active");d.eh()}),"anchor"===this.type&&(h=this.Zc.attr("tabindex"),("undefined"===h||null===h||isNaN(h))&&this.Zc.attr("tabindex","0"),this.Zc.bind("keyup"+this.eventNamespace,function(a){a.keyCode===f.ui.keyCode.SPACE&&f(this).click()})));
this.VI();this.F9();this.ZV();this.eh()},DU:function(){return 500>Date.now()-this.uaa},Xe:function(a,b,c){this.Ye(b,c,{position:{of:"keyboard"===c?this.vb:b}})},t$:function(){if(this.element.is("input[type\x3dcheckbox]"))this.type="checkbox",this.Ru=!0;else if(this.element.is("input[type\x3dradio]"))this.type="radio",this.Ru=!0;else if(this.element.is("input[type\x3dbutton],input[type\x3dsubmit],input[type\x3dreset]"))this.type="inputPush";else if(this.element.is("button"))this.type="button";else if(this.element.is("a"))this.type=
"anchor";else throw Error("JET Button not supported on this element type");if(this.Ru){var a="label[for\x3d'"+this.element.attr("id")+"']";this.Zc=this.element.siblings().filter(a)}else this.Zc=this.element},u$:function(){if(this.Ru){this.Zc.addClass("oj-button-label");this.element.addClass("oj-button-input oj-helper-hidden-accessible").add(this.Zc).wrapAll("\x3cspan\x3e\x3c/span\x3e");this.vb=this.element.parent();this.vb.addClass("oj-button-toggle");var a=this.element[0].checked;a&&this.vb.addClass("oj-selected").removeClass("oj-default oj-focus-only");
this.element.attr("aria-pressed",a)}else this.vb=this.element},widget:function(){return this.vb},_destroy:function(){this.bV();this.document.off(this.eventNamespace);this.element.removeClass("oj-helper-hidden-accessible").removeAttr("role").removeAttr("aria-pressed");var b=this.Ru;b||this.vb.removeClass(g+" "+h+" "+k);this.Zc.html(this.Zc.find(".oj-button-text").html());b?(this.Zc.removeClass("oj-button-label"),a.C.unwrap(this.element)):this.YJ||this.vb.removeAttr("title");c===this.Zc[0]&&(c=null)},
ti:function(){this.vb.removeClass("oj-active oj-hover oj-focus");this.eh()},zt:function(a){this._super(a);this.VI()},VI:function(){var a=this.Id();this.vb.toggleClass("oj-disabled",a);this.vb.toggleClass("oj-enabled",!a);"anchor"!==this.type?(this.element.prop("disabled",a),this.vb.removeAttr("aria-disabled")):this.vb.attr("aria-disabled",a);a?(this.widget().removeClass("oj-active oj-default oj-focus-only oj-hover oj-focus"),b=null,this.XE()):this.eh()},_setOption:function(a,b,c){this._super(a,b,
c);switch(a){case "disabled":this.VI();break;case "label":this.jda();break;case "display":"inputPush"!==this.type&&this.uA();break;case "icons":this.gda(!0);break;case "menu":this.ZV()}},refresh:function(){this._super();this.qO&&!f(this).closest(":oj-buttonset").length&&this.zt(!1)},by:function(a){"radio"===this.type?(a?d(this.element[0]):this.element).each(function(){var a=f(this).data("oj-ojButton");this.checked?(a.vb.addClass("oj-selected").removeClass("oj-default oj-focus-only"),a.element.attr("aria-pressed",
"true")):(a.vb.removeClass("oj-selected"),a.eh(),a.element.attr("aria-pressed","false"))}):"checkbox"===this.type&&(this.element[0].checked?(this.vb.addClass("oj-selected").removeClass("oj-default oj-focus-only"),this.element.attr("aria-pressed","true")):(this.vb.removeClass("oj-selected"),this.eh(),this.element.attr("aria-pressed","false")))},F9:function(){if("inputPush"===this.type)this.MV();else{var a=this.ida(),b=this.wA(!0),c=this.wA(!1);this.uA(a,b,c)}},ida:function(){var a=this.Zc,b=f("\x3cspan class\x3d'oj-button-text'\x3e\x3c/span\x3e",
this.document[0]);this.Cga?b.append(a.contents()):(a.empty(),b.text(this.options.label));a.append(b);return b},jda:function(){if("inputPush"===this.type)this.MV();else{var a=this.Zc.find(".oj-button-text");a.text(this.options.label);this.uA(a)}},MV:function(){this.options.label&&this.element.val(this.options.label)},gda:function(){if("inputPush"!==this.type){var a=this.wA(!0),b=this.wA(!1);this.uA(void 0,a,b)}},wA:function(a){if(a){var b=".oj-button-icon.oj-start";a="oj-button-icon oj-start";var c=
this.options.icons.start,d="_lastStartIcon",e="prependTo"}else b=".oj-button-icon.oj-end",a="oj-button-icon oj-end",c=this.options.icons.end,d="_lastEndIcon",e="appendTo";b=this.Zc.find(b);c?(b.length?b.removeClass(this[d]):b=f("\x3cspan\x3e\x3c/span\x3e").addClass(a)[e](this.Zc),b.addClass(c)):b.remove();this[d]=c;return!!c},uA:function(a,b,c){void 0===a&&(a=this.Zc.find(".oj-button-text"));void 0===b&&(b=!!this.options.icons.start);void 0===c&&(c=!!this.options.icons.end);var d=b&&c;c=b||c;var e=
"icons"===this.options.display;c&&e?(a.addClass("oj-helper-hidden-accessible"),this.YJ||(a=a.text(),this.vb.attr("title",f.trim(a)))):(a.removeClass("oj-helper-hidden-accessible"),this.YJ||this.vb.removeAttr("title"));b=c?e?d?"oj-button-icons-only":"oj-button-icon-only":d?"oj-button-text-icons":b?"oj-button-text-icon-start":"oj-button-text-icon-end":"oj-button-text-only";this.vb.removeClass(k).addClass(b)},ZV:function(){if(this.options.menu&&this.element.is("input"))throw Error("Menu Button functionality is not supported on input elements.");
this.bV();if(this.options.menu){var a=this;this.element.attr("aria-haspopup",!0).on("keydown"+this.As,function(b){if(b.which===f.ui.keyCode.DOWN)a.eW(b,"firstItem"),b.preventDefault();else if(b.which===f.ui.keyCode.ESCAPE){var c=a.O4(a.vb);a.XE(b);return c}return!0}).on("click"+this.As,function(b){var c=a.AR();c.Wx||a.eW(b,"firstItem");c.Wx=!1;b.preventDefault();return!0})}},O4:function(a){return!a.hasClass("oj-selected")},bV:function(){this.element.removeAttr("aria-haspopup").off(this.As);this.XE();
this.ka&&this.ka.widget().off(this.As);this.ka=void 0},AR:function(){if(!this.ka){this.ka=f(this.options.menu).data("oj-ojMenu");if(!this.ka)throw Error('JET Button: "menu" option specified, but does not reference a valid JET Menu.');var a=this;this.ka.widget().on("oj__dismiss"+this.As,function(b){a.RT(b)}).on("ojbeforeopen"+this.As,function(b){a.DT||a.RT(b);a.DT=!1})}return this.ka},eW:function(a,b){this.Id()||(this.DT=!0,this.AR().open(a,{launcher:this.element,initialFocus:b}),this.UT=!0,this.vb.addClass("oj-selected").removeClass("oj-default oj-focus-only"))},
XE:function(a){this.UT&&(this.ka.HD(a,!0),this.ka.ao(a))},RT:function(){if("button"===this.type||"anchor"===this.type)this.vb.removeClass("oj-selected"),this.eh();this.UT=!1},eh:function(){var a,b;this.vb.is(".oj-hover, .oj-active, .oj-selected, .oj-disabled")?b=a=!1:(b=this.vb.is(".oj-focus"),a=!b);this.vb.toggleClass("oj-default",a);this.vb.toggleClass("oj-focus-only",b)}});a.Da("oj.ojButtonset",f.oj.baseComponent,{AT:"button, input[type\x3dbutton], input[type\x3dsubmit], input[type\x3dreset], input[type\x3dcheckbox], input[type\x3dradio], a",
widgetEventPrefix:"oj",options:{checked:null,focusManagement:"oneTabstop"},zv:function(a,b){var c=f.type(a),d;if("null"===c||"array"===c)d=b.filter("input[type\x3dcheckbox]").length===b.length;if(d&&"null"===c)throw Error("Invalid 'checked' value set on JET Buttonset: "+a);if("string"===c||"null"===c)(c=((c=b[0].name)||1>=b.length)&&b.filter("input[type\x3dradio][name\x3d"+c+"]").length===b.length&&(null===a||b.filter("[value\x3d"+a+"]").length))&&b.each(function(){this.checked=this.value===a}),c=
c||null===a;else if("array"===c){var e;(c=d&&a.concat().sort().every(function(a){var c=a!==e&&b.filter("[value\x3d"+a+"]").length;e=a;return c}))&&b.each(function(){this.checked=-1<a.indexOf(this.value)})}else c=!1;if(!c)throw Error("Invalid 'checked' value set on JET Buttonset: "+a);},SQ:function(a){var b=void 0,c=null,d=null;a.each(function(){if("input"!==this.tagName.toLowerCase())return b=void 0,!1;var a=this.type.toLowerCase(),e;if("radio"===a)a=!0,e=this.name.toLowerCase();else if("checkbox"===
a)a=!1,e=null;else return b=void 0,!1;if(void 0!==b&&(a!==c||e!==d||c&&!d))return b=void 0,!1;void 0===b?(b=a?this.checked?this.value:null:this.checked?[this.value]:[],c=a,d=e):this.checked&&(c?b=this.value:b.push(this.value))});return b},et:function(a,b,c){return"checked"===a?b===c?!0:"array"===f.type(b)&&"array"===f.type(c)&&!f(b).not(c).length&&!f(c).not(b).length:this._superApply(arguments)},ae:function(a,b){this._super(a,b);this.ue=this.element.find(this.AT);if(!("checked"in b)){this.$J=!0;var c=
this.SQ(this.ue);"array"===f.type(c)&&(this.options.checked=[]);void 0!==c&&this.option("checked",c,{_context:{mb:!0}})}},_ComponentCreate:function(){this._super();this.element.addClass("oj-buttonset oj-component");this.WV(this.options.focusManagement);this.za(!0)},Xe:function(a,b,c){a=this.element.find(":oj-button[tabindex\x3d0]");this.Ye(b,c,{launcher:a,position:{of:"keyboard"===c?a.ojButton("widget"):b}})},Nm:function(a){a=!!a;this.ue.each(function(){f(this).data("oj-ojButton").zt(a)})},WV:function(a){"oneTabstop"===
a?this.element.attr("role","toolbar"):this.element.removeAttr("role")},_setOption:function(a,b,c){"disabled"===a?this.Nm(b):"checked"===a?(this.zv(b,this.ue),this.ue.each(function(){f(this).data("oj-ojButton").by(!1)})):"focusManagement"===a&&this.WV(b);this._superApply(arguments)},refresh:function(){this._super();this.za(!1)},za:function(a){var b=this;this.rf="rtl"===this.hc();a?this.$J||this.zv(this.options.checked,this.ue):this.ue=this.element.find(this.AT);this.ue.filter(":oj-button").ojButton("refresh").each(function(){f(this).data("oj-ojButton").by(!1)}).end().not(":oj-button").ojButton().end().map(function(){return f(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").filter(":first").addClass("oj-buttonset-first").end().filter(":last").addClass("oj-buttonset-last").end().end();
this.Nm(this.options.disabled);"oneTabstop"===this.options.focusManagement&&(this.ue.unbind("keydown"+this.eventNamespace).bind("keydown"+this.eventNamespace,function(a){b.Du(a,f(this))}).unbind("click"+this.eventNamespace).bind("click"+this.eventNamespace,function(){f(this).data("oj-ojButton").Id()||b.$o(f(this))}).unbind("focus"+this.eventNamespace).bind("focus"+this.eventNamespace,function(){b.$o(f(this))}),this.jk=this.ue.filter(function(){return!f(this).data("oj-ojButton").Id()}),this.VG(a))},
VG:function(a){var b=f(this.No);this.No=void 0;this.ue.attr("tabindex","-1");a=a||!b.is(this.jk)?this.jk.first():b;this.$o(a)},hH:function(a){var b=this.jk;return a.map(function(a,c){if("radio"!=c.type||c.checked||""==c.name)return c;var e=d(c,b).filter(":checked");return e.length?e[0]:c})},$o:function(a){a=this.hH(a);var b=a[0],c=this.No;b!==c&&(f(c).attr("tabindex","-1"),a.attr("tabindex","0"),this.No=b)},Du:function(a,b){switch(a.which){case f.ui.keyCode.LEFT:case f.ui.keyCode.RIGHT:a.preventDefault();
var c=this.jk,d=c.length;if(2>d)break;var e=c.index(b);c.eq((e+(a.which==f.ui.keyCode.RIGHT^this.rf?1:-1)+d)%d).focus();break;case f.ui.keyCode.UP:case f.ui.keyCode.DOWN:"radio"==b.attr("type")&&a.preventDefault()}},_destroy:function(){this.element.removeClass("oj-buttonset oj-component").removeAttr("role");"oneTabstop"===this.options.focusManagement&&this.ue.attr("tabindex","0");this.ue.map(function(){return f(this).ojButton("widget")[0]}).removeClass("oj-buttonset-first oj-buttonset-last").end().ojButton("destroy")}});
var b,c,e=".ojButton",g="oj-button oj-component oj-enabled oj-default",h="oj-hover oj-active oj-selected",k="oj-button-icons-only oj-button-icon-only oj-button-text-icons oj-button-text-icon-start oj-button-text-icon-end oj-button-text-only"})()});