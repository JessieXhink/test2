/**
 * Copyright (c) 2014, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(['./DvtToolkit', './DvtPanZoomCanvas'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.  // Map the D namespace to dvt, which is used to provide access across partitions.
  var D = dvt;
  D.tq=function(a){this.Init(a)};(0,D.ca)("DvtDiagramLayoutContext",D.tq);D.y.q(D.tq,D.y,"DvtDiagramLayoutContext");
D.tq.prototype.Init=function(a){this.jf=a?a.jf:D.o;this.Um=a?a.Um:D.o;this.tr=a?a.tr:0;this.ZO=a?a.ZO:0;this.rs=a?a.rs:D.p;this.j4=a?a.j4:D.o;this.Be=a?a.Be:D.o;this.qu=a?a.qu:D.o;this.sg=a?a.sg:D.o;this.pb={};this.Lc={};this.ly=[];this.rN=[];if(a){for(var b=0;b<this.tr;b++){var c=new D.wq(a.ly[b]);this.ly.push(c);this.pb[c.getId()]=c}for(var d in a.pb)this.pb[d]||(this.pb[d]=new D.wq(a.pb[d]));for(b=0;b<this.ZO;b++)c=new D.yq(a.rN[b]),this.rN.push(c),this.Lc[c.getId()]=c;for(var e in a.Lc)this.Lc[e]||
(this.Lc[e]=new D.yq(a.Lc[e]))}};D.tq.prototype.tm=(0,D.v)("jf");D.tq.prototype.$e=(0,D.w)("jf");D.tq.prototype.getLayout=D.tq.prototype.$e;D.tq.prototype.un=(0,D.v)("Um");D.tq.prototype.Hi=(0,D.w)("Um");D.tq.prototype.getLayoutAttributes=D.tq.prototype.Hi;D.tq.prototype.CQ=function(a){this.rL(a.getId())||(this.tr++,this.ly.push(a));this.pb[a.getId()]=a};D.tq.prototype.rL=function(a){return this.pb[a]};D.tq.prototype.getNodeById=D.tq.prototype.rL;D.tq.prototype.JC=function(a){return this.ly[a]};
D.tq.prototype.getNodeByIndex=D.tq.prototype.JC;D.tq.prototype.af=(0,D.w)("tr");D.tq.prototype.getNodeCount=D.tq.prototype.af;D.pr=function(a,b){a.Vpa(b.getId())||(a.ZO++,a.rN.push(b));a.Lc[b.getId()]=b};D.tq.prototype.Vpa=function(a){return this.Lc[a]};D.tq.prototype.getLinkById=D.tq.prototype.Vpa;D.tq.prototype.FC=function(a){return this.rN[a]};D.tq.prototype.getLinkByIndex=D.tq.prototype.FC;D.tq.prototype.gp=(0,D.w)("ZO");D.tq.prototype.getLinkCount=D.tq.prototype.gp;
D.tq.prototype.DKa=function(a,b){for(var c=b,d=new D.Br(0,0);c;)if(d.x+=c.$f().x,d.y+=c.$f().y,c=c.qu){if((c=this.rL(c))&&c.mb()){var e=c.fk();e&&(d.x+=e.left,d.y+=e.top)}}else c=D.o;return new D.Br(a.x+d.x,a.y+d.y)};D.tq.prototype.localToGlobal=D.tq.prototype.DKa;D.tq.prototype.$Ja=(0,D.w)("rs");D.tq.prototype.isLocaleR2L=D.tq.prototype.$Ja;D.tq.prototype.YGa=(0,D.w)("j4");D.tq.prototype.getComponentSize=D.tq.prototype.YGa;D.tq.prototype.QLa=(0,D.v)("Be");D.tq.prototype.setViewport=D.tq.prototype.QLa;
D.tq.prototype.QC=(0,D.w)("Be");D.tq.prototype.getViewport=D.tq.prototype.QC;D.tq.prototype.vS=(0,D.v)("qu");D.tq.prototype.B$=(0,D.w)("qu");D.tq.prototype.getContainerId=D.tq.prototype.B$;D.tq.prototype.lD=function(a,b,c,d){this.qu&&(this.sg={},this.sg.top=a,this.sg.right=b,this.sg.bottom=c,this.sg.left=d)};D.tq.prototype.setContainerPadding=D.tq.prototype.lD;D.tq.prototype.fk=(0,D.w)("sg");D.tq.prototype.getContainerPadding=D.tq.prototype.fk;D.tq.prototype.ZGa=(0,D.w)("II");
D.tq.prototype.getCurrentViewport=D.tq.prototype.ZGa;
D.yq=function(a){this.Init(a)};(0,D.ca)("DvtDiagramLayoutContextLink",D.yq);D.y.q(D.yq,D.y,"DvtDiagramLayoutContextLink");D.yq.prototype.Init=function(a){this.jb=a?a.jb:D.o;this.uK=a?a.uK:D.o;this.VI=a?a.VI:D.o;this.Hh=a?a.Hh:D.o;this.eF=a?a.eF:D.o;this.dF=a?a.dF:D.o;this.Um=a?a.Um:D.o;this.X8=a?a.X8:0;this.e5=a?a.e5:0;this.mF=a?a.mF:1;this.He=a?a.He:D.p;this.$i=a?a.$i:D.o;this.Yh=a?a.Yh:D.o;this.ts=a?a.ts:D.p};D.yq.prototype.setId=(0,D.v)("jb");D.yq.prototype.getId=(0,D.w)("jb");
D.yq.prototype.getId=D.yq.prototype.getId;D.yq.prototype.iM=(0,D.v)("uK");D.yq.prototype.pd=(0,D.w)("uK");D.yq.prototype.getStartId=D.yq.prototype.pd;D.yq.prototype.aM=(0,D.v)("VI");D.yq.prototype.nc=(0,D.w)("VI");D.yq.prototype.getEndId=D.yq.prototype.nc;D.yq.prototype.Ec=(0,D.v)("Hh");D.yq.prototype.setPoints=D.yq.prototype.Ec;D.yq.prototype.Ab=(0,D.w)("Hh");D.yq.prototype.getPoints=D.yq.prototype.Ab;D.yq.prototype.Nd=(0,D.v)("eF");D.yq.prototype.setLabelPosition=D.yq.prototype.Nd;
D.yq.prototype.Ad=(0,D.w)("eF");D.yq.prototype.getLabelPosition=D.yq.prototype.Ad;D.yq.prototype.qo=(0,D.v)("dF");D.yq.prototype.Sd=(0,D.w)("dF");D.yq.prototype.getLabelBounds=D.yq.prototype.Sd;D.yq.prototype.qR=(0,D.w)("X8");D.yq.prototype.getStartConnectorOffset=D.yq.prototype.qR;D.yq.prototype.$Q=(0,D.w)("e5");D.yq.prototype.getEndConnectorOffset=D.yq.prototype.$Q;D.yq.prototype.qD=(0,D.v)("mF");D.yq.prototype.ov=(0,D.w)("mF");D.yq.prototype.getLinkWidth=D.yq.prototype.ov;D.yq.prototype.un=(0,D.v)("Um");
D.yq.prototype.Hi=(0,D.w)("Um");D.yq.prototype.getLayoutAttributes=D.yq.prototype.Hi;D.yq.prototype.zb=(0,D.v)("He");D.yq.prototype.aaa=(0,D.w)("He");D.yq.prototype.getSelected=D.yq.prototype.aaa;D.yq.prototype.Iv=(0,D.v)("$i");D.yq.prototype.setLabelRotationAngle=D.yq.prototype.Iv;D.yq.prototype.mv=(0,D.w)("$i");D.yq.prototype.getLabelRotationAngle=D.yq.prototype.mv;D.yq.prototype.Tr=(0,D.v)("Yh");D.yq.prototype.setLabelRotationPoint=D.yq.prototype.Tr;D.yq.prototype.nv=(0,D.w)("Yh");
D.yq.prototype.getLabelRotationPoint=D.yq.prototype.nv;D.yq.prototype.uD=(0,D.v)("ts");D.yq.prototype.Cx=(0,D.w)("ts");
D.wq=function(a){this.Init(a)};(0,D.ca)("DvtDiagramLayoutContextNode",D.wq);D.y.q(D.wq,D.y,"DvtDiagramLayoutContextNode");D.wq.prototype.Init=function(a){this.jb=a?a.jb:D.o;this.Ka=a?a.Ka:D.o;this.mV=a?a.mV:D.o;this.iC=a?a.iC:D.o;this.eF=a?a.eF:D.o;this.dF=a?a.dF:D.o;this.Um=a?a.Um:D.o;this.A3=a?a.A3:D.p;this.qu=a?a.qu:D.o;this.He=a?a.He:D.p;this.$i=a?a.$i:D.o;this.Yh=a?a.Yh:D.o;this.sg=a?a.sg:D.o;this.ur=a?a.ur:D.o;this.vr=a?a.vr:D.o;this.ri=a?a.ri:D.p};D.wq.prototype.setId=(0,D.v)("jb");
D.wq.prototype.getId=(0,D.w)("jb");D.wq.prototype.getId=D.wq.prototype.getId;D.wq.prototype.Qba=function(a){this.ur=this.Ka=a};D.wq.prototype.Ce=(0,D.w)("Ka");D.wq.prototype.getBounds=D.wq.prototype.Ce;D.wq.prototype.Qf=(0,D.w)("mV");D.wq.prototype.getContentBounds=D.wq.prototype.Qf;D.wq.prototype.Mi=(0,D.v)("iC");D.wq.prototype.setPosition=D.wq.prototype.Mi;D.wq.prototype.$f=(0,D.w)("iC");D.wq.prototype.getPosition=D.wq.prototype.$f;D.wq.prototype.Nd=(0,D.v)("eF");
D.wq.prototype.setLabelPosition=D.wq.prototype.Nd;D.wq.prototype.Ad=(0,D.w)("eF");D.wq.prototype.getLabelPosition=D.wq.prototype.Ad;D.wq.prototype.qo=(0,D.v)("dF");D.wq.prototype.Sd=(0,D.w)("dF");D.wq.prototype.getLabelBounds=D.wq.prototype.Sd;D.wq.prototype.un=(0,D.v)("Um");D.wq.prototype.Hi=(0,D.w)("Um");D.wq.prototype.getLayoutAttributes=D.wq.prototype.Hi;D.wq.prototype.Lv=(0,D.v)("A3");D.wq.prototype.VG=(0,D.w)("A3");D.wq.prototype.isReadOnly=D.wq.prototype.VG;D.wq.prototype.vS=(0,D.v)("qu");
D.wq.prototype.B$=(0,D.w)("qu");D.wq.prototype.getContainerId=D.wq.prototype.B$;D.wq.prototype.zb=(0,D.v)("He");D.wq.prototype.aaa=(0,D.w)("He");D.wq.prototype.getSelected=D.wq.prototype.aaa;D.wq.prototype.Iv=(0,D.v)("$i");D.wq.prototype.setLabelRotationAngle=D.wq.prototype.Iv;D.wq.prototype.mv=(0,D.w)("$i");D.wq.prototype.getLabelRotationAngle=D.wq.prototype.mv;D.wq.prototype.Tr=(0,D.v)("Yh");D.wq.prototype.setLabelRotationPoint=D.wq.prototype.Tr;D.wq.prototype.nv=(0,D.w)("Yh");
D.wq.prototype.getLabelRotationPoint=D.wq.prototype.nv;D.wq.prototype.lD=function(a,b,c,d){this.mb()&&(this.sg={},this.sg.top=a,this.sg.right=b,this.sg.bottom=c,this.sg.left=d,this.ur&&(this.Ka=new D.uq(this.ur.x,this.ur.y,this.ur.w+d+b,this.ur.h+a+c)),this.vr&&(this.mV=new D.uq(this.vr.x,this.vr.y,this.vr.w+d+b,this.vr.h+a+c)))};D.wq.prototype.setContainerPadding=D.wq.prototype.lD;D.wq.prototype.fk=(0,D.w)("sg");D.wq.prototype.getContainerPadding=D.wq.prototype.fk;D.wq.prototype.ef=(0,D.v)("ri");
D.wq.prototype.mb=(0,D.w)("ri");D.wq.prototype.isDisclosed=D.wq.prototype.mb;
D.Br=function(a,b){this.Init(a,b)};(0,D.ca)("DvtDiagramPoint",D.Br);D.y.q(D.Br,D.y,"DvtDiagramPoint");D.Br.prototype.Init=function(a,b){this.x=a===D.o||(0,window.isNaN)(a)?0:a;this.y=b===D.o||(0,window.isNaN)(b)?0:b};
D.uq=function(a,b,c,d){this.Init(a,b,c,d)};(0,D.ca)("DvtDiagramRectangle",D.uq);D.y.q(D.uq,D.y,"DvtDiagramRectangle");D.uq.prototype.Init=function(a,b,c,d){this.x=a===D.o||(0,window.isNaN)(a)?0:a;this.y=b===D.o||(0,window.isNaN)(b)?0:b;this.w=c===D.o||(0,window.isNaN)(c)?0:c;this.h=d===D.o||(0,window.isNaN)(d)?0:d};
D.qq=function(a,b,c){this.Init(a,b,c)};(0,D.ca)("DvtBaseDiagram",D.qq);D.y.q(D.qq,D.rq,"DvtBaseDiagram");D.x=D.qq.prototype;D.x.Init=function(a,b,c){D.qq.u.Init.call(this,a,b,c);this.j().Uc.Fa().setAttributeNS(D.o,"text-rendering","geometricPrecision");this.F6;this.zJ=this.Vm=D.o;this.qW;this.w3=D.k;this.ll=new D.C(a);this.$h=new D.C(a);this.nt=new D.C(a);this.jy=0.5;this.qea()};D.x.KM=function(){var a=this.fa;a.Kv(this.HC());a.Lt(this.tx());a.Fv(this.Pa());a.ga.k(this.ll);a.ga.k(this.$h);a.ga.k(this.nt)};
D.x.Fv=function(a){this.jy=a;this.fa&&this.fa.Fv(a)};D.x.Pa=(0,D.w)("jy");D.x.Lt=function(a){this.Ju=a;this.fa&&this.fa.Lt(a)};D.x.tx=(0,D.w)("Ju");D.x.Kv=function(a){this.Ys=a;this.fa&&this.fa.Kv(a)};D.x.HC=(0,D.w)("Ys");D.x.qea=function(){this.Lt(2);this.Kv(0)};D.x.sj=function(){this.GO||(D.qq.u.sj.call(this),this.KM(),this.Jp());this.GO=D.p};D.x.Jp=(0,D.s)();D.x.R=(0,D.ba)(D.o);D.x.$b=(0,D.ba)(D.o);D.x.FH=function(){return[]};D.x.CA=function(){return[]};D.x.af=function(){return this.CA().length};
D.qq.prototype.getNodeCount=D.qq.prototype.af;D.qq.prototype.gp=function(){return this.FH().length};D.qq.prototype.getLinkCount=D.qq.prototype.gp;D.sq=function(a,b){if(b&&a.CC())a.yB?(a.yB.ja(a.fb/2),a.yB.Ea(a.tb/2),D.yf.wc(a.yB,a.getWidth()-2*D.yf.F0,window.Infinity,a)):a.yB=a.Lca(a.CC());else if(a.yB){var c=a.yB.getParent();c&&c.removeChild(a.yB);a.yB=D.o}};D.x=D.qq.prototype;D.x.Lca=function(a){return D.yf.sn(this,a,new D.B(0,0,this.getWidth(),this.getHeight()),this.Aa())};D.x.CC=(0,D.w)("Py");
D.x.eR=(0,D.w)("qW");D.x.sh=(0,D.w)("fc");D.x.Nv=function(a){this.fc="single"==a?new D.am("s"):"multiple"==a?new D.am("m"):D.o;this.Aa().Mv(this.fc)};D.x.yl=function(){return this.fc?this.fc.$a():D.o};D.x.Aq=function(){return this.fc?D.k:D.p};D.x.Aa=(0,D.w)("Xa");D.vq=function(a){var b=new D.tq,c=(0,D.F)(a.j());b.rs=c;a=new D.uq(0,0,a.getWidth(),a.getHeight());b.j4=a;return b};
D.qq.prototype.Ot=function(a,b){var c=new D.wq;c.setId(a.getId?a.getId():a.getData().getId());c.Qba(D.xq.MY(a.Dg()));var d=D.xq.MY(a.Qf());c.mV=d;c.vr=d;c.un(a.Hi(b));c.qo(D.xq.MY(a.Sd()));c.Nd(D.xq.Foa(a.Ad()));c.zb(D.k==a.Ha());if(a.mb()&&(c.ef(D.k),d=a.fk(),c.mb()&&(c.sg=d)))c.ur&&(c.ur=new D.uq(c.ur.x,c.ur.y,c.ur.w-(d.left+d.right),c.ur.h-(d.top+d.bottom))),c.vr&&(c.vr=new D.uq(c.vr.x,c.vr.y,c.vr.w-(d.left+d.right),c.vr.h-(d.top+d.bottom)));c.vS(a.getData().cR?a.getData().md:D.o);return c};
D.qq.prototype.BD=function(a,b,c,d){var e=new D.yq;e.setId(a.getId?a.getId():a.getData().getId());e.iM(b?b:a.getData().pd());e.aM(c?c:a.getData().nc());e.un(a.Hi(d));e.qo(D.xq.MY(a.Sd()));e.Nd(D.xq.Foa(a.Ad()));b=a.qR();e.X8=b;b=a.$Q();e.e5=b;e.qD(a.ov());e.zb(D.k==a.Ha());e.uD(D.k==a.Cx());return e};
D.qq.prototype.xH=function(a,b,c){var d=a.fk();if(d){var e=a.qu;e&&(e=this.R(e))&&e.lD(d.top,d.right,d.bottom,d.left,b)}for(var e=d=window.Number.MAX_VALUE,f=0;f<a.af();f++){var g=a.JC(f),h=this.R(g.getId()),j=g.$f();j&&(d=window.Math.min(d,j.x),e=window.Math.min(e,j.y));h=g.Sd();j=g.Ad();h&&j&&(d=window.Math.min(d,j.x+h.x),e=window.Math.min(e,j.y+h.y))}for(f=0;f<a.gp();f++){var g=a.FC(f),l=this.$b(g.getId());if(j=g.Ab()){j=D.zq.P0(j);for(h=0;h<j.length;h++)var m=j[h],d=window.Math.min(d,m.x),e=window.Math.min(e,
m.y)}h=g.Sd();j=g.Ad();h&&j&&(d=window.Math.min(d,j.x+h.x),e=window.Math.min(e,j.y+h.y))}e=this.Hca(-d,-e);d=e.x;e=e.y;for(f=0;f<a.af();f++){g=a.JC(f);h=this.R(g.getId());(j=g.$f())&&h.ew(j.x+d,j.y+e,b);var n=g.Sd(),m=g.Ad();if(n&&m){var j=new D.H(m.x-j.x,m.y-j.y),m=g.$i,q=D.xq.Eoa(g.Yh);b?((0,D.S)(b,"typeRectangle",h,h.Sd,h.qo,n),h.Ad()?(0,D.S)(b,"typePoint",h,h.Ad,h.Nd,j):h.Nd(j),m!=D.o&&(0,D.S)(b,"typeNumber",h,h.mv,h.Iv,m),q&&(h.Yh?(0,D.S)(b,"typePoint",h,h.nv,h.Tr,q):h.Tr(q))):(h.qo(n),h.Nd(j),
m!=D.o&&h.Iv(m),q&&h.Tr(q))}h.mb()&&(g=g.fk())&&h.lD(g.top,g.right,g.bottom,g.left,b)}if(!this.ty)for(f=0;f<a.gp();f++){g=a.FC(f);l=this.$b(g.getId());if(j=g.Ab()){0<j.length&&!(0,window.isNaN)(j[0])&&(j=D.zq.$S(j));for(var r=[],h=0;h<j.length;)(0,window.isNaN)(j[h])?(r.push(j[h]),h++):(r.push(j[h]+d),r.push(j[h+1]+e),h+=2);b&&l.Ab()?0<r.length&&(0,window.isNaN)(r[0])?(h=D.Aq.mpa(l.Ab(),r),l.Ec(h.hca),(0,D.S)(b,"typePath",l,l.Ab,l.Ec,h.gca),(0,D.im)(b,function(){l.Ec(r)})):(0,D.S)(b,"typePolyline",
l,l.Ab,l.Ec,r):l.Ec(r)}h=D.xq.zFa(g.Sd());j=g.Ad();m=g.$i;q=D.xq.Eoa(g.Yh);h&&j&&(g=new D.H(j.x+d,j.y+e),b?((0,D.S)(b,"typeRectangle",l,l.Sd,l.qo,h),l.Ad()?(0,D.S)(b,"typePoint",l,l.Ad,l.Nd,g):l.Nd(g),m!=D.o&&(0,D.S)(b,"typeNumber",l,l.mv,l.Iv,m),q&&(l.Yh?(0,D.S)(b,"typePoint",l,l.nv,l.Tr,q):l.Tr(q))):(l.qo(h),l.Nd(g),m!=D.o&&l.Iv(m),q&&l.Tr(q)))}if(b=a.QC())this.Vm=new D.B(b.x+d,b.y+e,b.w,b.h),this.zJ=a.qu;c&&(this.F6=new D.H(d,e))};
D.Cq=function(a,b){var c;if(a.Vm&&(c=new D.B(a.Vm.x,a.Vm.y,a.Vm.e,a.Vm.g),a.zJ))for(var d=a.R(a.zJ);d;){var e=d.V(),f=d.Q();if(b){var g=(0,D.Bq)(b,d,d.V),h=(0,D.Bq)(b,d,d.Q);if(g||0==g)e=g;if(h||0==h)f=h}c.x+=e;c.y+=f;d=(d=d.getData().cR?d.getData().md:D.o)?a.R(d):D.o}return c};D.qq.prototype.Hca=function(a,b){return new D.H(a,b)};D.qq.prototype.Sv=function(a,b){if(0==this.Ys){var c=this.fa,d=b?b:(0,D.Dq)(this,a,D.i,D.i),e=(0,D.Eq)(this,d);c.Kv(0.5*window.Math.min(e,c.tx()));return d}return D.o};
D.Eq=function(a,b){if(!b)return 0;var c=a.fa;return window.Math.min((a.fb-2*c.lq)/b.e,(a.tb-2*c.lq)/b.g)};
D.Dq=function(a,b,c,d){var e=D.o,f,g,h,j,l=a.fa.ga;c||(c=a.CA());for(var m=0;m<c.length;m++)if(f=c[m],(j=a.R(f))&&j.wb&&!j.ge){var n=j,q=b;f=n.Dg();g=new D.B(f.x,f.y,f.e,f.g);h=D.o;q&&(h=(0,D.Bq)(q,n,n.Ad));h||(h=n.Ad());var r=D.o,t=D.o;q&&(r=(0,D.Bq)(q,n,n.mv),t=(0,D.Bq)(q,n,n.nv));r==D.o&&(r=n.$i);t||(t=n.Yh);n=n.Sd();h&&n&&(r!=D.o&&(n=(0,D.Fq)(n,r,t)),g.x=window.Math.min(f.x,n.x+h.x),g.y=window.Math.min(f.y,n.y+h.y),g.e=window.Math.max(f.x+f.e,n.x+h.x+n.e)-g.x,g.g=window.Math.max(f.y+f.g,n.y+h.y+
n.g)-g.y);f=g;h=g=D.o;b&&(g=(0,D.Bq)(b,j,j.V),h=(0,D.Bq)(b,j,j.Q));g==D.o&&(g=j.V());h==D.o&&(h=j.Q());f.x+=g;f.y+=h;if(g=j.getData().cR?j.getData().md:D.o)g=j.getParent(),j=(0,D.Gq)(new D.H(f.x,f.y),g,b),j=(0,D.Hq)(j,l,b),g=(0,D.Gq)(new D.H(f.x+f.e,f.y+f.g),g,b),g=(0,D.Hq)(g,l,b),f.x=j.x,f.y=j.y,f.e=g.x-j.x,f.g=g.y-j.y;e?(j=e.x,g=e.y,e.x=window.Math.min(e.x,f.x),e.y=window.Math.min(e.y,f.y),e.e=window.Math.max(j+e.e,f.x+f.e)-e.x,e.g=window.Math.max(g+e.g,f.y+f.g)-e.y):e=f}d||(d=a.FH());for(m=0;m<
d.length;m++)if(c=d[m],(c=a.$b(c))&&c.wb){j=c;g=b;f=new D.B(window.Number.MAX_VALUE,window.Number.MAX_VALUE,-window.Number.MAX_VALUE,-window.Number.MAX_VALUE);h=D.o;g&&(h=(0,D.Bq)(g,j,j.Ab));h||(h=j.Ab());if(h){h=D.zq.P0(h);for(var u=D.i,u=n=t=r=D.i,q=0;q<h.length;q++)u=h[q],r=window.Math.max(f.x+f.e,u.x),t=window.Math.max(f.y+f.g,u.y),n=window.Math.min(f.x,u.x),u=window.Math.min(f.y,u.y),f.x=n,f.y=u,f.e=r-n,f.g=t-u}h=new D.B(f.x,f.y,f.e,f.g);r=D.o;g&&(r=(0,D.Bq)(g,j,j.Ad));r==D.o&&(r=j.Ad());n=t=
D.o;g&&(t=(0,D.Bq)(g,j,j.mv),n=(0,D.Bq)(g,j,j.nv));t==D.o&&(t=j.$i);n||(n=j.Yh);j=j.Sd();r&&j&&(t!=D.o&&(j=(0,D.Fq)(j,t,n)),h.x=window.Math.min(f.x,j.x+r.x),h.y=window.Math.min(f.y,j.y+r.y),h.e=window.Math.max(f.x+f.e,j.x+r.x+j.e)-h.x,h.g=window.Math.max(f.y+f.g,j.y+r.y+j.g)-h.y);f=h;if(g=c.getData().cR?c.getData().md:D.o)c=c.getParent(),j=(0,D.Gq)(new D.H(f.x,f.y),c,b),j=(0,D.Hq)(j,l,b),g=(0,D.Gq)(new D.H(f.x+f.e,f.y+f.g),c,b),g=(0,D.Hq)(g,l,b),f.x=j.x,f.y=j.y,f.e=g.x-j.x,f.g=g.y-j.y;e?(j=e.x,g=
e.y,e.x=window.Math.min(e.x,f.x),e.y=window.Math.min(e.y,f.y),e.e=window.Math.max(j+e.e,f.x+f.e)-e.x,e.g=window.Math.max(g+e.g,f.y+f.g)-e.y):e=f}return e};
D.Fq=function(a,b,c){if(b==D.o&&!c)return a;var d=new D.H(a.x,a.y),e=new D.H(a.x+a.e,a.y),f=new D.H(a.x,a.y+a.g);a=new D.H(a.x+a.e,a.y+a.g);var g=new D.vk;b!=D.o&&(c&&g.translate(-c.x,-c.y),g.rotate(b),c&&g.translate(c.x,c.y));b=(0,D.Iq)(g,d);e=(0,D.Iq)(g,e);f=(0,D.Iq)(g,f);d=(0,D.Iq)(g,a);a=window.Math.min(window.Math.min(b.x,e.x),window.Math.min(f.x,d.x));g=window.Math.max(window.Math.max(b.x,e.x),window.Math.max(f.x,d.x));c=window.Math.min(window.Math.min(b.y,e.y),window.Math.min(f.y,d.y));b=window.Math.max(window.Math.max(b.y,
e.y),window.Math.max(f.y,d.y));return new D.B(a,c,g-a,b-c)};D.Hq=function(a,b,c){for(var d=(0,D.Jq)(b),e=a,f=d.length-1;0<=f;f--){b=d[f];a=b.Da().ia();var g=D.o,h=D.o;c&&(g=(0,D.Bq)(c,b,b.V),h=(0,D.Bq)(c,b,b.Q));g!=D.o&&(a.Vb=g);h!=D.o&&(a.Qb=h);a.xx();e=(0,D.Iq)(a,e)}return e};D.Gq=function(a,b,c){for(var d=(0,D.Jq)(b),e=a,f=0;f<d.length;f++){b=d[f];a=b.Da().ia();var g=D.o,h=D.o;c&&(g=(0,D.Bq)(c,b,b.V),h=(0,D.Bq)(c,b,b.Q));g!=D.o&&(a.Vb=g);h!=D.o&&(a.Qb=h);e=(0,D.Iq)(a,e)}return e};
D.qq.prototype.pM=function(a,b,c,d,e){var f=this.fa,g=f.ad().e/2,h=f.ad().g/2;c=g-(c+a)*e;d=h-(d+b)*e;a=g-a*e;b=h-b*e;this.Vm&&(h=(0,D.Cq)(this),-h.x*e<c?(g=c+h.x*e,c-=g,a+=g):-h.x*e>a&&(g=-h.x*e-a,c-=g,a+=g),-h.y*e<d?(e=d+h.y*e,d-=e,b+=e):-h.y*e>b&&(e=-h.y*e-b,d-=e,b+=e));f.Ws=c;f.Xs=d;f.Us=a;f.Vs=b};
D.Kq=function(a,b){this.Init(a,b)};D.y.q(D.Kq,D.Lq,"DvtBaseDiagramKeyboardHandler");D.x=D.Kq.prototype;D.x.Init=function(a,b){D.Kq.u.Init.call(this,a,b);this.v=a};D.x.ma=(0,D.w)("v");D.x.cA=function(a){return 9==a.keyCode?D.p:this.Rg(a)&&!a.ctrlKey};D.x.Ht=function(a){return 32==a.keyCode&&a.ctrlKey};D.x.fZ=function(a,b,c){b=b.keyCode;if(!c||1>c.length||!a)return D.o;var d=c[0];a=a.Ze();a=a.x+a.e/2;for(var e=0;e<c.length;e++){var f=c[e],g=f.Ze(),g=g.x+g.e/2;if(188==b&&g<=a||190==b&&g>=a){d=f;break}}return d};
D.x.wZ=function(a,b,c,d){if(!d)return D.o;if(!b)return d[0];if(!a)return b;for(var e=0;e<d.length;e++){var f=d[e],g=f,h=a,j=f,l=this.GD(j.pd?j.pd():j.getData().pd()),j=this.GD(j.nc?j.nc():j.getData().nc()),l=h==l?j:l,h=(0,D.Mq)(h),l=(0,D.Mq)(l),h=window.Math.atan2(l.y-h.y,l.x-h.x),h=0>h?h+2*window.Math.PI:h;g.M2=h;l=g=f;h=this.GD(l.pd?l.pd():l.getData().pd());l=this.GD(l.nc?l.nc():l.getData().nc());h=(0,D.Mq)(h);l=(0,D.Mq)(l);g.aE=window.Math.sqrt(window.Math.pow(l.x-h.x,2)+window.Math.pow(l.y-h.y,
2));f.mN=a==this.GD(f.nc?f.nc():f.getData().nc())?1:0}d.sort(function(a,b){var c=a.M2,d=b.M2,e=-1;!(0,D.Nq)(c,d)&&c>d?e=1:(0,D.Nq)(c,d)&&(a.aE>b.aE?e=1:b.aE==a.aE&&a.mN>b.mN?e=1:b.aE==a.aE&&a.mN==b.mN&&(e=0));return e});for(a=0;a<d.length;a++)e=d[a],e.M2=D.i,e.aE=D.i,e.mN=D.i;c=40==c.keyCode?D.k:D.p;for(e=a=0;e<d.length;e++)if(d[e]===b){a=c?e==d.length-1?0:e+1:0==e?d.length-1:e-1;break}return d[a]};D.x.GD=(0,D.ba)(D.o);D.Mq=function(a){a=a.Ze();return new D.H(a.x+a.e/2,a.y+a.g/2)};
D.Nq=function(a,b){var c=1E-7>=window.Math.abs(a-b);c||(c=1E-7>=window.Math.abs(2*window.Math.PI+window.Math.min(a,b)-window.Math.max(a,b)));return c};
D.Oq=function(a,b,c){this.Init(a,b,c)};D.y.q(D.Oq,D.C,"DvtBaseDiagramLink");D.x=D.Oq.prototype;D.x.Init=function(a,b,c){D.Oq.u.Init.call(this,a,D.o,b);this.v=c;this.my;this.Hh;this.bx;this.Ta;this.SO;this.$i;this.Yh;this.He=D.p;this.WF=D.k;this.J;this.tg;this.Ag};D.x.ma=(0,D.w)("v");D.x.yS=(0,D.s)();D.x.cp=(0,D.ba)(D.o);D.x.FS=(0,D.s)();D.x.zIa=(0,D.w)("Ag");(0,D.ca)("DvtBaseDiagramLink.prototype.getStartConnector",D.Oq.prototype.zIa);D.Oq.prototype.rHa=(0,D.w)("tg");
(0,D.ca)("DvtBaseDiagramLink.prototype.getEndConnector",D.Oq.prototype.rHa);D.x=D.Oq.prototype;D.x.Ov=(0,D.v)("J");D.x.yb=(0,D.w)("J");D.x.Iv=function(a){this.$i=a;var b=this.Ta,c=this.Ad();this.Sd();b&&(a=(0,D.Pq)(c,a,this.Yh),b.Ga(a))};D.x.mv=(0,D.w)("$i");D.x.Tr=function(a){this.Yh=a;var b=this.Ta,c=this.Ad();this.Sd();b&&(a=(0,D.Pq)(c,this.$i,a),b.Ga(a))};D.x.nv=(0,D.w)("Yh");D.x.Ad=(0,D.w)("SO");D.x.Nd=function(a){if(a){this.SO=a;var b=this.Ta;this.Sd();b&&(a=(0,D.Pq)(a,this.$i,this.Yh),b.Ga(a))}};
D.x.Sd=(0,D.ba)(D.o);D.x.qo=(0,D.s)();D.x.qR=(0,D.ba)(0);D.x.$Q=(0,D.ba)(0);D.x.rg=(0,D.v)("WF");D.x.bb=function(){return this.ma().Aq()&&this.WF};D.x.Ha=(0,D.w)("He");(0,D.ca)("DvtBaseDiagramLink.prototype.isSelected",D.Oq.prototype.Ha);D.x=D.Oq.prototype;D.x.zb=(0,D.v)("He");D.x.uD=(0,D.s)();D.x.Cx=(0,D.ba)(D.p);D.x.qD=(0,D.s)();D.x.ov=(0,D.ba)(1);(0,D.ca)("DvtBaseDiagramLink.prototype.getLinkWidth",D.Oq.prototype.ov);D.x=D.Oq.prototype;D.x.eM=(0,D.s)();D.x.EG=(0,D.ba)("solid");D.x.dM=(0,D.s)();
D.x.Sz=(0,D.ba)(D.o);D.x.$o=(0,D.ba)(D.o);D.x.tda=function(){return this.EG()};D.x.CD=function(){return this.ov()};D.x.sda=function(){return this.Sz()};D.Rq=function(a,b,c,d,e){if(c||e){var f;e||(f=a.J.Cc().ia(),f.Uk(0),f.Zc=D.p);if(c=D.Qq.Kca(a.j(),c,e,f,a))a.J.k(c),D.Qq.cI(c,0,e,b,d);return c}};
D.Oq.prototype.Ec=function(a){this.my=a;D.zq.BT(a)?(this.bx=a,this.Hh=D.zq.Jca(a)):(this.Hh=a,this.bx=D.zq.$S(a));this.J&&this.J instanceof D.Ei&&(this.J.po(this.bx),this.tg?D.Qq.cI(this.tg,this.cp(),this.$o(D.Qq.DH),this.Hh,1):this.tg=(0,D.Rq)(this,this.Hh,this.cp(),1,this.$o(D.Qq.DH)),this.Ag?D.Qq.cI(this.Ag,this.wq(),this.$o(D.Qq.ZH),this.Hh,0):this.Ag=(0,D.Rq)(this,this.Hh,this.wq(),0,this.$o(D.Qq.ZH)));var b=a=D.o;this.ne&&this.ne.tC instanceof D.Ei&&this.ne.tC.po(this.bx);this.ne&&(a=this.ne.pt)&&
D.Qq.cI(a,this.wq(),this.$o(D.Qq.ZH),this.Hh,0);this.ne&&(b=this.ne.ot)&&D.Qq.cI(b,this.cp(),this.$o(D.Qq.DH),this.Hh,1);this.ir&&this.ir.tC instanceof D.Ei&&this.ir.tC.po(this.bx);this.tK&&this.tK.Mi((0,D.Sq)(this));this.UI&&this.UI.Mi((0,D.Tq)(this))};D.Oq.prototype.Ab=(0,D.w)("my");D.Sq=function(a){return!a.Hh?D.o:new D.H(a.Hh[0],a.Hh[1])};D.Tq=function(a){if(!a.Hh)return D.o;var b=a.Hh.length;return new D.H(a.Hh[b-2],a.Hh[b-1])};
D.Pq=function(a,b,c){var d=new D.vk;b!=D.o&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d};D.Oq.prototype.xM=function(a,b,c){!b&&0!=b&&(b=1);!c&&0!=c&&(c=0);c=this.CD()+c;a=new D.Wg(a,b,c);return new D.Uq(this.j(),this.bx,a)};
D.Wq=function(a,b,c,d){b=a.xM(b,c,d);a.Ag&&a.wq()&&(c=a.wq(),d=(0,D.Vq)(b,a.Hh,c,a.$o(D.Qq.ZH),a,0),b.pt&&b.removeChild(b.pt),b.pt=d,b.r9=c,b.k(b.pt));a.tg&&a.cp()&&(c=a.cp(),a=(0,D.Vq)(b,a.Hh,c,a.$o(D.Qq.DH),a,1),b.ot&&b.removeChild(b.ot),b.ot=a,b.q9=c,b.k(b.ot));return b};D.Zq=function(a,b,c){a=a.tda();a=D.zq.Ica(a);b.Uk(a,D.zq.Eda(a,c),D.zq.Fda(a,c))};
D.$q=function(a,b){if(a){var c=D.o;b.Ib&&(c=b.Ib());if(c){var d=a.Cc()?a.Cc().ia():D.o,e=a.kc()?a.kc().ia():D.o;d&&d.Iq&&(d.Iq(c),a.ea(d));e&&e.Iq&&(e.Iq(c),a.O(e))}}};D.x=D.Oq.prototype;D.x.Td=(0,D.ba)(D.o);D.x.Ze=function(a){return this.I(a)};D.x.Ej=function(){return this.Fa()};D.x.ke=(0,D.s)();D.x.qc=(0,D.s)();D.x.Nc=(0,D.s)();D.x.Xc=(0,D.ba)(D.o);
D.ar=function(a,b,c){this.Init(a,b,c)};D.y.q(D.ar,D.C,"DvtBaseDiagramNode");D.x=D.ar.prototype;D.x.Init=function(a,b,c){D.ar.u.Init.call(this,a,D.o,b);this.v=c;this.He=this.ri=D.p;this.WF=D.k;this.Ta;this.SO;this.$i;this.Yh;this.Zm;this.xk};D.x.ma=(0,D.w)("v");D.x.getData=(0,D.ba)(D.o);D.x.Dg=function(){return this.Qf()};D.x.Qf=function(){return new D.B(0,0,this.getWidth(),this.getHeight())};D.x.Hi=function(){return{}};
D.x.Nd=function(a){if(a){this.SO=a;var b=this.Ta;this.Sd();b&&(a=(0,D.br)(a,this.$i,this.Yh),b.Ga(a))}};D.x.Ad=(0,D.w)("SO");D.x.Sd=(0,D.ba)(D.o);D.x.qo=(0,D.s)();D.x.fk=(0,D.ba)(D.o);D.x.lD=(0,D.s)();D.x.mb=(0,D.w)("ri");D.x.ef=(0,D.v)("ri");D.x.Ha=(0,D.w)("He");(0,D.ca)("DvtBaseDiagramNode.prototype.isSelected",D.ar.prototype.Ha);D.x=D.ar.prototype;D.x.zb=(0,D.v)("He");D.x.rg=(0,D.v)("WF");D.x.bb=function(){return this.ma().Aq()&&this.WF};D.x.AS=(0,D.v)("ge");D.x.VJa=(0,D.w)("ge");
D.x.Iv=function(a){this.$i=a;var b=this.Ta,c=this.Ad();this.Sd();b&&(a=(0,D.br)(c,a,this.Yh),b.Ga(a))};D.x.mv=(0,D.w)("$i");D.x.Tr=function(a){this.Yh=a;var b=this.Ta,c=this.Ad();this.Sd();b&&(a=(0,D.br)(c,this.$i,a),b.Ga(a))};D.x.nv=(0,D.w)("Yh");D.br=function(a,b,c){var d=new D.vk;b!=D.o&&(c&&d.translate(-c.x,-c.y),d.rotate(b),c&&d.translate(c.x,c.y));a&&d.translate(a.x,a.y);return d};D.x=D.ar.prototype;
D.x.ew=function(a,b,c){c?((0,D.S)(c,"typeNumber",this,this.V,this.K,a),(0,D.S)(c,"typeNumber",this,this.Q,this.W,b)):(0,D.N)(this,a,b)};D.x.Td=(0,D.ba)(D.o);D.x.Ze=function(a){var b=this.Qf(a);a=(0,D.Df)(this,new D.H(b.x,b.y));b=(0,D.Df)(this,new D.H(b.x+b.e,b.y+b.g));return new D.B(a.x,a.y,b.x-a.x,b.y-a.y)};D.x.Ej=function(){return this.Fa()};D.x.ke=(0,D.s)();D.x.qc=(0,D.s)();D.x.Nc=(0,D.s)();D.x.Xc=(0,D.ba)(D.o);D.cr=function(a,b){a.Zm||(a.Zm=[]);a.Zm.push(b)};
D.dr=function(a,b){a.xk||(a.xk=[]);a.xk.push(b)};
D.er=function(a,b,c){this.Init(a,b,c)};(0,D.ca)("DvtDiagram",D.er);D.y.q(D.er,D.qq,"DvtDiagram");D.er.prototype.Init=function(a,b,c){D.er.u.Init.call(this,a,b,c);this.If=new D.fr;this.Xa=new D.gr(a,this.ze,this);this.Xa.Ne(this);(0,D.Ze)()||(0,D.Yl)(this.Xa,new D.hr(this,this.Xa));this.pb={};this.Hm=[];this.Lc={};this.$t=[]};D.er.newInstance=function(a,b,c){return new D.er(a,b,c)};D.x=D.er.prototype;
D.x.VH=function(){!this.kr&&this.Ue&&("none"!=this.JI&&(this.Ym={id:this.getId(),getId:(0,D.w)("id"),options:this.A(),getOptions:(0,D.w)("options"),panZoomMatrix:this.fa.ga.Da(),getPanZoomMatrix:(0,D.w)("panZoomMatrix"),nodes:this.pb?(0,D.ir)(this):[],links:this.Lc?(0,D.jr)(this):[],getNodes:(0,D.w)("nodes"),getLinks:(0,D.w)("links")},this.Ym.A=this.Ym.getOptions,this.Ym.ZHa=this.Ym.getPanZoomMatrix,this.Ym.getId=this.Ym.getId,this.Ym.pqa=this.Ym.getNodes,this.Ym.Ypa=this.Ym.getLinks),this.Ue=D.p,
this.f2(),this.vP=this.fa)};D.x.f2=function(){this.ll=new D.C(this.j());this.$h=new D.C(this.j());this.nt=new D.C(this.j());this.pb={};this.Hm=[];this.Lc={};this.$t=[]};D.x.Xw=function(){this.Jf&&(this.removeChild(this.Jf),this.Jf.aa());this.Jf=D.o;this.kb&&(this.kb=D.o,this.Aa().Ne(this))};
D.x.xf=function(a,b){var c=new D.yo(this.j(),D.o,a.Pa()),d=b.ZHa(),e=this.fa.ga.Da();d.od(e)||(this.fa.ga.Ga(d),(0,D.S)(c.P,"typeMatrix",this.fa.ga,this.fa.ga.Da,this.fa.ga.Ga,e));(0,D.go)(a,b.pqa(),this.pb?(0,D.ir)(this):[]);(0,D.go)(a,b.Ypa(),this.Lc?(0,D.jr)(this):[]);a.add(c,1)};
D.x.Jp=function(a){var b=D.p;if(!this.Ue&&!this.kr){var c=this.A().nodes;if(c)for(var d=0;d<c.length;d++){var e=c[d],e=D.vm.Dd(e,this.A().styleDefaults.nodeDefaults),e=new D.kr(this.j(),this,e),f=e.getId();e.Haa()?this.Hm.push(f):(e.U(this.$h),this.Hm.push(f),this.pb[f]=e)}if(c=this.A().links)for(d=0;d<c.length;d++){var e=c[d],e=D.vm.Dd(e,this.A().styleDefaults.linkDefaults),g=new D.lr(this.j(),this,e),e=g.getId();g.Haa()?this.$t.push(e):(g.U(this.ll),this.$t.push(e),this.Lc[e]=g,f=this.R(g.pd()),
g=this.R(g.nc()),(0,D.cr)(f,e),(0,D.dr)(g,e))}b=0===window.Object.keys(this.pb).length;(0,D.dm)(this.j(),[this])}if(b)(0,D.mr)(this,a,b);else{this.k(this.vP);var h=this;this.Bq(a).then(function(){(0,D.mr)(h,a,b)},function(){h.removeChild(h.vP);h.vP=D.o;h.Ue=D.k})}};
D.mr=function(a,b,c){var d;if(!c){a.removeChild(a.vP);a.oz();a.pz();if(d=a.Ui==D.o)a.Ui=(0,D.Dq)(a,b,D.i,D.i);var e=a.fa;if(a.Ue){if(a.kr&&!a.Vm){var f=a.Sv(b,a.Ui);f||(f=(0,D.Dq)(a,D.i,D.i,D.i));!a.ct||!a.nx?(e.KN=D.k,e.ro(D.o,g),e.KN=a.nx):e.M9(D.o,f)}}else{a.Sv(b,a.Ui);if(!a.kr){var g=(f=a.Vm?D.k:D.p)?(0,D.Cq)(a):a.Ui;f&&(e.lq=0);e.ro(D.o,g)}e.Si=a.ct;e.yo=a.nx;e.KN=a.nx}}a.vP=D.o;a.Ue||(a.kb&&a.kb.stop(D.k),(0,D.$l)()&&a.eR()&&!a.Ym?a.kb=D.em.DC(a.j(),a.eR(),a,D.o,a.Pa()):"none"!=a.JI&&a.Ym&&
(a.Jf=new D.C(a.j(),"Delete Container"),a.k(a.Jf),e=new D.nr(a.j(),a.Jf,a.Ym,a),(0,D.go)(e,[a.Ym],[a]),a.kb=e.Er()),a.kb?(a.Aa().Vc(),a.Aa().qm(a),a.kb.je(a.Xw,a),a.kb.play()):a.Xw());a.Ue=D.k;(0,D.sq)(a,c);a.ct&&(c=a.Ui,c!=D.o&&(b=a.fa.rd(b),a.pM(c.x,c.y,c.e,c.g,b)));a.Vm=D.o;a.zJ=D.o;d&&(a.Ui=D.o)};D.x=D.er.prototype;
D.x.Od=function(a){D.er.u.Od.call(this,a);(0,D.or)(this,this.G);this.ct="none"!=this.G.panning;this.nx="none"!=this.G.zooming;this.VN="hidden";this.JI=this.G.animationOnDataChange;this.qW="auto"==this.G.animationOnDisplay?D.em.Qx:D.o;this.Nv(this.G.selectionMode);this.Py=this.G.emptyText?this.G.emptyText:(0,D.Zl)(this.G,"labelNoData","DvtUtilBundle","NO_DATA")};D.x.tx=function(){var a=this.A().maxZoom,a=(0,window.parseFloat)(a);return 0<a?a:1};
D.x.HC=function(){var a=this.A().minZoom;if(a){var b=(0,window.parseFloat)(a);0<b&&(a=window.Math.min(b,this.tx()));return a}return D.o};D.x.Pa=function(){return(0,D.jq)(this.A().styleDefaults.animationDuration)/1E3};D.x.ze=function(a){var b=a.$a();("categoryRollOver"==b||"categoryRollOut"==b)&&this.oz();a&&this.Wa(a)};
D.x.Bq=function(a){for(var b=this.A().layout,c=(0,D.vq)(this),d={},e=0;e<this.Hm.length;e++){var f=this.Hm[e];this.R(f)&&(d[f]=D.k,c.CQ(this.Ot(this.R(f))))}for(var g in this.Lc)if(e=this.$b(g)){var f=e.getData().startNode,h=e.getData().endNode;d[f]&&d[h]&&(0,D.pr)(c,this.BD(e,f,h))}if(b&&"function"==typeof b){var j=this;(b=b(c))||(b={then:function(a){a()}});this.K_(0);b.then(function(){j.K_(1);j.xH(c,a,D.k)},(0,D.s)());return b}this.ND("DvtDiagram: Layout function is not defined",1)};
D.x.K_=function(a){this.Ue||(this.ll.F(a),this.$h.F(a))};D.x.R=function(a){return this.pb[a]};D.x.$b=function(a){return this.Lc[a]};D.x.FH=(0,D.w)("$t");D.jr=function(a){var b=[],c;for(c in a.Lc)b.push(a.Lc[c]);return b};D.er.prototype.CA=(0,D.w)("Hm");D.ir=function(a){var b=[],c;for(c in a.pb)b.push(a.pb[c]);return b};D.x=D.er.prototype;
D.x.ih=function(a){D.er.u.ih.call(this,a);switch(a.oj()){case "adjustPanConstraints":if(this.ct){var b=a.Lu,c=this.Ui?this.Ui:(0,D.Dq)(this,a.P,D.i,D.i);this.pM(c.x,c.y,c.e,c.g,b)}break;case "zoomToFitCalcBounds":this.Vm||(c=this.Ui?this.Ui:(0,D.Dq)(this,a.P,D.i,D.i),a.lG=c);break;case "zoomed":if(this.A().zoomRenderer&&a.$B!==a.Lu)for(b in this.pb){var c=this.R(b),d=a;if(c.v.A().zoomRenderer){var e=(0,D.qr)(c,d.$B),d=(0,D.qr)(c,d.Lu);(0,D.rr)(c,c.v.A().zoomRenderer,d,e)}}}};D.x.$ra=(0,D.s)();
D.x.qL=function(a){var b=[],c;for(c in this.Lc){var d=this.$b(c),e=d.pd(),f=d.nc();(e==a||f==a)&&d.wb&&b.push(d)}return b};D.x.Lj=function(){return(0,D.M)("DvtUtilBundle","DIAGRAM")};D.x.pz=function(){if(this.G.selection&&this.Aq()){var a=[],b;for(b in this.pb)a.push(this.R(b));for(var c in this.Lc)a.push(this.$b(c));(0,D.Qm)(this.sh(),this.G.selection,a)}};
D.x.oz=function(){this.$y&&(this.yQ(D.p,this.$y),this.$y=D.o);var a=this.G.highlightedCategories;if(a){var b="any"==this.G.highlightMatch;this.$y={};var c=[],d;for(d in this.pb){var e=this.R(d),f=b?D.Ag.Yz(e.Xc(),a):D.Ag.BR(e.Xc(),a);f&&(this.$y[e.getId()]=e,c.push(e))}d=this.G.nodeHighlightMode;if("node"!=d){f="nodeAndIncomingLinks"==d||"nodeAndLinks"==d;d="nodeAndOutgoingLinks"==d||"nodeAndLinks"==d;for(var e=[],g=0;g<c.length;g++)for(var h=c[g],j=f&&h.xk?h.xk:[],j=d&&h.Zm?j.concat(h.Zm):j,h=0;h<
j.length;h++){var l=j[h];this.$y[l]=this.$b(l);e.push(this.$b(l))}(0,D.sr)(this,e)}var c=[],m;for(m in this.Lc)if(d=this.$b(m),f=b?D.Ag.Yz(d.Xc(),a):D.Ag.BR(d.Xc(),a))this.$y[d.getId()]=d,c.push(d);"linkAndNodes"==this.G.linkHighlightMode&&(0,D.sr)(this,c);this.yQ(D.k,this.$y)}};D.sr=function(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.pd(),d=d.nc();a.$y[e]=a.R(e);a.$y[d]=a.R(d)}};
D.er.prototype.yQ=function(a,b){var c=a?this.G.styleDefaults._highlightAlpha:1;this.ll.F(c);this.$h.F(c);for(var d in b)a?this.nt.k(b[d]):b[d]instanceof D.lr?this.ll.k(b[d]):b[d]instanceof D.kr&&this.$h.k(b[d])};D.er.prototype.pf=function(a){this.G.highlightedCategories=D.vm.ia(a);this.oz()};D.er.prototype.highlight=D.er.prototype.pf;D.er.prototype.select=function(a){this.G.selection=D.vm.ia(a);this.pz()};D.er.prototype.select=D.er.prototype.select;
D.er.prototype.Zf=function(){this.nk||(this.nk=new D.tr(this));return this.nk};D.er.prototype.getAutomation=D.er.prototype.Zf;D.er.prototype.ND=function(a,b){var c=this.A()._logger;if(c)switch(b){case 1:c.error&&c.error(a);break;case 2:c.warn&&c.warn(a);break;case 3:c.info&&c.info(a);break;default:c.log&&c.log(a)}};D.er.prototype.RL=function(a,b){var c=this.R(a);c&&c.RL(b)};D.er.prototype.processDefaultHoverEffect=D.er.prototype.RL;D.er.prototype.D_=function(a,b){var c=this.R(a);c&&c.D_(b)};
D.er.prototype.processDefaultSelectionEffect=D.er.prototype.D_;D.er.prototype.nS=function(a,b){var c=this.R(a);c&&c.nS(b)};D.er.prototype.processDefaultFocusEffect=D.er.prototype.nS;
D.vr=function(a,b){D.vr.u.constructor.call(this,a,b);this.O5=100;this.v=b};D.y.q(D.vr,D.wr,"DvtDiagramCategoryRolloverHandler");D.vr.prototype.W0=function(a){return D.y.Yf(this,function(){this.vI=D.k;this.v.ze(a)})};D.vr.prototype.V0=function(a){return D.y.Yf(this,function(){(0,D.xr)(this);this.v.ze(a)})};
D.fr=function(){this.Init({skyros:D.yr,alta:D.zr})};D.y.q(D.fr,D.Vk,"DvtDiagramDefaults");
D.yr={skin:"alta",emptyText:D.o,selectionMode:"none",animationOnDataChange:"none",animationOnDisplay:"none",maxZoom:1,highlightMatch:"all",nodeHighlightMode:"node",linkHighlightMode:"link",styleDefaults:{animationDuration:500,hoverBehaviorDelay:200,_highlightAlpha:0.1,nodeDefaults:{labelStyle:'font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold;font-size:12px;color:#383A47',hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",icon:{width:10,
height:10,fillPattern:"none",shape:"circle"}},linkDefaults:{startConnectorType:"none",endConnectorType:"none",width:1,style:"solid",hoverInnerColor:"rgb(255,255,255)",hoverOuterColor:"rgba(0,0,0, .3)",selectionColor:"rgb(0,0,0)",labelStyle:'font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;font-weight:bold;font-size:12px;color:#383A47',_hitDetectionOffset:4}}};D.zr={};
D.nr=function(a,b,c,d){this.Init(a,b,c,d)};D.y.q(D.nr,D.fo,"DvtDiagramDataAnimationHandler");D.nr.prototype.Init=function(a,b,c,d){D.nr.u.Init.call(this,a,b);this.bCa=c;this.fOa=d};D.nr.prototype.Pa=function(){return(0,D.jq)(this.bCa.A().styleDefaults.animationDuration)/1E3};
D.gr=function(a,b,c){this.Init(a,b,c);this.v=c};D.y.q(D.gr,D.Xk,"DvtDiagramEventManager");D.gr.prototype.Gp=function(a,b,c){var d=this.v.A();"dim"==d.hoverBehavior&&(b=b.Xc?b.Xc():[],d.highlightedCategories=c?b.slice():D.o,c=new D.Kn(c?"categoryRollOver":"categoryRollOut",d.highlightedCategories),b=(0,D.jq)(d.styleDefaults.hoverBehaviorDelay),this.PA.ze(c,(0,D.ir)(this.v),b,"any"==d.highlightMatch),a.stopPropagation())};D.gr.prototype.o0=function(a,b){return new D.vr(a,b)};
D.gr.prototype.rj=function(a){var b=D.k,c=a.keyCode,d=this.Jd(),e=d instanceof D.kr?d.uu:D.o;9!=c&&this.pw?(e.uc(a,D.i),a.preventDefault()):9==c&&e instanceof D.Fk?!a.shiftKey&&d.Nc()?(d.qc(),e.uc(a,D.i),a.preventDefault(),this.pw=D.k):(a.shiftKey&&this.pw?((0,D.Ar)(this,a,d),a.preventDefault()):(this.pw&&d.ke(),b=D.gr.u.rj.call(this,a)),this.pw=D.p):b=D.gr.u.rj.call(this,a);return b};
D.hr=function(a,b){this.Init(a,b)};D.y.q(D.hr,D.Kq,"DvtDiagramKeyboardHandler");D.hr.prototype.Rg=function(a){var b=D.p;switch(a.keyCode){case 188:case 190:b=a.altKey?D.k:D.p;break;default:b=D.hr.u.Rg.call(this,a)}return b};D.hr.prototype.Gj=function(a){if(9==a.keyCode){var b=this.xa.Jd();if(b)return(0,D.ji)(a),b;b=(0,D.ir)(this.ma());if(0<b.length)return(0,D.ji)(a),this.gL(b)}return D.hr.u.Gj.call(this,a)};D.hr.prototype.GD=function(a){return this.ma().R(a)};
D.xq={};D.y.q(D.xq,D.y,"DvtDiagramLayoutUtils");D.xq.cJa=function(a){for(var b=D.xq.IHa(a),c=window.Math.max(b.w,b.h),b=a.af(),d=a.gp(),e=window.Math.floor(window.Math.sqrt(b)),f=0,f=(f=a.Hi())&&f.padding?f.padding:0<d?c:0.25*c,c=c+f,d=-(window.Math.ceil(b/e)-1)*c/2,f=-(e-1)*c/2,g=0;g<b;g++)D.xq.uFa(a.JC(g),d+c*window.Math.floor(g/e),f+c*(g%e))};
D.xq.IHa=function(a){for(var b=a.af(),c=0,d=0,e=0;e<b;e++){var f=a.JC(e),g=f.Ce(),c=window.Math.max(g.w,c),d=window.Math.max(g.h,d);if(f=f.Sd())c=window.Math.max(f.w,c),d=window.Math.max(g.h+f.h,d)}return new D.uq(0,0,c,d)};D.xq.uFa=function(a,b,c){var d=a.Qf();a.Mi(new D.Br(b-d.x-0.5*d.w,c-d.y-0.5*d.h));D.xq.aLa(a)};D.xq.aLa=function(a){var b=a.Ce(),c=a.$f(),d=a.Sd();d&&a.Nd(new D.Br(b.x+c.x+0.5*(b.w-d.w),b.y+c.y+b.h))};D.xq.MY=function(a){return a===D.i||a==D.o?D.o:new D.uq(a.x,a.y,a.e,a.g)};
D.xq.Foa=function(a){return a===D.i||a==D.o?D.o:new D.Br(a.x,a.y)};D.xq.zFa=function(a){return a?new D.B(a.x,a.y,a.w,a.h):D.o};D.xq.Eoa=function(a){return a?new D.H(a.x,a.y):D.o};
D.lr=function(a,b,c){this.Init(a,b,c)};D.y.q(D.lr,D.Oq,"DvtDiagramLink");D.x=D.lr.prototype;D.x.Init=function(a,b,c){D.lr.u.Init.call(this,a,c.id,b);this.va=c;this.v.Aq()&&this.setCursor("pointer")};D.x.getData=(0,D.w)("va");D.x.getId=function(){return this.getData().id};D.x.pd=function(){return this.getData().startNode};D.x.nc=function(){return this.getData().endNode};D.x.Sd=function(){var a=D.o;this.Ta&&(a=this.Ta.I());return a};D.x.EG=function(){return this.getData().style};D.x.ov=function(){return this.getData().width};
D.x.Sz=function(){return this.getData().color};D.x.wq=function(){return this.getData().startConnectorType};D.x.cp=function(){return this.getData().endConnectorType};D.x.qR=function(){if(this.wq()){var a=this.yb().Cc().ia();a.Uk(0);return D.Qq.hT(D.o,this.wq(),D.o,a,this)}return 0};D.x.$Q=function(){if(this.cp()){var a=this.yb().Cc().ia();a.Uk(0);return D.Qq.hT(D.o,this.cp(),D.o,a,this)}return 0};
D.x.U=function(a){var b=this.getData(),c=this.bx;c||(c=["M",0,0,"L",0,0]);var d=b.id,e=b.color,f=b.width,g=b.style;this.ir=this.xM("#000000",0,b._hitDetectionOffset);this.k(this.ir);b=new D.Wg(e,1,f);(0,D.Ze)()&&((0,D.Cr)()&&1==(0,D.Yo)())&&(b.Zc=D.k);g=D.zq.Ica(g);b.Uk(g,D.zq.Eda(g),D.zq.Fda(g));c=new D.Ei(this.j(),c,d);c.O(D.o);c.ea(b);this.Ov(c);this.k(c);b=this.v;c=this.getData();d=(0,D.F)(b.j())?"right":"left";c.label&&(g=c.labelStyle,b=new D.lg(b.j(),c.label,0,0),b.Na(new D.I(g)),b.Hv(d),b.uA("top"),
c=(0,D.Dr)((new D.I(c.labelStyle)).getWidth()),0<c&&D.yf.wc(b,c,window.Infinity,this)||this.k(b),this.Ta=b);a.k(this);this.xd("img");this.Nl();this.v.Aa().Ba(this,this)};D.x.zb=function(a){D.lr.u.zb.call(this,a);a?this.$u(this.Zp,D.k):this.Zy();this.Nl()};D.x.bb=function(){return this.ma().Aq()&&"off"!=this.getData().selectable};
D.x.$u=function(a,b){if(a){this.ci||(this.ci=this.yb().Cc());var c=this.yb().Cc().ia();c.Iq&&c.Iq(this.getData().hoverInnerColor);this.yb().ea(c);(0,D.$q)(this.Ag,c);(0,D.$q)(this.tg,c)}else this.ci&&(this.yb().ea(this.ci),(0,D.$q)(this.Ag,this.ci),(0,D.$q)(this.tg,this.ci),this.ci=D.o);this.ne||(this.ne=(0,D.Wq)(this,"#000000",1,0),this.Ua(this.ne,0));var c=b?this.getData().selectionColor:this.getData().hoverOuterColor,d=this.ne.Cc().ia();d.Iq(c);d.sa(2+this.CD());(0,D.Zq)(this,d,D.k);this.ne.ea(d,
2)};D.x.Zy=function(){this.ci&&(this.yb().ea(this.ci),(0,D.$q)(this.Ag,this.ci),(0,D.$q)(this.tg,this.ci),this.ci=D.o);this.ne&&(this.removeChild(this.ne),this.ne.aa&&this.ne.aa(),this.ne=D.o)};D.x.Sb=function(){this.Zp||(this.Zp=D.k,this.$u(D.k,this.Ha()))};D.x.Jb=function(){this.Ha()?this.$u(D.p,D.k):this.Zy();this.Zp=D.p};D.x.Pe=function(){var a=this.ma().A().tooltip;return a?(0,D.kq)(this.ma().j().qd(),a,this.kv()):this.fd()};D.x.fd=function(){return this.getData().shortDesc};
D.x.kv=function(){return{id:this.getId(),type:"link",label:this.getData().label}};D.x.mc=function(){var a=[];this.bb()&&a.push((0,D.M)("DvtUtilBundle",this.Ha()?"STATE_SELECTED":"STATE_UNSELECTED"));return(0,D.ql)(this.fd(),a)};D.x.Nl=function(){if(!(0,D.Cf)()){var a=this.mc();a&&this.Wb("label",a)}};
D.x.Td=function(a){if(32==a.keyCode&&a.ctrlKey)return this;if(38==a.keyCode||40==a.keyCode){var b=this.uJ;b||(b=this.ma().R((0,D.Er)(this.ma(),this)));var c=this,d=this.ma().qL(b.getId()),e;(e=this.ma().Aa().yh)&&e.wZ&&(c=e.wZ(b,this,a,d));c.uJ=b;return c}return 39==a.keyCode||37==a.keyCode?(a=this.aX(a.keyCode)?this.pd():this.nc(),this.ma().R(a)):D.o};D.x.aX=function(a){var b=(0,D.Sq)(this),c=(0,D.Tq)(this),b=b.x<c.x?D.k:D.p;return 39==a&&b||37==a&&!b?D.p:D.k};D.x.ke=function(){this.Ub=D.k;this.Sb()};
D.x.qc=function(){this.Ub=D.p;this.Jb()};D.x.Nc=(0,D.w)("Ub");D.x.Xc=function(){return this.getData().categories?this.getData().categories:[this.getId()]};D.x.Haa=function(){var a=this.ma().A().hiddenCategories;return a&&D.Ag.Yz(a,this.Xc())||!this.ma().R(this.pd())||!this.ma().R(this.nc())?D.k:D.p};
D.x.xf=function(a,b){var c=b.Ab(),d=this.Ab(),e=new D.yo(this.j(),D.o,a.Pa());D.Ag.od(c,d)||(this.Ec(c),c="typePolyline",0<d.length&&(0,window.isNaN)(d[0])&&(c="typePath"),(0,D.S)(e.P,c,this,this.Ab,this.Ec,d));b.Ta&&this.Ta&&(d=b.Ta.Da(),c=this.Ta.Da(),d.od(c)||(this.Ta.Ga(d),(0,D.S)(e.P,"typeMatrix",this.Ta,this.Ta.Da,this.Ta.Ga,c)));if(b.yb()&&this.yb()&&(d=b.yb().Cc(),c=this.yb().Cc(),d&&c&&d instanceof D.Wg&&c instanceof D.Wg&&(d.Ib()!=c.Ib()||d.getWidth()!=c.getWidth())))this.yb().ea(d),(0,D.S)(e.P,
"typeStroke",this.yb(),this.yb().Cc,this.yb().ea,c);a.add(e,1)};D.x.Nh=function(a){this.ma().ll.k(this);var b=this,c=new D.Ao(this.j(),this,a.Pa());(0,D.im)(c,function(){b.getParent().removeChild(b);b.aa()});a.add(c,0)};D.x.Pg=function(a){this.F(0);a.add(new D.io(this.j(),this,a.Pa()),2)};D.x.Hi=function(){return this.getData()};
D.Qq={};D.y.q(D.Qq,D.y,"DvtDiagramLinkConnectorUtils");D.Qq.DH="endConnector";D.Qq.ZH="startConnector";D.Qq.Bca="arrowOpen";D.Qq.WS="arrow";D.Qq.XS="arrowConcave";D.Qq.Dca="rectangle";D.Qq.Eca="rectangleRounded";D.Qq.Cca="circle";
D.Qq.Kca=function(a,b,c,d,e){if(c)return D.Qq.Wsa(c,e);c=e.CD();switch(b){case D.Qq.WS:return D.Qq.Xsa(a,c,e.Sz());case D.Qq.XS:return D.Qq.Ysa(a,c,e.Sz());case D.Qq.Bca:return D.Qq.$sa(a,c,d);case D.Qq.Cca:return D.Qq.Vsa(a,c,d);case D.Qq.Dca:return D.Qq.Pca(a,c,d);case D.Qq.Eca:return D.Qq.dta(a,c,d)}return D.o};D.Qq.cI=function(a,b,c,d,e){b=D.Qq.Osa(a,c,d,e);a.Ga(b)};
D.Qq.Osa=function(a,b,c,d){var e=-1,f=0,g=0,h=0;c&&(f=c.length,1===d?(2<=f&&(g=c[f-2],h=c[f-1]),4<=f?(e=c[f-4],f=c[f-3]):(e=g-1E-4,f=h)):(2<=f&&(g=c[0],h=c[1]),4<=f?(e=c[2],f=c[3]):(e=g+1E-4,f=h)));c=g;d=h;e=D.Qq.Nsa(e,f,g,h);g=a.Uya;g||(g=a.Da().ia(),a.Uya=g);h=new D.vk;b&&(b=D.Qq.bja(a),f=a.Jc(),a=a.Kc(),h.translate(-0.5*b.e*f,-0.5*b.g*a));h.rotate(e);h.translate(c,d);h.concat(g);return h};D.Qq.bja=function(a){var b=a.Jya;b||(b=a.I(),a.Jya=b);return b};
D.Qq.Nsa=function(a,b,c,d){return window.Math.atan2(d-b,c-a)};D.Qq.Ysa=function(a,b,c){b=6*D.Qq.bW(b);var d=0.8*b;a=new D.cp(a,[-0.22*b,-0.5*d,0.78*b,0,-0.22*b,0.5*d,0,0]);a.ra(c);return a};D.Qq.Xsa=function(a,b,c){b=5*D.Qq.bW(b);var d=0.8*b;a=new D.cp(a,[0,-0.5*d,b,0,0,0.5*d]);a.ra(c);return a};D.Qq.bW=function(a){if(1>=a)return a;a=0.5*(a-1);return 1+a};
D.Qq.$sa=function(a,b,c){b*=3;var d=c.getWidth();a=new D.yp(a,[-b+d*window.Math.sqrt(2)/2,-b,d*window.Math.sqrt(2)/2,0,-b+d*window.Math.sqrt(2)/2,b]);a.ea(c);a.O(D.o);return a};D.Qq.Dpa=function(a){return 2*a};D.Qq.wqa=function(a){return 3*a};D.Qq.Vsa=function(a,b,c){b=D.Qq.Dpa(b);a=new D.dp(a,b,0,b);a.ea(c);a.O(D.o);return a};D.Qq.Pca=function(a,b,c){b=D.Qq.wqa(b);a=new D.D(a,0,-b/2,b,b);a.ea(c);a.O(D.o);return a};D.Qq.dta=function(a,b,c){a=D.Qq.Pca(a,b,c);(0,D.Fr)(a,b);return a};
D.Qq.Wsa=function(a,b){var c=(0,D.nj)(b.ma()),d=b.getData().il;c.dr=d;d=b.MQ;c.rB=b;c.qB=d;d=b.yL();c.kt=d;return D.Fe.hH(c,a,b)};D.Qq.hT=function(a,b,c,d,e){if(c)return b=D.Qq.bja(a),a=a.Jc(),0.5*b.e*a;a=e.CD();d=d.getWidth();switch(b){case D.Qq.Bca:return d*window.Math.sqrt(2);case D.Qq.WS:return b=D.Qq.bW(a),5*b;case D.Qq.XS:return b=D.Qq.bW(a),0.78*6*b;case D.Qq.Cca:return 2*D.Qq.Dpa(d)+d/2;case D.Qq.Dca:case D.Qq.Eca:return D.Qq.wqa(d)+d/2;default:return 0}};
D.Uq=function(a,b,c){D.Uq.u.Init.call(this,a);this.Init(a,b,c)};D.y.q(D.Uq,D.C,"DvtDiagramLinkUnderlay");D.Uq.prototype.Init=function(a,b,c){b||(b=["M",0,0,"L",1,0]);this.Sn=c;this.Sn||(this.Sn=new D.Wg("#ffffff",1,1));this.tC=new D.Ei(a,b);this.tC.ea(c);this.tC.O(D.o);this.k(this.tC);this.q9=this.ot=this.r9=this.pt=D.o};D.Vq=function(a,b,c,d,e,f){a=D.Qq.Kca(a.j(),c,d,a.Sn,e);D.Qq.cI(a,0,d,b,f);return a};
D.Uq.prototype.ea=function(a,b){this.Sn=a;(0,D.Ze)()&&((0,D.Cr)()&&1==(0,D.Yo)())&&(a.Zc=D.k);this.tC.ea(a);if(this.pt){var c=a.ia();c.Uk(0);c.Zc=D.p;if(this.r9==D.Qq.WS||this.r9==D.Qq.XS)c.sa(b),this.pt.ra(a.Ib());this.pt.ea(c)}if(this.ot){c=a.ia();c.Uk(0);c.Zc=D.p;if(this.q9==D.Qq.WS||this.q9==D.Qq.XS)c.sa(b),this.ot.ra(a.Ib());this.ot.ea(c)}};D.Uq.prototype.Cc=(0,D.w)("Sn");
D.zq={};D.y.q(D.zq,D.y,"DvtDiagramLinkUtils");D.zq.Ica=function(a){var b=0;switch(a){case "dash":b=1;break;case "dot":b=2;break;case "dashDot":b=3}return b};D.zq.Eda=function(a,b){if(0==a)return D.o;if(1==a)return b?"8,2":"6,4";if(2==a)return b?"4,1":"2,3";if(3==a)return b?"10,1,4,1":"8,3,2,3"};D.zq.Fda=function(a,b){return b&&0!=a?1:D.o};D.zq.$S=function(a){var b=[];if(a)for(var c=0;c<a.length;c+=2)0==c?b.push("M"):b.push("L"),b.push(a[c]),b.push(a[c+1]);return b};
D.zq.Jca=function(a){var b=[];if(a)for(var c=0;c<a.length;c++)(0,window.isNaN)(a[c])||b.push(a[c]);return b};D.zq.BT=function(a){return a&&0<a.length?(0,window.isNaN)(a[0]):D.p};D.zq.P0=function(a){var b=[];a=D.zq.BT(a)?D.zq.Jca(a):a;for(var c=0;c<a.length;c+=2)b.push(new D.H(a[c],a[c+1]));return b};
D.kr=function(a,b,c){this.Init(a,b,c)};D.y.q(D.kr,D.ar,"DvtDiagramNode");D.x=D.kr.prototype;D.x.Init=function(a,b,c){D.kr.u.Init.call(this,a,c.id,b);this.va=c;this.v.Aq()&&this.setCursor("pointer")};D.x.getData=(0,D.w)("va");D.x.getId=function(){return this.va.id};D.x.Qf=(0,D.w)("EI");D.x.Sd=function(){var a=D.o;this.Ta&&(a=this.Lw?this.Lw:this.Ta.I());return a};
D.x.zb=function(a){var b=(0,D.qr)(this);D.kr.u.zb.call(this,a);this.v.A().selectionRenderer?(0,D.rr)(this,this.v.A().selectionRenderer,(0,D.qr)(this),b):this.D_(a);this.Nl()};D.x.D_=function(a){this.ho()&&this.ho().zb(a)};D.x.bb=function(){return this.ma().Aq()&&"off"!=this.getData().selectable};D.x.EM=(0,D.w)("J");
D.x.U=function(a){if(this.v.A().renderer)(0,D.rr)(this,this.v.A().renderer,(0,D.qr)(this),D.o);else{var b=this.getData(),c=this.v,d=new D.I(b.backgroundStyle);if(!(0,D.wg)(d)){var e=(0,D.Dr)(d.D("width")),f=(0,D.Dr)(d.D("height")),g=d.D("background-color"),h=d.D("border-color"),j=(0,D.Dr)(d.D("border-width")),d=(0,D.Dr)(d.D("border-radius")),c=new D.D(c.j(),0,0,e,f);c.ra(g);d&&(c.Hf(d),c.Sf(d));h&&c.ea(new D.Wg(h,1,j));this.k(c);this.oH(c);this.hb=c}g=this.v;if(h=b.icon){c=h.width;e=h.height;j=h.color;
g=h.source?new D.Gr(g.j(),c/2,e/2,c,e,h.source,h.sourceSelected,h.sourceHover,h.sourceHoverSelected):new D.po(g.j(),h.shape,"alta",c/2,e/2,c,e);"none"!=h.fillPattern?g.O(new D.ci(h.fillPattern,j,j)):g.ra(j);h.borderColor&&g.ea(new D.Wg(h.borderColor,h.borderWidth));this.k(g);this.J=g;if(this.hb){var h=b.icon,j=this.hb.getWidth(),c=this.hb.getHeight(),e=h.width,f=h.height,d=0.5*(j-e),l=0.5*(c-f);if(h.positionX!==D.i)d=(0,window.parseFloat)(h.positionX),(0,D.F)(this.j())&&(d=j-d-e);else{var m=h.halign;
"start"==m?m=(0,D.F)(this.j())?"right":"left":"end"==m&&(m=(0,D.F)(this.j())?"left":"right");d="left"==m?0:"right"==m?j-e:d}h.positionY!==D.i?l=(0,window.parseFloat)(h.positionY):"top"==h.valign?l=0:"bottom"==h.valign&&(l=c-f);(0,D.N)(this.J,d,l)}this.hb||this.oH(g)}j=this.v;g=(0,D.F)(j.j())?"right":"left";b.label&&(h=b.labelStyle,j=new D.lg(j.j(),b.label,0,0),j.Na(new D.I(h)),j.Hv(g),j.uA("top"),g=(0,D.Dr)((new D.I(b.labelStyle)).getWidth()),0<g&&D.yf.wc(j,g,window.Infinity,this)||this.k(j),this.Ta=
j);(0,D.Hr)(this.ho(),b)}a.k(this);a=D.o;this.uu?(b=this.I())&&(a=new D.B(b.x,b.y,b.e-b.x,b.g-b.y)):(a=this.hb?this.hb.DD(this):D.o)&&this.J?a=(0,D.Kp)(a,this.J.DD(this)):!a&&this.J&&(a=this.J.DD(this));this.EI=a;this.xd("img");this.Nl();this.v.Aa().Ba(this,this)};
D.rr=function(a,b,c,d){var e=a.v.A()._contextHandler;if(e){var f=a.getData();c=e(a.Fa(),a.uu,f,c,d);b=b(c);a.uu&&b!=a.uu&&(a.uu.namespaceURI===D.G.bN?(0,D.Ir)(a).removeChild(a.uu):a.removeChild(b),a.uu=D.o);b&&b.namespaceURI===D.G.bN?a.uu||(D.G.Ic((0,D.Ir)(a),b),a.uu=b):b instanceof D.Fk?a.uu||(a.k(b),a.uu=b):b&&a.v.ND("DvtDiagram: could not add custom node content for the node "+a.getId()+b,1)}else a.v.ND("DvtDiagram: could not add custom node content - context handler is undefined",1)};
D.Hr=function(a,b){var c=b.hoverInnerColor,d=b.hoverOuterColor,e=b.selectionColor,f=new D.Wg(c,1,4);f.Zc=D.k;d=new D.Wg(d,1,8);d.Zc=D.k;var g=new D.Wg(e,1,2);g.Zc=D.k;var h=new D.Wg(e,1,4);h.Zc=D.k;c=new D.Wg(c,1,4);c.Zc=D.k;e=new D.Wg(e,1,8);e.Zc=D.k;a.Jq(f,d).Kq(g,h).Ur(c,e)};D.x=D.kr.prototype;D.x.oH=(0,D.v)("XF");D.x.ho=function(){if(!this.XF&&this.EI){var a=new D.D(this.v.j(),this.EI.x,this.EI.y,this.EI.e,this.EI.g);(0,D.Aj)(a);this.oH(a);this.Ua(a,0);(0,D.Hr)(a,this.getData());this.XF=a}return this.XF};
D.x.Sb=function(){var a=(0,D.qr)(this);this.Zp=D.k;this.v.A().hoverRenderer?(0,D.rr)(this,this.v.A().hoverRenderer,(0,D.qr)(this),a):this.RL(D.k)};D.x.Jb=function(){var a=(0,D.qr)(this);this.Zp=D.p;this.v.A().hoverRenderer?(0,D.rr)(this,this.v.A().hoverRenderer,(0,D.qr)(this),a):this.RL(D.p)};D.x.RL=function(a){this.ho()&&(a?this.ho().Sb():this.ho().Jb())};D.x.Pe=function(){var a=this.ma().A().tooltip;return a?(0,D.kq)(this.ma().j().qd(),a,this.kv()):this.fd()};D.x.fd=function(){return this.getData().shortDesc};
D.x.kv=function(){return{id:this.getId(),type:"node",label:this.getData().label}};D.x.mc=function(){var a=[];this.bb()&&a.push((0,D.M)("DvtUtilBundle",this.Ha()?"STATE_SELECTED":"STATE_UNSELECTED"));return(0,D.ql)(this.fd(),a)};D.x.Nl=function(){if(!(0,D.Cf)()){var a=this.mc();a&&this.Wb("label",a)}};
D.x.Td=function(a){var b=D.o;if(32==a.keyCode&&a.ctrlKey)b=this;else if(a.altKey){var c=this.ma().qL(this.getId()),d;(d=this.ma().Aa().yh)&&d.fZ&&(b=d.fZ(this,a,c));b?b.uJ=this:b=this}else b=(0,D.ir)(this.ma()),b=(0,D.Vn)(this,a,b);return b};D.x.ke=function(){var a=(0,D.qr)(this);this.Ub=D.k;this.v.A().focusRenderer?(0,D.rr)(this,this.v.A().focusRenderer,(0,D.qr)(this),a):this.nS(D.k)};
D.x.qc=function(){this.Nc()&&((0,D.qr)(this),this.Ub=D.p,this.v.A().focusRenderer?(0,D.rr)(this,this.v.A().focusRenderer,this.getData(),(0,D.qr)(this)):this.nS(D.p))};D.x.nS=function(a){this.RL(a)};D.x.Nc=(0,D.w)("Ub");D.x.Xc=function(){return this.getData().categories?this.getData().categories:[this.getId()]};D.x.Haa=function(){var a=this.ma().A().hiddenCategories;return a&&D.Ag.Yz(a,this.Xc())?D.k:D.p};
D.x.xf=function(a,b){var c=new D.yo(this.j(),D.o,a.Pa()),d=b.V(),e=b.Q(),f=this.V(),g=this.Q();d!=f&&(this.K(d),(0,D.S)(c.P,"typeNumber",this,this.V,this.K,f));e!=g&&(this.W(e),(0,D.S)(c.P,"typeNumber",this,this.Q,this.W,g));b.J&&this.J&&((0,D.S)(c.P,"typeRectangle",this.J,this.J.wt,this.J.rA,this.J.wt()),this.J.rA(b.J.wt()));b.Ta&&this.Ta&&(d=b.Ta.Da(),e=this.Ta.Da(),d.od(e)||(this.Ta.Ga(d),(0,D.S)(c.P,"typeMatrix",this.Ta,this.Ta.Da,this.Ta.Ga,e)));(0,D.Jr)(c,b.hb,this.hb);(0,D.Jr)(c,b.J,this.J);
a.add(c,1)};D.Jr=function(a,b,c){b&&c&&((0,D.S)(a.P,"typeFill",c,c.kc,c.O,c.kc()),c.O(b.kc()))};D.kr.prototype.Nh=function(a){this.ma().$h.k(this);var b=this,c=new D.Ao(this.j(),this,a.Pa());(0,D.im)(c,function(){b.getParent().removeChild(b);b.aa()});a.add(c,0)};D.kr.prototype.Pg=function(a){this.F(0);a.add(new D.io(this.j(),this,a.Pa()),2)};D.kr.prototype.Hi=function(){return this.getData()};D.qr=function(a,b){return{hovered:a.Zp,selected:a.Ha(),focused:a.Ub,zoom:b?b:a.ma().fa.rd()}};
D.tr=function(a){this.Init(a)};(0,D.ca)("DvtDiagramAutomation",D.tr);D.y.q(D.tr,D.Nk,"DvtDiagramAutomation");D.tr.prototype.Init=(0,D.v)("v");D.tr.prototype.Jl=function(a){return(a=this.v.Aa().za(a))&&a instanceof D.kr?"node["+this.v.CA().indexOf(a.getId())+"]":a&&a instanceof D.lr?"link["+this.v.FH().indexOf(a.getId())+"]":D.o};D.tr.prototype.Cg=function(a){var b=this.PF(a);a=b.component;var b=b.index,c=D.o;"node"==a?c=this.Eh(b):"link"==a&&(c=(0,D.ur)(this,b));return c?c.Fa():D.o};
D.tr.prototype.getDomElementForSubId=D.tr.prototype.Cg;D.tr.prototype.PF=function(a){var b=a,c=-1,d=a.substring(0,a.indexOf("["));d&&(b="node"==d||"link"==d?d:D.o,c=(0,window.parseInt)(a.substring(a.indexOf("[")+1,a.indexOf("]"))));return{component:b,index:c}};D.tr.prototype.af=function(){return this.v.af()};D.tr.prototype.getNodeCount=D.tr.prototype.af;D.tr.prototype.gp=function(){return this.v.gp()};D.tr.prototype.getLinkCount=D.tr.prototype.gp;
D.tr.prototype.lc=function(a){if(a=this.Eh(a)){var b={};b.id=a.getId();b.selected=a.Ha();b.tooltip=a.fd();b.label=a.getData().label;b.background=a.getData().backgroundStyle;b.icon=this.BO(a.EM());return b}return D.o};D.tr.prototype.getNode=D.tr.prototype.lc;
D.tr.prototype.lL=function(a){if(a=(0,D.ur)(this,a)){var b={};b.id=a.getId();b.selected=a.Ha();b.tooltip=a.fd();b.label=a.getData().label;b.color=a.Sz();b.width=a.ov();b.style=a.EG();b.startNode=a.pd();b.endNode=a.nc();b.startConnectorType=a.wq();b.endConnectorType=a.cp();return b}return D.o};D.tr.prototype.getLink=D.tr.prototype.lL;D.tr.prototype.BO=function(a){if(a){var b={};b.shape=a instanceof D.po?a.$a():"none";a.kc()&&(b.color=a.kc().Ib());return b}return D.o};
D.tr.prototype.Eh=function(a){var b=this.v.CA();return 0<=a&&a<b.length?this.v.R(b[a]):D.o};D.ur=function(a,b){var c=a.v.FH();return 0<=b&&b<c.length?a.v.$b(c[b]):D.o};
  return D;
});