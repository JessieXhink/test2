/**
 * Copyright (c) 2014, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(['./DvtToolkit', './DvtBaseTreeView'], function(dvt) {
  // Internal use only.  All APIs and functionality are subject to change at any time.
    // Map the D namespace to dvt, which is used to provide access across partitions.
  var D = dvt;
  D.rV=function(a,b,c){this.Init(a,b,c)};(0,D.ca)("DvtTreemap",D.rV);D.y.q(D.rV,D.wR,"DvtTreemap");D.rV.newInstance=function(a,b,c){return new D.rV(a,b,c)};D.x=D.rV.prototype;D.x.Init=function(a,b,c){D.rV.u.Init.call(this,a,b,c);this.If=new D.sV;this.setId("treemap1000"+window.Math.floor(1E9*window.Math.random()))};
D.x.mM=function(a){D.rV.u.mM.call(this,a);a=this.A();this.jf="sliceAndDiceHorizontal"==a.layout?new D.nV(D.k):"sliceAndDiceVertical"==a.layout?new D.nV(D.p):new D.oV;this.Gd=[];var b=a.isolatedNode;if(b&&this.Sa){var c=(0,D.aS)(this.Sa);c.push(this.Sa);for(var d=0;d<c.length;d++)if(c[d].getId()==b){this.Gd.push(c[d]);break}}"auto"==a.animationOnDisplay&&(a.animationOnDisplay="alphaFade")};
D.x.Ep=function(a){var b=window.Math.max(window.Math.ceil(7*window.Math.min(a.e,a.g)/400),2);a.x+=b;a.y+=b;a.e-=2*b;a.g-=2*b;b=this.jf.J$(this,1);a.x+=b;a.e-=2*b;(0,D.zR)(this,a);this.Hb=D.AR.U(this,a,this.OW);a.x-=b;a.e+=2*b;b=this.Gd.length;if(0<b&&this.GW)this.jf.Bq(this,this.Gd[b-1],a.x,a.y,a.e,a.g,D.k);else{this.Sa&&this.jf.Bq(this,this.Sa,a.x,a.y,a.e,a.g,D.p);for(var c=0;c<b;c++)this.jf.Bq(this,this.Gd[c],a.x,a.y,a.e,a.g,D.k)}};
D.x.sj=function(a){(0,D.CR)(this,a);this.Jm&&a.k(this.Jm);this.Hb&&(a.k(this.Hb),this.Hb=D.o);if((0,D.DR)(this)){this.I5=new D.C(this.j());a.k(this.I5);this.uBa?this.uBa.U(a):this.Sa.De()?(this.Sa.Lx(a),(0,D.FR)(this,this.Sa)):this.Sa.U(a);this.s6=new D.C(this.j());a.k(this.s6);this.hx=new D.C(this.j());a.k(this.hx);a.k(this.I5);this.GB=new D.yp(this.j(),[]);this.GB.xb(D.p);this.GB.ua(D.p);(0,D.Ij)(this.GB);a.k(this.GB);for(a=0;a<this.Gd.length;a++){var b=this.Gd[a].ya();this.s6.k(b)}}else(0,D.GR)(this,
a)};D.x.Rq=function(){this.a0||(this.da.Sk(),this.Ep(new D.B(0,0,this.fb,this.tb)),this.sj(this.da),this.e2());D.rV.u.Rq.call(this)};D.x.e2=function(){for(var a=this.fc?this.fc.getSelection():[],b=0;b<a.length;b++)if(0<this.Gd.length){var c=this.Gd[this.Gd.length-1];(a[b]==c||a[b].aA(c))&&a[b].zb(D.k)}else a[b].zb(D.k)};D.x.Uv=function(a){return new D.tV(a)};D.x.CH=function(a,b,c,d){return new D.uV(a,b,c,d)};
D.x.zda=function(a){var b=(0,D.vV)(this);return b?(0,D.wV)(this,D.$U.Tpa(b)):a?(0,D.wV)(this,D.$U.Tpa(a)):D.o};D.x.jU=function(a){for(var b=0,c=this.hx.Ma(),d=0;d<c;d++){var e=this.hx.na(d);a.zIndex>e.zIndex&&(b=d+1)}b<c?this.hx.Ua(a,b):this.hx.k(a)};D.vV=function(a){return a.Gd&&0<a.Gd.length?a.Gd[a.Gd.length-1]:D.o};
D.yV=function(a,b){if("none"!=a.A().animationOnDataChange){for(var c=a.fc?a.fc.getSelection():[],d=0;d<c.length;d++)c[d].zb(D.p);for(var c=[(0,D.xV)(b)],d=(0,D.aS)(b),e=0;e<d.length;e++)c.push((0,D.xV)(d[e]));a.zp=new D.wo(a.j(),c);a.zp.je(a.Rq,a);a.Xa.qm(a);a.zp.play()}else a.U(D.o,a.fb,a.tb,D.k)};D.wV=function(a,b){var c=a.Xa.yh;return c?c.gL(b):b&&0<b.length?b[0]:D.o};D.rV.prototype.Lj=function(){return(0,D.Zl)(this.A(),"componentName","DvtUtilBundle","TREEMAP")};D.rV.prototype.bZ=(0,D.ba)("DvtTreemapBundle");
D.rV.prototype.Ap=function(a){return new D.zV(this,a)};
D.zV=function(a,b){this.Init(a,b);var c=this.N.A(),d=c.nodeDefaults,e=d.header,f=b.header?b.header:{};this.IAa=b.groupLabelDisplay?b.groupLabelDisplay:d.groupLabelDisplay;this.lr=b.labelDisplay?b.labelDisplay:d.labelDisplay;this.vJ=b.labelHalign?b.labelHalign:d.labelHalign;this.y6=b.labelValign?b.labelValign:d.labelValign;this.bBa=f.labelHalign?f.labelHalign:e.labelHalign;this.Nja=f.labelStyle?new D.I(f.labelStyle):D.o;this.DU="on"==(f.useNodeColor?f.useNodeColor:e.useNodeColor);this.r6=f.isolate?
f.isolate:e.isolate;"auto"==this.r6&&(this.r6=(0,D.Ze)()?"off":"on");this.eu=c.isolatedNode!=D.o&&c.isolatedNode==this.getId()};D.y.q(D.zV,D.VR,"DvtTreemapNode");D.x=D.zV.prototype;
D.x.U=function(a){if(this.Yy){this.J=this.y4();a.k(this.J);var b;this.De()?(this.aV=new D.C(this.N.j()),this.J.k(this.aV),this.Lx(this.aV)):b=(0,D.WR)(this);if(b){var c=this.A()._cf,d=this.N.Rc;d.dr=c;var c=this.Ja-8-2,e=this.La-4-2;0<c&&0<e&&((0,D.bh)(d,c),(0,D.ch)(d,e),d.qf((0,D.XR)(this)),this.n4=b=D.Fe.hH(d,b,this.J),(0,D.F)(a.j())?(a=b.I(),a=this.Db+this.Ja-4-1-a.e):a=this.Db+4+1,(0,D.N)(b,a,this.Zb+2+1))}else this.Ob=this.YN(this.J),this.Ob!=D.o&&(this.xr&&"header"!=this.Bk)&&(a=this.Ob.Lb(),
this.Ar=new D.D(this.N.j(),a.x,a.y,a.e,a.g),this.Ar.ra("#FFFFFF"),this.Ar.ua(D.p),this.J.k(this.Ar),a=this.Ob,"node"==this.Bk&&this.De()?this.N.I5.k(a):this.J.k(a));this.De()?this.J.xd("group"):this.J.xd("img");this.Nl()}};
D.x.zb=function(a){D.zV.u.zb.call(this,a);if(this.J){a=this.N.A().nodeDefaults;var b=a.header;if(this.Ha()){var c=this.Db,d=this.Zb+1,e=this.Ja-1,f=this.La-1;(0,D.wk)()&&(d-=1);(0,D.CV)(this,this.Ih);(0,D.CV)(this,this.ix);this.ix=this.Ih=D.o;this.Ih=new D.D(this.N.j(),c,d,e,f);this.Ih.ua(D.p);this.Ih.O(D.o);(0,D.Ij)(this.Ih);this.J.k(this.Ih);this.ix=new D.D(this.N.j(),c+1,d+1,e-2,f-2);this.ix.ua(D.p);this.ix.O(D.o);(0,D.Ij)(this.ix);this.J.k(this.ix);"header"==this.Bk?(this.OM||this.Nc()?this.Xp.ra(b.hoverBackgroundColor):
(this.Xp.ra(b.selectedBackgroundColor),this.Ob&&(0,D.DV)(this,this.Ob,"_selectedLabelStyle")),this.Ih.Ya(b.selectedOuterColor),this.ix.Ya(b.selectedInnerColor),(0,D.Ze)()&&(this.Ve=(0,D.EV)(this,this.J))):(this.Ih.Ya(a.selectedOuterColor),this.ix.Ya(a.selectedInnerColor),!(0,D.Cr)()&&!(0,D.xk)()&&(0,D.Yp)(this.J,D.IR),this.N.jU(this.J))}else(0,D.CV)(this,this.ix),this.ix=D.o,(0,D.Ze)()&&(0,D.FV)(this),"header"==this.Bk?(this.OM||this.Nc()?this.Xp.ra(b.hoverBackgroundColor):((0,D.GV)(this,this.J,this.Xp),
this.Ob&&(this.Ft()?(0,D.DV)(this,this.Ob,"_drillableLabelStyle"):(0,D.DV)(this,this.Ob,"labelStyle"))),this.Ih&&(this.OM||this.Nc()?this.Ih.Ya(b.hoverOuterColor):((0,D.CV)(this,this.Ih),this.Ih=D.o))):((0,D.hA)(this.J),this.Ih&&((0,D.CV)(this,this.Ih),this.Ih=D.o),(a=this.lg)&&a.aV&&a.aV.k(this.J))}};
D.x.Sb=function(){if(this.J&&this.Yy){var a=this.N.A().nodeDefaults,b=a.header,c=(0,D.vV)(this.N);if(!(c!=D.o&&c!=this&&!this.aA(c))){var c=[],d,e,f,g;"header"==this.Bk?(this.Xp.ra(b.hoverBackgroundColor),this.Ih||(a=this.Db,d=this.Zb+1,e=this.Ja-1,f=this.La-1,(0,D.wk)()&&(d-=1),this.Ih=new D.D(this.N.j(),a,d,e,f),this.Ih.ua(D.p),this.Ih.O(D.o),(0,D.Ij)(this.Ih),this.J.k(this.Ih)),this.Ih.Ya(this.Ha()?b.selectedOuterColor:b.hoverOuterColor),d=this.Db+1.5+1,f=this.Db+this.Ja-1.5-1,e=this.Zb+this.Po,
g=this.Zb+this.La-1.5-1,c.push(f,e,f,g,d,g,d,e),a=new D.Wg(b.hoverInnerColor,0.8,3),this.Ob&&(this.Ft()?(0,D.DV)(this,this.Ob,"_drillableHoverLabelStyle"):(0,D.DV)(this,this.Ob,"_hoverLabelStyle"))):(d=this.Db+1,f=this.Db+this.Ja-1,e=this.Zb+1,g=this.Zb+this.La-1,c.push(this.Db,e,f,e,f,g,d,g,d,e),a=new D.Wg(a.hoverColor,1,2));b=this.N;b.GB.Ec(c);b.GB.ea(a);b.GB.xb(D.k)}}};
D.x.Jb=function(){if(this.J&&this.Yy){var a=this.N.A().nodeDefaults.header;"header"==this.Bk&&(this.Ha()?(this.Xp.ra(a.selectedBackgroundColor),this.Ih.Ya(a.selectedOuterColor),this.Ob&&(this.Ft()?(0,D.DV)(this,this.Ob,"_drillableSelectedLabelStyle"):(0,D.DV)(this,this.Ob,"_selectedLabelStyle"))):((0,D.GV)(this,this.J,this.Xp),this.Ih&&(this.J.removeChild(this.Ih),this.Ih=D.o),this.Ob&&(this.Ft()?(0,D.DV)(this,this.Ob,"_drillableLabelStyle"):(0,D.DV)(this,this.Ob,"labelStyle"))));this.N.GB.xb(D.p)}};
D.x.pf=function(a,b){this.De()?(this.Ob&&this.Ob.F(b),"header"==this.Bk&&(this.DU&&this.Xp)&&this.Xp.F(b)):D.zV.u.pf.call(this,a,b)};D.x.Ax=function(){return"off"!=this.r6&&"header"==this.Bk};D.x.GG=function(a){return!a||!a.cL()?D.zV.u.GG.call(this,a):new D.B(this.Db,this.Zb,this.Ja,this.La)};
D.x.Td=function(a){var b;if(a.type==D.$e)return D.zV.u.Td.call(this,a);b=a.keyCode;if(32==b&&a.ctrlKey)return this;if(38==b&&a.altKey||221==b)(b=this.lg)&&b.getId()!=this.N.Sa.getId()?(a=b,(0,D.cS)(b)):a=this;else if(40==b&&a.altKey||219==b)a=(a=this.MW)?a:this.De()?(0,D.wV)(this.N,this.Mc()):this;else{var c=(0,D.vV)(this.N),d=0;if(c)if(this==c)d=0;else{b=this.lg;for(d=1;c!=b;)d++,b=b.lg}else{for(c=this;c.lg;)c=c.lg;d=(0,D.ZR)(this)}b=(0,D.YR)(this,c,d);a=(0,D.Wn)(this,a,b)}(0,D.cS)(a);return a};
D.x.Ze=function(){return new D.B(this.Db,this.Zb,this.Ja,this.La)};D.x.Ej=function(){return this.J?this.J.Fa():D.o};
D.x.CS=function(a,b,c,d){if(!(0>=c||0>=d)){this.Yy=D.k;this.Zla=this.wm();this.Db=a;this.Zb=b;this.Ja=c?c:0;this.La=d?d:0;this.Bk=this.De()?this.IAa:this.lr;this.rC||(this.Bk="off");if("header"==this.Bk){this.Po=15;a=new D.lg(this.N.j(),this.rC);a.qf((0,D.XR)(this));(0,D.DV)(this,a,"labelStyle");a=D.yf.pj(a).g;this.Po=window.Math.max(this.Po,a);this.Ax()&&(this.Po=window.Math.max(this.Po,15));a=this.Db;b=this.Zb+this.Po;c=this.Ja;d=this.La-this.Po;if(0<=c&&0<=d)return new D.B(a,b,c,d);this.Bk=D.o}return new D.B(this.Db,
this.Zb,this.Ja,this.La)}};D.x.contains=function(a,b){return a>=this.Db&&a<=this.Db+this.Ja&&b>=this.Zb&&b<=this.Zb+this.La};D.x.wm=function(){var a=D.J.ue(this.Tj),b=D.J.qe(this.Tj),c=D.J.pe(this.Tj);return[this.Db,this.Zb,this.Ja,this.La,a,b,c,this.De()?0:window.Math.random()]};
D.x.Tq=function(a){this.CS(a[0],a[1],a[2],a[3]);this.Tj=D.J.eD(window.Math.round(a[4]),window.Math.round(a[5]),window.Math.round(a[6]));this.J&&((0,D.ZH)(this.J,this.Db,this.Zb,this.Ja,this.La),this.Xp&&(0,D.ZH)(this.Xp,this.Db+1,this.Zb+1,this.Ja-2,this.La-2),("header"!=this.Bk||this.DU)&&this.J.O(this.JH()),this.Ha()&&this.zb(D.p),(0,D.CV)(this,this.Sy),(0,D.CV)(this,this.tQ),this.tQ=this.Sy=D.o,(0,D.FV)(this),(0,D.WR)(this)?((0,D.CV)(this,this.n4),this.n4=D.o):((0,D.CV)(this,this.Ar),this.Ar=D.o,
this.Ob&&this.Ob.getParent().removeChild(this.Ob),this.Ob=this.YN(this.J)))};D.xV=function(a){if(a.Zla){var b=new D.yo(a.N.j(),a,0.3);(0,D.S)(b.P,"typeNumberArray",a,a.wm,a.Tq,a.wm());a.Tq(a.Zla);return b}return D.o};D.zV.prototype.xf=function(a,b){return 0==(0,D.ZR)(this)||b.Yy&&0<b.Ja&&0<b.La?D.zV.u.xf.call(this,a,b):this.Pg(a)};
D.zV.prototype.y4=function(){var a=this.N.j(),b;if("header"==this.Bk)b=new D.D(a,this.Db,this.Zb,this.Ja,this.La),this.Xp=new D.D(a,this.Db+1,this.Zb+1,this.Ja-2,this.La-2),(0,D.GV)(this,b,this.Xp),this.Xp.ua(D.p),b.k(this.Xp),this.eu&&(this.Ve=(0,D.EV)(this,b));else{var c=this.JH();b=new D.D(a,this.Db,this.Zb,this.Ja,this.La);if((1E3>this.N.tr||!(0,D.Ze)())&&2<=this.Ja&&2<=this.La){new D.Wg("#FFFFFF");new D.Wg("#000000",0.3);this.xr&&new D.Wg(this.Tj,0.15);var d=this.Ib(),e=D.J.DL("#FFFFFF",d,0.7),
d=D.J.DL("#000000",d,0.7),f=window.Math.min(this.Ja,this.La);4<=f?(b.ra(d),this.tQ=new D.D(a,this.Db,this.Zb,this.Ja-1,this.La-1),this.tQ.ra(e),this.tQ.ua(D.p),b.k(this.tQ),this.Sy=new D.D(a,this.Db+1,this.Zb+1,this.Ja-2,this.La-2),this.Sy.O(c),this.Sy.ua(D.p),b.k(this.Sy)):2<=f?(b.ra(d),this.Sy=new D.D(a,this.Db,this.Zb,this.Ja-1,this.La-1),this.Sy.O(c),this.Sy.ua(D.p),b.k(this.Sy)):b.O(c)}else b.O(c)}this.N.Aa().Ba(b,this);this.bb()?b.rg(D.k):b.setCursor("default");b.zIndex=this.yY;return b};
D.EV=function(a,b){if("header"!=a.Bk||!a.Ax())return D.o;var c=D.o,d=a.Db,e=a.Db+a.Ja-1,f=a.Zb+1,g=a.Zb+a.Po;if(12<e-d-2){if(a.eu){var c=a.N.j(),h=(0,D.F)(a.Y),j=a.N.A()._resources,l=h&&j.restoreDownRtl?j.restoreDownRtl:j.restoreDown,m=h&&j.restoreOverRtl?j.restoreOverRtl:j.restoreOver,h=new D.sf(c,h&&j.restoreRtl?j.restoreRtl:j.restore,0,0,12,12),l=new D.sf(c,l,0,0,12,12),m=new D.sf(c,m,0,0,12,12);(0,D.Aj)(h);(0,D.Aj)(l);(0,D.Aj)(m);c=new D.ef(c,h,l,m);c.oa(D.$e,a.Bga,D.p,a)}else c=a.N.j(),h=(0,D.F)(a.Y),
j=a.N.A()._resources,l=h&&j.isolateDownRtl?j.isolateDownRtl:j.isolateDown,m=h&&j.isolateOverRtl?j.isolateOverRtl:j.isolateOver,h=new D.sf(c,h&&j.isolateRtl?j.isolateRtl:j.isolate,0,0,12,12),l=new D.sf(c,l,0,0,12,12),m=new D.sf(c,m,0,0,12,12),(0,D.Aj)(h),(0,D.Aj)(l),(0,D.Aj)(m),c=new D.ef(c,h,l,m),c.oa(D.$e,a.zga,D.p,a);d=(0,D.F)(b.j())?d+1:e-12-1;(0,D.N)(c,d,(g+f-12)/2);b.k(c);(0,D.Ze)()&&(f=new D.D(b.j(),-2,-2,16,16),(0,D.Aj)(f),c.k(f));(0,D.PH)(a.N.A().skin)?a.N.Aa().Ba(c,a):(f=(0,D.Zl)(a.N.A(),
a.eu?"tooltipRestore":"tooltipIsolate","DvtTreemapBundle",a.eu?"RESTORE":"ISOLATE"),a.N.Aa().Ba(c,new D.ER(a,a.getId(),f)))}return c};D.FV=function(a){a.Ve&&((0,D.CV)(a,a.Ve),a.Ve=D.o)};
D.zV.prototype.YN=function(a){var b=(0,D.F)(a.j());if(!this.rC||!a||!this.Bk||"off"==this.Bk)return D.o;var c=this.La;if((0,D.XR)(this)>c)return D.o;var d="node"==this.Bk?this.vJ:this.bBa;b&&("start"==d?d="end":"end"==d&&(d="start"));var e=this.Ja-6,f=0;this.Ax()&&(f=13,e="center"==d?e-2*f:e-f);if(0>=e)return D.o;var g=new D.lg(this.N.j(),this.rC);g.qf((0,D.XR)(this));"start"==d?(b?g.ja(this.Db+4+f):g.ja(this.Db+4),g.Ci()):"center"==d?(g.ja(this.Db+this.Ja/2),g.Ff()):"end"==d&&(b?g.ja(this.Db+this.Ja-
4):g.ja(this.Db+this.Ja-4-f),g.Di());"node"==this.Bk?((0,D.hS)(this,g),c=this.La-4,b=D.yf.sR(g),"top"==this.y6?g.Ea(this.Zb+2):"center"==this.y6?g.Ea(this.Zb+this.La/2-b/2):"bottom"==this.y6&&g.Ea(this.Zb+this.La-2-b)):"header"==this.Bk&&(b=(0,D.wk)()?1:0,g.Ea(this.Zb+1+this.Po/2+b),g.Xf(),(0,D.DV)(this,g,"labelStyle"));if(g!=D.o)return"header"==this.Bk&&this.Ft()?((0,D.DV)(this,g,"_drillableLabelStyle"),g.setCursor("pointer"),b=new D.ER(this,this.getId(),D.o,this.Pe(),this.kj()),b.Vba(D.k),this.N.Aa().Ba(g,
b)):g.ua(D.p),D.yf.wc(g,e,c,a)?g:D.o};D.GV=function(a,b,c){var d=a.N.A().nodeDefaults.header;a.DU?(a=a.Ib(),c.ra(a),c=D.J.DL(d.borderColor,a,0.5),b.ra(c)):(b.ra(d.borderColor),c.ra(d.backgroundColor))};D.DV=function(a,b,c){var d=[];1>=(0,D.ZR)(a)&&d.push(new D.I("font-weight:bold;"));d.push(a.N.A().nodeDefaults.header[c]);a.DU&&("labelStyle"==c||"_drillableLabelStyle"==c)&&d.push(new D.I("color: "+(a.xr?"#000000":D.J.gk(a.Tj))));a.Nja&&d.push(a.Nja);b.Na((0,D.Qp)(d))};
D.zV.prototype.Xz=function(){!this.Ve&&!(0,D.Ze)()&&(this.Ve=(0,D.EV)(this,this.J));D.zV.u.Xz.call(this)};D.zV.prototype.Dt=function(){this.eu!==D.k&&!(0,D.Ze)()&&(0,D.FV)(this);D.zV.u.Dt.call(this)};D.CV=function(a,b){b&&a.J.removeChild(b)};D.x=D.zV.prototype;
D.x.zga=function(a){this.eu=D.k;this.Jb();var b=this.N,c=b.Aa().Jd();c&&c.qc();b.Gd.push(this);b.A().isolatedNode=this.getId();b.Wa(new D.BV(this.getId()));b.GW=D.k;b.Ep(new D.B(0,0,b.fb,b.tb));b.GW=D.p;c=this.ya();b.s6.k(c);(0,D.yV)(b,this);(0,D.FV)(this);this.Nl();a&&a.stopPropagation()};
D.x.Bga=function(a){this.eu=D.p;this.Jb();var b=this.N,c=b.Gd.pop();b.A().isolatedNode=0<b.Gd.length?b.Gd[b.Gd.length-1].getId():D.o;var d=b.Aa().Jd();d&&d.qc();d=c.getId();b.nP=d;b.Wa(new D.BV);b.GW=D.k;b.Ep(new D.B(0,0,b.fb,b.tb));b.GW=D.p;(0,D.yV)(b,c);(0,D.FV)(this);this.Nl();a&&a.stopPropagation()};D.x.Pe=function(a,b,c){return a&&a instanceof D.ef?D.o:D.zV.u.Pe.call(this,a,b,c)};D.x.kj=function(a){return a&&a instanceof D.ef?D.o:D.zV.u.kj.call(this,a)};
D.x.ce=function(a){return a&&a instanceof D.ef?(0,D.Zl)(this.N.A(),this.eu?"tooltipRestore":"tooltipIsolate","DvtTreemapBundle",this.eu?"RESTORE":"ISOLATE"):D.o};D.x.mc=function(){var a=this.N.A(),b=[];this.bb()&&b.push((0,D.Zl)(a,this.Ha()?"stateSelected":"stateUnselected","DvtUtilBundle",this.Ha()?"STATE_SELECTED":"STATE_UNSELECTED"));this.eu&&b.push((0,D.Zl)(a,"stateIsolated","DvtUtilBundle","STATE_ISOLATED"));return(0,D.ql)(this.fd(),b)};
D.x.Nl=function(){!(0,D.Cf)()&&this.J&&this.J.Wb("label",this.mc())};
D.lV=function(){this.Init()};D.y.q(D.lV,D.y,"DvtBaseTreemapLayout");D.lV.prototype.Init=function(){this.yY=0};D.lV.prototype.Bq=(0,D.s)();D.mV=function(a,b,c,d,e,f,g){b.yY=a.yY;a.yY++;if(!g||!b.De()){a=a.J$(b.N,(0,D.ZR)(b));g=window.Math.round(c+a);var h=window.Math.round(d+a);if(b=b.CS(g,h,window.Math.round(c+e-a)-g,window.Math.round(d+f-a)-h))return b}return new D.B(c,d,e,f)};D.lV.prototype.J$=function(a,b){var c=a.A().groupGaps;return"outer"==c?1==b&&2<=a.Ts?3:0:"all"==c?b<a.Ts?3:0:0};
D.oV=function(){this.Init()};D.y.q(D.oV,D.lV,"DvtSquarifyingLayout");D.oV.prototype.Bq=function(a,b,c,d,e,f,g){this.jf(b,c,d,e,f,g?D.p:D.k)};D.oV.prototype.jf=function(a,b,c,d,e,f){b=(0,D.mV)(this,a,b,c,d,e,f);a=a.Mc();if(a!=D.o&&0<a.length){c=a;e=b.e*b.g;for(d=d=f=0;d<c.length;d++)f+=0<c[d].ad()?c[d].ad():0;e=0==e?0:e/f;for(d=0;d<c.length;d++)f=c[d],f.bE=f.ad()*e;a=a.slice(0).sort(function(a,b){return a.ad()-b.ad()});c=window.Math.min(b.e,b.g);(0,D.pV)(this,a,c,new D.B(b.x,b.y,b.e,b.g))}};
D.pV=function(a,b,c,d){var e=[],f=window.Infinity;if(b==D.o||0==b.length)(0,D.qV)(a,e,c,d);else for(;0<b.length;){var g=b.pop();if(0>g.bE){(0,D.qV)(a,e,c,d);break}e.push(g);var h,j=e,l=c,m=0;h=window.Infinity;for(var n=-window.Infinity,q=0;q<j.length;q++)m+=j[q].bE,h=window.Math.min(h,j[q].bE),n=window.Math.max(n,j[q].bE);j=m*m;l*=l;h=window.Math.max(l*n/j,j/(l*h));if(h>f){b.push(g);e.pop();d=(0,D.qV)(a,e,c,d);(0,D.pV)(a,b,window.Math.min(d.e,d.g),d);break}else if(0==b.length){(0,D.qV)(a,e,c,d);break}else f=
h}};D.qV=function(a,b,c,d){var e=0,f;for(f=0;f<b.length;f++)e+=b[f].bE;var g=d.x,h=d.y;if(c==d.e){e=0==c?0:e/c;for(f=0;f<b.length;f++)c=b[f].bE/e,a.jf(b[f],g,h,c,e,D.p),g+=c;return new D.B(d.x,d.y+e,d.e,d.g-e)}c=0==c?0:e/c;for(f=0;f<b.length;f++)e=b[f].bE/c,a.jf(b[f],g,h,c,e,D.p),h+=e;return new D.B(d.x+c,d.y,d.e-c,d.g)};
D.nV=function(a){this.Init();this.Kw=a};D.y.q(D.nV,D.lV,"DvtSliceAndDiceLayout");D.nV.prototype.Bq=function(a,b,c,d,e,f,g){this.jf(this.Kw,a,b,c,d,e,f,g?D.p:D.k)};
D.nV.prototype.jf=function(a,b,c,d,e,f,g,h){var j=b.A();d=(0,D.mV)(this,c,d,e,f,g,h);c=c.Mc();if(c!=D.o){e=d.x;f=d.y;g=d.e;h=d.g;var l=0,m;for(m=0;m<c.length;m++)l+=0<c[m].ad()?c[m].ad():0;"on"==j.sorting&&(c=c.slice(0),c.sort(function(a,b){return b.ad()-a.ad()}));a&&(0,D.F)(b.j())&&(c=c.slice(0).reverse());for(m=0;m<c.length;m++)if(j=c[m],!(0>=j.ad())){var n=j.ad()/l;a?g=d.e*n:h=d.g*n;this.jf(!a,b,j,e,f,g,h,D.p);a?e+=g:f+=h}}};
D.BV=function(a){this.Init("treemapIsolate");this.jb=a?a:D.o};(0,D.ca)("DvtTreemapIsolateEvent",D.BV);D.y.q(D.BV,D.$j,"DvtTreemapIsolateEvent");D.BV.TYPE="treemapIsolate";D.BV.prototype.getId=(0,D.w)("jb");D.BV.prototype.getId=D.BV.prototype.getId;
D.tV=function(a){this.Init(a)};D.y.q(D.tV,D.aV,"DvtTreemapKeyboardHandler");D.tV.prototype.Rg=function(a){var b=D.tV.u.Rg.call(this,a);if(!b&&(a=a.keyCode,219==a||221==a))b=D.k;return b};
D.uV=function(a,b,c,d){D.RR.call(this,a,b,c,d)};D.y.q(D.uV,D.RR,"DvtTreemapEventManager");D.uV.prototype.rj=function(a){var b=D.k;if(13==a.keyCode&&a.ctrlKey){var c=this.Jd();c.Ax()&&(c.eu?c.Bga():c.zga());(0,D.ji)(a)}else b=D.uV.u.rj.call(this,a);return b};D.uV.prototype.Caa=(0,D.ba)(D.p);
(0,D.Bh)("DvtTreemapBundle",{COLOR:"Color",ISOLATE:"Isolate",OTHER:"Other",RESTORE:"Restore",SIZE:"Size"});
D.sV=function(){this.Init({skyros:D.AV,alta:{}})};D.y.q(D.sV,D.QR,"DvtTreemapDefaults");
D.AV={groupGaps:"outer",nodeDefaults:{header:{backgroundColor:"#FFFFFF",borderColor:"#d6dfe6",hoverBackgroundColor:"#ebeced",hoverOuterColor:"#ebeced",hoverInnerColor:"#d6d7d8",isolate:"auto",labelHalign:"start",labelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px;color:#252525;"),selectedBackgroundColor:"#dae9f5",selectedInnerColor:"#FFFFFF",selectedOuterColor:"#000000",useNodeColor:"off",_hoverLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px;color:#252525;"),
_selectedLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px;color:#252525;"),_drillableLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color:#145c9e;"),_drillableHoverLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color:#145c9e;"),_drillableSelectedLabelStyle:new D.I("font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 12px; color:#145c9e;")},
hoverColor:"#ebeced",groupLabelDisplay:"header",labelDisplay:"node",labelHalign:"center",labelValign:"center",selectedInnerColor:"#FFFFFF",selectedOuterColor:"#000000"}};
  return D;
});