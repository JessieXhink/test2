/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(a,f){(function(){function d(a){n.push(a);f(a.CV).keydown(b)}function b(b){var c="";a.C.vs(b)?c+="ctrl+":b.shiftKey&&(c+="shift+");var d=b.which;switch(d){case 32:c+="space";break;case 37:c+="left";break;case 38:c+="up";break;case 39:c+="right";break;case 40:c+="down";break;case 46:c+="del";break;case 33:c+="pgup";break;case 34:c+="pgdn";break;case 35:c+="end";break;case 36:c+="home";break;case 56:c="*";break;case 113:case 121:c+="f"+(1-
(112-d))}if(0!==c.length&&"shift+"!=c&&"ctrl+"!=c){var e=null;f.each(n,function(a,d){if(d.Iv.f.ui.Ti)return d.Iv.f.ui.Ip=!1,"shift+f10"==c?d.Iv.f.menu.aB=d.Iv.f.ui.yb:d.BS[c]&&(b.preventDefault(),e=d.BS[c].call(d.Iv,b)),!1});if(null!=e)return e}}function c(a){f.each(n,function(b){if(n[b].CV===a)return f(a).off("keydown"),n[b]=null,n.splice(b,1),!1})}function e(a){var b=!1,c=!0;a.YB&&(a.title&&(b=f("style[id\x3d'"+a.title+"-stylesheet']")[0]),b?c=!1:(b=document.createElement("style"),b.setAttribute("type",
"text/css"),a.title&&b.setAttribute("id",a.title+"-stylesheet")),b.styleSheet?c?(document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet.cssText=a.YB):b.styleSheet.cssText=b.styleSheet.cssText+" "+a.YB:(b.appendChild(document.createTextNode(a.YB)),document.getElementsByTagName("head")[0].appendChild(b)))}var g={cut:"ojtreecut",copy:"ojtreecopy",paste:"ojtreepaste",remove:"ojtreeremove",rename:"ojtreerename"},h={cut:"labelCut",copy:"labelCopy",paste:"labelPaste",remove:"labelRemove",rename:"labelRename"},
k,l,m;f(function(){/msie/.test(navigator.userAgent.toLowerCase())?(l=f('\x3ctextarea cols\x3d"10" rows\x3d"2"\x3e\x3c/textarea\x3e').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),m=f('\x3ctextarea cols\x3d"10" rows\x3d"2" style\x3d"overflow: hidden;"\x3e\x3c/textarea\x3e').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),k=l.width()-m.width(),l.add(m).remove()):(l=f("\x3cdiv /\x3e").css({width:100,height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("\x3cdiv /\x3e").find("div").css({width:"100%",
height:200}),k=100-l.width(),l.parent().remove())});var n=[],q=-1;a.Da("oj.ojTree",f.oj.baseComponent,{widgetEventPrefix:"oj",defaultElement:"\x3cdiv\x3e",options:{dnd:{reorder:"disable"},expandParents:!1,initExpanded:null,qga:[],selection:[],selectionMode:"single",selectedParentCollapse:!1,selectedParentExpand:!0,selectPrevOnDelete:!1,data:null,emptyText:null,icons:!0,types:null,before:null,collapse:null,create:null,collapseAll:null,cut:null,dehover:null,remove:null,destroy:null,expand:null,expandAll:null,
hover:null,loaded:null,move:null,optionChange:null,paste:null,refresh:null,rename:null},collapse:function(a,b){var c=(b=b||!1)?0:this.OD;a=this.va(a);if(!a.length||-1===a||!a.hasClass("oj-expanded")||this.f.V.locked||a.hasClass("oj-disabled"))return!1;var d=this.sb({obj:a,func:"collapse"},"before");if("boolean"!=typeof d||d)a.removeClass("oj-expanded").addClass("oj-collapsed").attr("aria-expanded","false"),f(a.children()[0]).removeClass("oj-selected").addClass("oj-default"),!b&&c?this.Ir(a,!0):this.EI(f(a.children("UL")[0]),
a)},Ir:function(a,b){var c,d,e;c=f(a.children("ul"));this.tT?c[0].addEventListener("webkitTransitionEnd",this.jA):c[0].addEventListener("transitionend",this.jA);b?(d=c[0].offsetHeight,e=0):(d=0,e=this.J7(c[0]));c.css("max-height",d+"px");c.css("overflow","hidden");b||(c[0].style.display="block");setTimeout(function(){c.addClass("oj-tree-transition");c.css("max-height",e+"px")},20)},J7:function(a){var b,c,d,e,g=f("\x3cdiv style\x3d'position: absolute'\x3e");b=a.parentNode;c=a.nextSibling;b.removeChild(a);
e=a.style.display;a.style.display="block";g.append(a);this.ea[0].appendChild(g[0]);d=a.offsetHeight||a.scrollHeight;a.style.display=e;this.ea[0].removeChild(g[0]);g[0].removeChild(a);c?b.insertBefore(a,c):b.appendChild(a);return d+10},Qr:function(a){a=f(a.target);var b=a.closest("li");this.tT?a[0].removeEventListener("webkitTransitionEnd",this.jA):a[0].removeEventListener("transitionend",this.jA);a.removeClass("oj-tree-transition");this.EI(a,b)},EI:function(a,b){b.hasClass("oj-collapsed")?(a[0].style.display=
"none",a.css("max-height",""),this.sb({obj:b},"collapse"),this.after_close(b)):(a[0].style.display="block",a.css("max-height",""),this.sb({obj:b},"expand"),this.after_open(b))},collapseAll:function(a,b){var c=a?a:-1,d=this;if(!this.f.V.locked&&((a=a?this.va(a):this.ea)&&-1!==c&&(c=a),a&&-1!==c||(a=this.fa),!a.hasClass("oj-disabled"))){var e;-1!==c&&this.isExpanded(a)&&(e=a[0]);var f=a.find("li.oj-expanded");f.length&&f.each(function(){d.collapse(this,!b)});e&&(this.collapse(e,!b),f.splice(0,0,e));
f.length&&this.sb({obj:f,targ:c},"collapseAll")}},expand:function(a,b){this.ce(a,!1,b)},expanded:function(a,b){var c,d,e=this;if(a&&"array"===f.type(a)){if(this.f.V.locked)return null;d=a.length;f.each(a,function(a,c){e.ce(c,!1,b)});return null}a=this.fa.find("li.oj-expanded");d=a.length;c=[];for(var g=0;g<d;g++)c.push(a[g]);return f(c)},expandAll:function(a,b){this.gF(a,b)},toggleExpand:function(a,b){if((a=this.va(a))&&a.length&&-1!==a&&!a.hasClass("oj-disabled")&&!this.f.V.locked){if(a.hasClass("oj-collapsed"))return this.expand(a,
b);if(a.hasClass("oj-expanded"))return this.collapse(a,b)}},deselect:function(a){var b=this.options.selection.slice(0);this.Iq(a);this.du("selection",b,null,null)},deselectAll:function(a){if(!this.f.V.locked){var b=this.options.selection.slice(0);this.Cy(a);this.du("selection",b,null,null)}},select:function(a){this.Jj(a,!0)},toggleSelect:function(a){a=this.va(a);if(!a.length||a.hasClass("oj-disabled")||this.f.V.locked)return!1;this.isSelected(a)?this.deselect(a):this.Jj(a,!0);return!0},isCollapsed:function(a){return(a=
this.va(a))&&-1!==a&&a.hasClass("oj-collapsed")},isExpanded:function(a){return(a=this.va(a))&&-1!==a&&a.hasClass("oj-expanded")},isLeaf:function(a){return this.lT(a)},isSelected:function(a){a=this.va(a);var b=!1;a&&a.length&&this.f.ui.selected&&(b=0<=this.f.ui.selected.index(a));return b},create:function(a,b,c){return this.JE(a,b,c)},remove:function(a){a=this.va(a);if(!a.length||a.hasClass("oj-disabled")||this.f.V.locked)return!1;var b=this.sb({obj:a,func:"remove"},"before");if("boolean"==typeof b&&
!b)return!1;this.bo();var b=this.Di(a),c=f([]),d=this,e=this.Nk(a);a.each(function(){c=c.add(d.Nk(this))});a=a.detach();-1!==b&&0===b.find("\x3e ul \x3e li").length&&b.removeClass("oj-expanded oj-collapsed").addClass("oj-tree-leaf").removeAttr("aria-expanded");this.rg(b);this.sb({obj:a,prev:e,parent:b},"remove");return a},getText:function(a){a=this.va(a);if(!a.length)return!1;a=a.children("a:eq(0)");a=a.find("span:eq(0)");return a[0].textContent},rename:function(a,b){this.fV(a,b)},hover:function(a){if(!this.f.menu.aB&&
(a=this.va(a),a.length&&!a.hasClass("oj-disabled")&&!this.f.V.locked&&!a.hasClass("oj-hover"))){var b=this.sb({obj:a,func:"hover"},"before");if("boolean"!=typeof b||b)a.hasClass("oj-hover")||this.dehover(),this.f.ui.yb=a.children("a").addClass("oj-hover").parent(),this.fa.attr("aria-activedescendant",this.f.ui.yb.attr("id")),this.KQ(a),this.sb({obj:a},"hover")}},dehover:function(){if(!this.f.menu.aB){var a=this.f.ui.yb,b;if(a&&a.length&&!a.hasClass("oj-disabled")&&!this.f.V.locked){b=a.find("a.oj-hover");
if(!b.length&&(b=this.fa.find("a.oj-hover"),!b.length))return;b.removeClass("oj-hover").parent();this.fa.removeAttr("aria-activedescendant");this.f.ui.yb=null;void 0!=a.attr("id")&&this.sb({obj:a},"dehover")}}},getPath:function(a,b){var c=[],d=this;a=this.va(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".oj-tree","li").each(function(){c.push(b?this.id:d.getText(this))});c.reverse();c.push(b?a.attr("id"):this.getText(a));return c},getRoot:function(){return this.ea.children("ul:eq(0)")},refresh:function(a){this._super();
this.f.V.locked||this.Ad(a?a:-1)},move:function(a,b,c,d){this.sr(a,b,c,d)},getType:function(a){return this.lG(a)},setType:function(a,b){return this.xda(a,b)},getNodeBySubId:function(a){return a?this.Mba(a):this.element?this.element[0]:null},getParent:function(a){return(a=this.Di(a))&&0<a.length?a:null},getPrevSibling:function(a){return(a=this.Nk(a,!0))&&0<a.length?a:null},getNextSibling:function(a){return(a=this.xo(a,!0))&&0<a.length?a:null},getChildren:function(a){return(a=this.v7(a?a:-1))&&0<a.length?
a:null},_ComponentCreate:function(){this._super();this.s$=this.bba();this.Jq=this.element.attr("id");void 0===this.Jq&&(this.Jq="oj-tree-"+this.Jd(),this.element.attr("id",this.Jq));this.Jq="#"+this.Jq;this.ea=this.element;this.fa=null;this.f={};this.GW=null;this.Dm="rtl"===this.hc();this.xT=a.C.sf();this.G$();if(this.OD=this.m7())this.tT="safari"==a.Qa.fw().browser,this.jA=f.proxy(this.Qr,this);this.bh()},_destroy:function(){this.Y4();this.f.html.zs&&(this.ea.append(this.f.html.zs),this.f.html.HB.remove(),
this.f.html.HB=!1,this.f.html.aC=!1);this.f.Oa.type=0;this._super()},_setOption:function(a,b,c){var d;if("selection"===a)b="string"==typeof b?[b]:b&&b.length?b:[],this.f.V.Hp=!0,this.a$(b),this.f.V.Hp=!1,b=this.$F();else if("selectionMode"===a)"none"===b?d=0:"single"===b?d=1:"multiple"===b?d=-1:(d=0,b="none"),d!=this.f.V.Gl&&(this.f.V.Gl=d);else if("icons"===a)"boolean"==f.type(b)&&b!=this.f.fb.icons&&((this.f.fb.icons=b)?this.mI():this.MG());else if("contextMenu"===a)this.io(),b&&this.zm(b);else if("disabled"===
a)this.h9(b);else{if("data"===a){this._super(a,b,c);this.US();this.VS();this.XS();this.JT();return}if("dnd"===a){this._super(a,b,c);this.WS();return}"emptyText"==a&&(b=this.Iy(b))}this._super(a,b,c)},et:function(a,b,c){return"selection"===a?this.nP(b,c):this._superApply(arguments)},nP:function(a,b){var c,d,e,g,h,k=!1,l=!1;g=a&&a.length?a.length:0;h=b&&b.length?b.length:0;if(g!==h)k=!0;else if(0==g&&0===h)k=!1;else for(c=0;c<g;c++){e=f(a[c]).attr("id");l=!1;for(d=0;d<h;d++)if(e==f(b[d]).attr("id")){l=
!0;break}if(!l){k=!0;break}}return!k},Y4:function(){var a=this.Jd();this.ea.unbind(".oj-tree").undelegate(".oj-tree").removeData("oj-tree-instance-id").find("[class^\x3d'oj-tree']").addBack().attr("class",function(){return this.className.replace(/oj-tree[^ ]*|$/ig,"")});var b=this.ea.attr("class"),b=b.trim();0===b.length&&this.ea.removeAttr("class");c(this.fa);f(document).unbind(".oj-tree-"+a).undelegate(".oj-tree-"+a);this.fa.remove();this.fa=null},va:function(a,b){if("undefined"===typeof a||null===
a)return b?this.f.ui.selected:this.f.ui.Gb;var c=f(a,this.ea);if(c.is(".oj-tree")||-1===a)return-1;c=c.closest("li",this.ea);return c.length?c:!1},Nk:function(a,b){a=this.va(a);if(-1===a)return this.ea.find("\x3e ul \x3e li:last-child");if(!a.length)return!1;if(b)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("oj-expanded");)a=a.children("ul:eq(0)").children("li:last");return a}var c=a.parentsUntil(".oj-tree","li:eq(0)");return c.length?
c:!1},xo:function(a,b){a=this.va(a);return-1===a?this.ea.find("\x3e ul \x3e li:first-child"):a.length?b?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("oj-expanded")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".oj-tree","li").next("li").eq(0):!1},Di:function(a){a=this.va(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".oj-tree","li:eq(0)");return a.length?a:-1},v7:function(a){a=this.va(a);return-1===a?this.ea.children("ul:eq(0)").children("li"):
a.length?a.children("ul:eq(0)").children("li"):!1},lT:function(a){return(a=this.va(a))&&-1!==a&&a.hasClass("oj-tree-leaf")},o8:function(a){a=this.fa.find(a);var b=!1;a&&a.length&&0<a.length&&f(a).is("li")&&(b=a);return b},IH:function(b,c){var d=b.parents("div").eq(0);(d=a.Components.Eg(d))&&c&&d("getCI",c);return this},getCI:function(a){a.ck=this},rO:function(a,b){void 0!=a&&void 0!=b&&f.each(b,function(b,c){void 0==a[b]&&(a[b]=c)})},h9:function(a){var b;"undefined"!==typeof a&&((b=this.fa.hasClass("oj-disabled"))||
(b=!1),b!=a&&(a?(this.fa.addClass("oj-disabled"),this.fa.prop("disabled",!0)):(this.fa.removeClass("oj-disabled"),this.fa.prop("disabled",!1)),this.kea(a)))},kea:function(a){a?(this.f.V.locked=!0,this.f.ui.opacity=this.ea.children("ul").css("opacity"),this.fa.addClass("oj-disabled").css("opacity","0.9")):(this.f.V.locked=!1,this.fa.removeClass("oj-disabled").css("opacity",this.f.ui.opacity))},a$:function(a){var b=a.slice(0),c=[],d=this,e,g,h,k;f.grep(b,function(a,f){if(e=d.o8(a))c.push(e),b[f]=e[0];
else return!1;return!0});a=this.$F();f.each(a,function(a,b){k=c.length;g=f(b).attr("id");h=!1;for(a=0;a<k;a++)if(g==c[a].attr("id")){h=!0;break}h||d.Iq(b)});this.sda(c,null)},yr:function(a,b,c,d,e){var f={};b=-1!==b&&b?this.va(b):-1;this.IH(a,f);f.xn=this;f.wa=f.ck.va(a);f.xa=b;f.Bl="undefined"===typeof c||!1===c?"last":c;if(!e&&this.f.V.$f.wa&&this.f.V.$f.wa[0]===f.wa[0]&&this.f.V.$f.xa[0]===f.xa[0]&&this.f.V.$f.Bl===f.Bl)d&&d.call(this,this.f.V.$f);else{if(-1!==f.xa&&f.xa){if(!/^(before|after)$/.test(f.Bl)&&
!this.Wk(f.xa))return this.Xk(f.xa,function(){this.yr(a,b,c,d,!0)});switch(f.Bl){case "before":f.Ri=f.xa.index();f.lp=f.xn.Di(f.xa);break;case "after":f.Ri=f.xa.index()+1;f.lp=f.xn.Di(f.xa);break;case "inside":case "first":f.Ri=0;f.lp=f.xa;break;case "last":f.Ri=f.xa.find(" \x3e ul \x3e li").length;f.lp=f.xa;break;default:f.Ri=f.Bl,f.lp=f.xa}}else switch(f.lp=-1,f.Bl){case "first":case "before":case "inside":f.Ri=0;break;case "after":case "last":f.Ri=f.xn.ea.find(" \x3e ul \x3e li").length;break;
default:f.Ri=f.Bl}f.yl=-1==f.lp?f.xn.ea:f.lp;f.Al=f.ck.Di(f.wa);f.Bia=f.wa.index();-1===f.Al&&(f.Al=f.ck?f.ck.ea:this.ea);!/^(before|after)$/.test(f.Bl)&&f.Al&&f.yl&&f.Al[0]===f.yl[0]&&f.wa.index()<f.Ri&&f.Ri++;f.GK=f.yl.find(" \x3e ul \x3e li:nth-child("+(f.Ri+1)+")");this.f.V.$f=f;d&&d.call(this,this.f.V.$f,"prepare_move")}},check_move:function(){var a=this.f.V.$f,b=!0,c;c=-1===a.xa?this.ea:a.xa;if(!a||!a.wa||a.GK[0]===a.wa[0]||!a.xa)return!1;if(!a.lB){if(a.Al&&a.yl&&a.Al[0]===a.yl[0]&&a.Ri-1===
a.wa.index())return!1;a.wa.each(function(){if(-1!==c.parentsUntil(".oj-tree","li").addBack().index(this))return b=!1})}return b},fV:function(a,b){var c;a=this.va(a);this.bo();c=this.getText(a);if(a&&a.length){var d=this.sb({obj:a,func:"rename",title:b,prevTitle:c},"before");if("boolean"==typeof d&&!d)return}a&&a.length&&this.jI.apply(this,Array.prototype.slice.call(arguments))&&this.sb({obj:a,title:b,prevTitle:c},"rename")},sr:function(a,b,c,d,e,g){e||(a=this.va(a));if(!(a.hasClass&&a.hasClass("oj-disabled")||
this.f.V.locked)){if(!e)return this.yr(a,b,c,function(a){a.ck===a.xn||a.lB||a.ck.deselect(a.wa);this.sr(a,!1,!1,d,!0,g)});d&&(this.f.V.$f.lB=!0);if(!g&&!this.check_move())return!1;this.bo();b=!1;d?(b=a.wa.clone(!0),b.find("*[id]").addBack().each(function(){this.id&&(this.id="copy_"+this.id)})):b=a.wa;a.GK.length?a.GK.before(b):(a.yl.children("ul").length||f("\x3cul /\x3e").appendTo(a.yl),a.yl.children("ul:eq(0)").append(b));try{a.ck.rg(a.Al),a.xn.rg(a.yl),a.Al.find("\x3e ul \x3e li").length||a.Al.removeClass("oj-expanded oj-collapsed").removeAttr("aria-expanded").addClass("oj-tree-leaf").children("ul").remove()}catch(h){}d&&
(this.f.V.$f.lB=!0,this.f.V.$f.FK=b);b=f.extend(!0,{},this.f.V.$f);b.obj=a.wa;this.sb(b,"move");return this.f.V.$f}},dia:function(){return this.f.zc.$f},lG:function(a){var b=null;this.options.types&&(b=this.va(a));return b&&b.length?b.attr(this.options.types.attr)||"default":!1},xda:function(a,b){var c=this.options.types,d,e=!1;a=this.va(a);c&&a&&-1!=a&&a.length&&b&&(d=c.attr)&&c[b]&&(a.attr(d,b),a.addClass("oj-tree-type"),e=!0);return e},WO:function(a,b,c){b=this.va(b);var d=!1,e=this.lG(b),g=0,
h=this,k=this.Mk().types,l=!1;if(-1===b)if(k[a])d=k[a];else return;else{if(!1===e)return;(l=this.f.types.ac.useData?b.data("oj-tree"):!1)&&l.types&&"undefined"!==typeof l.types[a]?d=l.types[a]:k.types[e]&&"undefined"!==typeof k.types[e][a]?d=k.types[e][a]:k.types["default"]&&"undefined"!==typeof k.types["default"][a]&&(d=k.types["default"][a])}f.isFunction(d)&&(d=d.call(this,b));var m=this.f.types.ac.maxDepth;"maxDepth"===a&&-1!==b&&!1!==c&&-2!==this.f.types.ac.maxDepth&&0!==d&&b.children("a:eq(0)").parentsUntil(".oj-tree",
"li").each(function(b){if(-1!==m&&0>=m-(b+1))return d=0,!1;g=0===b?d:h.WO(a,this,!1);if(-1!==g&&0>=g-(b+1))return d=0,!1;0<=g&&(g-(b+1)<d||0>d)&&(d=g-(b+1));0<=m&&(m-(b+1)<d||0>d)&&(d=m-(b+1))});return d},rg:function(a){a=a&&-1!=a?f(a):this.fa;a=a.is("li")?a.find("li").addBack():a.find("li");a.removeClass("oj-tree-last").addClass("oj-tree-node").addClass("oj-draggable").filter("li:last-child").addClass("oj-tree-last").end().filter(":has(li)").not(".oj-expanded").removeClass("oj-tree-leaf").addClass("oj-collapsed").attr("aria-expanded",
"false");a.not(".oj-expanded, .oj-collapsed").addClass("oj-tree-leaf").children("ul").remove();var b=this.options.types?this.options.types.attr:!1;a.find("li");var c,d;f.each(a,function(){d=f(this);c=d.find("\x3e ins");1<c.length&&(c=f(c[0]));d.hasClass("oj-tree-leaf")?(c.removeClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default"),c.addClass("oj-tree-icon")):(c.addClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default"),c.removeClass("oj-tree-node-icon"));
b&&d.attr(b)&&d.addClass("oj-tree-type")})},JE:function(a,b,c,d,e){a=a||-1;a=this.va(a);if(-1!==a&&!a.length)return!1;b="undefined"===typeof b?"last":b;var g=f("\x3cli /\x3e"),h;if(!e&&!this.Wk(a))return this.Xk(a,function(){this.JE(a,b,c,d,!0)}),!1;this.bo();"string"===typeof c&&(c={data:c});c||(c={});c.attr&&g.attr(c.attr);c.metadata&&g.data(c.metadata);c.state&&g.addClass("expanded"===c.state?"oj-expanded":"oj-collapsed");c.data||(c.data=void 0!==c.title?c.title:this.yu("labelNewNode"));f.isArray(c.data)||
(h=c.data,c.data=[],c.data.push(h));var k;f.each(c.data,function(a,b){h=f("\x3ca tabindex\x3d'-1' /\x3e");f.isFunction(b)&&(b=b.call(this,c));k=f("\x3cspan class\x3d'oj-tree-title'\x3e");"string"==typeof b?(k[0].textContent=b,h.attr("href","#")):(b.attr||(b.attr={}),b.attr.href||(b.attr.href="#"),k[0].textContent=b,b.language&&h.addClass(b.language));h.append(k);h.prepend("\x3cins class\x3d'oj-tree-icon oj-tree-node-icon oj-component-icon'\x3e\x26#160;\x3c/ins\x3e");!b.icon&&c.icon&&(b.icon=c.icon);
b.icon&&(-1===b.icon.indexOf("/")?h.children("ins").addClass(b.icon):h.children("ins").css("background","url('"+b.icon+"') center center no-repeat"));g.append(h)});g.prepend("\x3cins class\x3d'oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default'\x3e\x26#160;\x3c/ins\x3e");-1===a&&(a=this.ea,"before"===b&&(b="first"),"after"===b&&(b="last"));switch(b){case "before":a.before(g);h=this.Di(a);break;case "after":a.after(g);h=this.Di(a);break;case "inside":case "first":a.children("ul").length||
a.append("\x3cul /\x3e");a.children("ul").prepend(g);h=a;break;case "last":a.children("ul").length||a.append("\x3cul /\x3e");a.children("ul").append(g);h=a;break;default:a.children("ul").length||a.append("\x3cul /\x3e"),b||(b=0),h=a.children("ul").children("li").eq(b),h.length?h.before(g):a.children("ul").append(g),h=a}if(-1===h||h.get(0)===this.ea.get(0))h=-1;this.rg(h);this.sb({obj:g,parent:h},"create");d&&d.call(this,g);return g},ce:function(a,b,c){a=this.va(a);if(!a||!a.length)return!1;c=c||!1;
if(!a.hasClass("oj-disabled")&&!this.f.V.locked){if(!a.hasClass("oj-collapsed"))return b&&b.call(),!1;var d=this.sb({obj:a,func:"expand"},"before");if("boolean"!=typeof d||d){var d=c?0:this.OD,e=this;this.Wk(a)?(this.options.expandParents&&a.parentsUntil(".oj-tree",".oj-collapsed").each(function(){e.ce(this,!1,!0)}),a.removeClass("oj-collapsed").addClass("oj-expanded").attr("aria-expanded","true").children("a").removeClass("oj-tree-loading"),f(a.children()[0]).removeClass("oj-selected").addClass("oj-default"),
!c&&d?this.Ir(a,!1):this.EI(f(a.children("UL")[0]),a),b&&b.call()):(a.children("a").addClass("oj-tree-loading"),this.Xk(a,function(){e.ce(a,b,c)},b))}}},gF:function(a,b,c){var d=a?a:-1;(a=a?this.va(a):-1)&&-1!==a?d=a:a=this.fa;c?a=a.find("li.oj-collapsed"):(c=a,a=a.is(".oj-collapsed")?a.find("li.oj-collapsed").addBack():a.find("li.oj-collapsed"));var e=this;a.each(function(){var a=this;e.Wk(this)?e.ce(this,!1,!b):e.expand(this,function(){e.gF(a,b,c)},!b)});0===c.find("li.oj-collapsed").length&&this.sb({obj:a,
targ:d},"expandAll")},Jj:function(b,c,d){var e=this.f.V.Gl;if(0==e)return!1;b=this.va(b);if(-1==b||!b||!b.length||b.hasClass("oj-disabled")||this.f.V.locked)return!1;d&&"touchend"==d.type||(this.f.ui.Ip=!1);var f=this.isSelected(b);if(!f){var g=this.sb({obj:b,func:"select"},"before");if("boolean"==typeof g&&!g)return!1}var g=this.options.selection.slice(0),h=this.options,k=this.f.ui.ac.selectMultipleModifier,l=this.f.ui.ac.selectRangeModifier,m=this.f.ui.ac.disableSelectingChildren,k="on"==k||!1!==
k&&d&&a.C.vs(d),l=!1!==l&&d&&d[l+"Key"]&&this.f.ui.Gb&&this.f.ui.Gb[0]!==b[0]&&this.f.ui.Gb.parent()[0]===b.parent()[0],n=!0,q=this;if(c){if(m&&k&&(b.parentsUntil(".oj-tree","li").children("a.oj-selected").length||b.children("ul").find("a.oj-selected:eq(0)").length))return!1;n=!1;switch(!0){case l:this.f.ui.Gb.addClass("oj-tree-last-selected");b=b[b.index()<this.f.ui.Gb.index()?"nextUntil":"prevUntil"](".oj-tree-last-selected").addBack();-1==e||b.length<e?(this.f.ui.Gb.removeClass("oj-tree-last-selected"),
this.f.ui.selected.each(function(){this!==q.f.ui.Gb[0]&&q.Iq(this)}),f=!1,n=!0):n=!1;break;case this.f.ui.Ip&&-1==e:this.f.ui.Ip=!1;this.toggleSelect(b);n=!1;break;case f&&!k:if(!d)break;this.Cy();this.f.ui.aL||(f=!1);n=!0;break;case !f&&!k:d?this.f.ui.selected&&1==this.f.ui.selected.length?this.Iq(this.f.ui.selected):this.Cy(this.f.ui.selected):1===e?this.Iq(this.f.ui.selected):1<e&&this.Cy();n=!0;break;case f&&k:this.deselect(b);break;case !f&&k:if(-1==e||this.f.ui.selected.length+1<=e)n=!0}}c=
!1;n&&!f&&(l||(this.f.ui.Gb=b),b.children("a").addClass("oj-selected"),b.attr("aria-selected","true"),c=!0,h.selectedParentExpand&&b.parents(".oj-collapsed").each(function(){q.ce(this,!1,!0)}),this.f.ui.selected=this.f.ui.selected.add(b),this.KQ(b.eq(0)),this.f.V.Hp||this.du("selection",g,null,d));return c},Iq:function(a){a=this.va(a);if(!a.length)return!1;a.hasClass("oj-disabled")||this.f.V.locked||!this.isSelected(a)||(a.children("a").removeClass("oj-selected"),a.removeAttr("aria-selected"),this.f.ui.selected=
this.f.ui.selected.not(a),this.f.ui.Gb&&this.f.ui.Gb.length&&this.f.ui.Gb.get(0)===a.get(0)&&(this.f.ui.Gb=this.f.ui.selected.eq(0)))},Cy:function(a){if(!this.f.V.locked&&(a=a?f(a).find("a.oj-selected").parent():this.ea.find("a.oj-selected").parent(),a.not(".oj-disabled"),0!==a.length)){var b=this;f.each(a,function(){b.Iq(this)})}},sda:function(a,b){if(this.f.V.locked)return null;if(a&&0<a.length){var c=this;f.each(a,function(a,d){d&&c.Jj(d,!0,b)})}},wS:function(a){a.preventDefault();a.currentTarget.blur();
f(a.currentTarget).hasClass("oj-tree-loading")||(this.vA(),this.Jj(a.currentTarget,!0,a)&&this.fa.focus());this.f.ui.Ip=!1},gQ:function(a,b){a=f(a);if(!a.hasClass("oj-disabled")&&!this.f.V.locked){var c=a.parent(),d=c.hasClass("oj-collapsed");if(c.hasClass("oj-expanded")||d)b?(a.addClass("oj-hover"),a.removeClass("oj-default"),a.removeClass("oj-selected")):(a.removeClass("oj-hover"),a.addClass("oj-default"))}},Ad:function(a){this.RU(a)},RU:function(a){var b=a?a:-1,c=this;this.Uca();a||(a=-1);(a=this.va(a))?
b=a:a=-1;-1!==a?a.children("UL").remove():(this.fa.empty(),this.tU());this.Xk(a,function(){c.sb({obj:b},"refresh");c.oA()})},NH:function(a){this.saveSelected();this.RU(a)},after_open:function(a){this.sb({obj:a},"after_open",!0)},after_close:function(a){this.sb({obj:a},"after_close",!0)},Eca:function(){var a=this;this.f.V.bg.length&&f.each(this.f.V.bg,function(b,c){a.ce(c,!1,!0)});this.sb({},"reopen",!0)},$F:function(a){var b,c,d;a=a?f(a).find("a.oj-selected").parent():this.f.ui.selected;b=[];d=a.length;
for(c=0;c<d;c++)b.push(a[c]);return b},jI:function(a,b){a=this.va(a);if(!a.length)return!1;a=a.children("a:eq(0)");a=a.find("span:eq(0)");this.sb({obj:a,name:b},"set_text",!0);return a[0].textContent=b},JT:function(){0!==this.f.Oa.type&&-1!==this.f.Oa.type?this.Xk(-1,function(){this.LT();this.oA()}):(this.d4(),this.LT())},Xk:function(a){this.sb({obj:a},"load_node",!0)},Wk:function(){return!0},Caa:function(a,b,c){var d=this;this.Haa(a,function(){d.sb({obj:d.va(a)},"load_node",!0);b.call(this)},c)},
maa:function(a){a=this.va(a);return-1===a||!a||a.is(".oj-expanded, .oj-tree-leaf")||0<a.children("ul").children("li").length},aca:function(a){(a=this.va(a))&&-1!==a&&a.removeData("oj-tree-children");return this.NH(a)},Eaa:function(a,b,c){var d=this;this.Gaa(a,function(){d.sb({obj:d.va(a)},"load_node",!0);b.call(this)},c)},oaa:function(a){var b=this.options.data;a=this.va(a);return-1==a||!a||!b.ajax&&!this.f.Oa.OK&&!f.isFunction(b.data)||a.is(".oj-expanded, .oj-tree-leaf")||0<a.children("ul").children("li").length},
Daa:function(a,b,c){var d=this;this.Faa(a,function(){d.sb({obj:d.va(a)},"load_node",!0);b.call(this)},c)},naa:function(a){var b=this.options.data,c=null,d=null;b&&(c=b.data||null,d=b.ajax||null);a=this.va(a);return-1==a||!a||!d&&!f.isFunction(c)||a.is(".oj-expanded, .oj-tree-leaf")||0<a.children("ul").children("li").size()},reselect:function(){var a=this,b=this.f.ui.Tw,b=f.map(f.makeArray(b),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,
".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});f.each(b,function(b,c){c&&"#"!==c&&a.select(c)});this.f.ui.selected=this.f.ui.selected.filter(function(){return this.parentNode});this.sb(null,"reselect",!0)},saveSelected:function(){var a=this;this.f.ui.Tw=[];this.f.ui.selected.each(function(){this.id&&a.f.ui.Tw.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.sb(this.f.ui.Tw,"savedselected",
!0)},rollback:function(a){a&&f.isArray(a)},get_rollback:function(){this.sb(null,"get_rollback",!0);return{Mia:this.Jd(),Fg:this.ea.children("ul").clone(!0),Cia:this.data}},Haa:function(a,b){var c=this.ZM(a&&-1!=a?a[0].id:a?a:-1,a);if(c.success&&c.Dw){var d=!a||-1===a,e=this.options.data;if(e.data&&!e.ajax||e.data&&e.ajax&&d)d&&((c=this.Km(c.Dw,a))?(this.fa.empty().append(c.children()),this.rg()):this.f.Oa.Qf&&this.fa.empty()),b&&b.call(this);else if(!e.data&&e.ajax||e.data&&e.ajax&&!d)(c=this.Km(c.Dw,
a))?(d?(d=this.fa,d.empty().append(c.children()),d.attr("role","tree").attr("tabindex","0").css("outline","none"),-1===this.f.V.Gl&&d.attr("aria-multiselectable",!0)):(a.append(c).children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading")),this.rg(a),b&&b.call(this)):d?this.f.Oa.Qf&&(this.fa.empty(),b&&b.call(this)):(a.children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading"),e.correct_state&&(this.po(a),b&&b.call(this)))}},
ZM:function(a,b){var c=[],d=this.GW,e,g={},h={success:!1,Dw:null};-1==a&&(a=null,g.start=0);e=d.nf(a);0<e&&(g.count=e,d.Rd(a,g,{success:f.proxy(function(a){for(var e=a.Q(),f,g=0;g<e;g++){b={};(f=a.getData(g))&&(b.attr=f);b.title=a.tf[g].title;f.Sia&&(b.metadata=a.tf[g].metadata);var k=b.attr.id;f=d.nf(k);0<f&&(f=this.ZM(k,b),b.children=f.Dw);c.push(b)}h.success=!0;h.Dw=c},this),error:function(){h.success=!1}}));return h},bca:function(a){a=this.va(a);if(!this.f.V.locked){var b=!a||-1!==a||!a.length;
if(b||!a.hasClass("oj-disabled")){var c=this.options.data.json;!b&&this.f.Oa.Es&&(f.isFunction(c.data)||c.ajax)&&a.removeData("oj-tree-children");return this.NH(a)}}},Gaa:function(a,b,c){function d(){}function e(){}var g=this.Mk().data,h=g&&g.data||null,k=g&&g.ajax||null;!g||h||k||(h=g);if((a=this.va(a))&&-1!==a&&(this.f.Oa.OK||this.f.Oa.Es)&&!a.is(".oj-expanded, .oj-tree-leaf")&&0===a.children("ul").children("li").length&&a.data("oj-tree-children")){if(g=this.Km(a.data("oj-tree-children"),a))a.append(g),
this.f.Oa.Es||a.removeData("oj-tree-children");this.rg(a);b&&b.call(this)}else{if(a&&-1!==a){if(a.data("oj-tree-is-loading"))return;a.data("oj-tree-is-loading",!0)}switch(!0){case !h&&!k:throw"ojTree - neither data nor ajax settings supplied.";case f.isFunction(h):h.call(this,a,f.proxy(function(d){(d=this.Km(d,a))?(-1!==a&&a?(a.append(d).children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading")):this.fa.empty().append(d.children()),this.rg(a),b&&b.call(this)):
(-1!==a&&a?(a.children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading"),this.f.Oa.Qf&&this.po(a)):this.f.Oa.Qf&&this.fa.empty(),c&&c.call(this))},this));break;case !!h&&!k||!!h&&!!k&&(!a||-1===a):a&&-1!=a||((g=this.Km(h,a))?(this.fa.empty().append(g.children()),this.rg()):this.f.Oa.Qf&&this.fa.empty());b&&b.call(this);break;case !h&&!!k||!!h&&!!k&&a&&-1!==a:e=function(b,d,e){var f=this.Mk().data.ajax.error;f&&f.call(this,d,e,b);-1!=a&&a.length?(a.children("a.oj-tree-loading").removeClass("oj-tree-loading"),
a.removeData("oj-tree-is-loading"),"success"===d&&this.f.Oa.Qf&&this.po(a)):("error"==d||"success"===d&&this.f.Oa.Qf)&&this.fa.empty();c&&c.call(this)},d=function(c,d,g){var h=this.Mk().data.ajax.success;h&&(c=h.call(this,c,d,g)||c);if("string"==typeof c){d=c.replace(/^[\s\n]+$/,"");try{d=f.parseJSON(d)}catch(k){d=null}if(!d)return e.call(this,g,"Bad JSON","")}(c=this.Km(c,a))?(-1!==a&&a?(a.append(c).children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading")):
(g=this.fa,g.empty().append(c.children()),g.attr("role","tree").attr("tabindex","0").css("outline","none"),-1===this.f.V.Gl&&g.attr("aria-multiselectable",!0)),this.rg(a),b&&b.call(this)):-1!==a&&a?(a.children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading"),this.f.Oa.Qf&&(this.po(a),b&&b.call(this))):this.f.Oa.Qf&&(this.fa.empty(),b&&b.call(this))},g.ajax.context=this,g.ajax.error=e,g.ajax.success=d,g.dataType||(g.ajax.dataType="json"),f.isFunction(g.ajax.url)&&
(g.ajax.url=g.ajax.url.call(this,a)),f.isFunction(g.ajax.data)&&(g.ajax.data=g.ajax.data.call(this,a)),f.ajax(g.ajax)}}},Km:function(a,b,c){var d=!1,e,g,h,k;if(!a)return d;this.f.Oa.Es&&b&&-1!==b&&b.data("oj-tree-children",d);if("string"==typeof a)try{a=f.parseJSON(a)}catch(l){a=[]}if(f.isArray(a)){d=f("\x3cul\x3e");if(!a.length)return!1;g=0;for(h=a.length;g<h;g++)e=this.Km(a[g],b,!0),e.length&&(d=d.append(e));d=d.children()}else{"string"==typeof a&&(a={data:a});k="string"==typeof a.title?a.title:
" ";d=f("\x3cli role\x3d'treeitem' /\x3e");a.attr&&(this.f.types.fs&&!a.attr.type&&(a.attr.type="oj-tree-deftype",d.addClass("oj-tree-type")),d.attr(a.attr));a.metadata&&d.data(a.metadata);(a.state||a.children&&0===a.children.length)&&d.addClass("expanded"===a.state?"oj-expanded":"oj-collapsed");a.data||(a.data={dummy:0});var m=!1,n;e=f("\x3ca tabindex\x3d'-1' /\x3e");f.each(a.data,function(b,c){f.isFunction(c)&&(c=c.call(this,a));"string"!=typeof c&&("attr"==b?e.attr(c):"style"==b&&e.css(c),"language"==
b&&e.addClass(c));m||(n=f("\x3cspan class\x3d'oj-tree-title'\x3e"),n[0].textContent=k,e.prepend("\x3cins class\x3d'oj-tree-icon oj-tree-node-icon oj-component-icon'\x3e\x26#160;\x3c/ins\x3e",n),m=!0);!c.icon&&a.icon&&(c.icon=a.icon);c.icon&&(-1===c.icon.indexOf("/")?e.children("ins").addClass(c.icon):e.children("ins").css("background","url('"+c.icon+"') center center no-repeat"))});d.append(e);d.prepend("\x3cins class\x3d'oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default'\x3e\x26#160;\x3c/ins\x3e");
a.children&&(this.f.Oa.OK&&"expanded"!==a.state?d.addClass("oj-collapsed").attr("aria-expanded","false").data("oj-tree-children",a.children):(this.f.Oa.Es&&d.data("oj-tree-children",a.children),f.isArray(a.children)&&a.children.length&&(e=this.Km(a.children,b,!0),e.length&&(b=f("\x3cul role\x3d'group' /\x3e"),b.append(e),d.append(b)))))}c||(c=f("\x3cul /\x3e"),c.append(d),d=c);return d},po:function(a){a=this.va(a);if(!a||-1===a)return!1;a.removeClass("oj-collapsed oj-expanded").removeAttr("aria-expanded").addClass("oj-tree-leaf").children("ul").remove();
a.find("ins:first-child").removeClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default").addClass("oj-tree-icon");this.sb({obj:a},"correct_state",!0)},LT:function(){this.sb(null,"loaded")},Faa:function(a,b,c){function d(){}function e(){}var g=this.Mk().data,h=g&&g.data||null,k=g&&g.ajax||null;if((a=this.va(a))&&-1!==a){if(a.data("oj-tree-is-loading"))return;a.data("oj-tree-is-loading",!0)}switch(!0){case !h&&!k&&g&&"string"===typeof g:this.IT(g,a,b,c);break;case f.isFunction(h):h.call(this,
a,f.proxy(function(d){this.IT(d,a,b,c)},this));break;case !h&&!k:a&&-1!=a||(this.fa.empty().append(this.f.html.dB).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'oj-tree-icon' \x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass("oj-tree-node-icon").addClass("oj-tree-icon"),this.fa.find("li").children("ins:first-child").addClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default"),
this.Iz(this.fa),this.f.types.fs&&this.Ct(this.fa),this.rg(),this.fa.find("ul").attr("role","group"),this.fa.find("li").attr("role","treeitem"),this.fa.find("a").attr("tabindex",-1));b&&b.call(this);break;case !!h&&!k||!!h&&!!k&&(!a||-1===a):a&&-1!=a||(g=f(h),g.is("ul")||(g=f("\x3cul /\x3e").append(g)),this.fa.empty().append(g.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'oj-tree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass("oj-tree-node-icon").addClass("oj-tree-icon"),
this.fa.find("li.oj-tree-leaf ins:first-child").removeClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default").removeClass("oj-tree-node-icon").addClass("oj-tree-icon"),this.Iz(this.fa),this.f.types.fs&&this.Ct(this.fa),this.rg(),this.fa.find("ul").attr("role","group"),this.fa.find("li").attr("role","treeitem"),this.fa.find("a").attr("tabindex","-1"));b&&b.call(this);break;case !h&&!!k||!!h&&!!k&&a&&-1!==a:a=this.va(a),e=function(b,d,e){var f=this.Mk().data.ajax.error;
f&&f.call(this,b,d,e);-1!=a&&a.length?(a.children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading"),"success"===d&&this.f.Oa.Qf&&this.po(a)):"success"===d&&this.f.Oa.Qf&&this.fa.empty();c&&c.call(this)},d=function(c,d,g){var h=this.Mk().data.ajax.success;h&&(c=h.call(this,c,d,g)||c);if(""===c||c&&c.toString&&""===c.toString().replace(/^[\s\n]+$/,""))return e.call(this,g,d,"");if(c){c=f(c);c.is("ul")||(c=f("\x3cul /\x3e").append(c));-1!=a&&a?(a.children("a.oj-tree-loading").removeClass("oj-tree-loading"),
this.oca(a),a.append(c).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'oj-tree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass("oj-tree-node-icon").addClass("oj-tree-icon"),a.removeData("oj-tree-is-loading"),a.find("li.oj-tree-leaf ins:first-child").removeClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default").removeClass("oj-tree-node-icon").addClass("oj-tree-icon"),
c=a):(this.fa.empty().append(c.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'oj-tree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass("oj-tree-node-icon").addClass("oj-tree-icon"),this.fa.find("li.oj-tree-leaf ins:first-child").removeClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default").removeClass("oj-tree-node-icon").addClass("oj-tree-icon"),
c=this.fa);this.v9(c);this.Iz(c);d=c.children("UL");if(1<=d.length){d=d.first().find("span.oj-tree-title");var k=this;f.each(d,function(){this.textContent=k.Iy(this.textContent)})}this.f.types.fs&&c&&this.Ct(this.fa);this.rg(a);b&&b.call(this)}else a&&-1!==a?(a.children("a.oj-tree-loading").removeClass("oj-tree-loading"),a.removeData("oj-tree-is-loading"),this.f.Oa.Qf&&(this.po(a),b&&b.call(this))):this.f.Oa.Qf&&(this.fa.empty(),b&&b.call(this)),this.fa.find("ul").attr("role","group"),this.fa.find("li").attr("role",
"treeitem")},g.ajax.context=this,g.ajax.error=e,g.ajax.success=d,g.ajax.dataType||(g.ajax.dataType="html"),f.isFunction(g.ajax.url)&&(g.ajax.url=g.ajax.url.call(this,a)),f.isFunction(g.ajax.data)&&(g.ajax.data=g.ajax.data.call(this,a)),f.ajax(g.ajax)}},v9:function(a){a=a.find(a.is("ul")?"li ul":"ul").filter(function(){return!this.firstChild||0==this.childNodes.length||1==this.childNodes.length&&3==this.firstChild.nodeType});f.each(a,function(){f(this).closest("li").addClass("oj-collapsed")})},oca:function(a){a=
a.find("ul").filter(function(){return!this.firstChild||0==this.childNodes.length||1==this.childNodes.length&&3==this.firstChild.nodeType});0<a.length&&a.remove()},IT:function(a,b,c){if(a&&""!==a&&a.toString&&""!==a.toString().replace(/^[\s\n]+$/,"")){a=f(a);a.is("ul")||(a=f("\x3cul /\x3e").append(a));-1!=b&&b?(b.children("a.oj-tree-loading").removeClass("oj-tree-loading"),b.append(a).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'oj-tree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass("oj-tree-node-icon").addClass("oj-tree-icon"),
b.removeData("oj-tree-is-loading"),a=b,this.Ct(this.tn)):(this.fa.empty().append(a.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'oj-tree-icon oj-tree-disclosure-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".oj-tree-node-icon").addClass("oj-tree-node-icon").addClass("oj-tree-icon"),this.fa.find("li.oj-tree-leaf ins:first-child").removeClass("oj-tree-icon oj-tree-disclosure-icon oj-component-icon oj-clickable-icon oj-default").removeClass("oj-tree-node-icon").addClass("oj-tree-icon"),
a=this.fa,this.Ct(this.fa));a&&this.Iz(a);a=a.children("UL");if(1<=a.length){a=a.first().find("span.oj-tree-title");var d=this;f.each(a,function(){this.textContent=d.Iy(this.textContent)})}this.rg(b);c&&c.call(this)}else b&&-1!==b?(b.children("a.oj-tree-loading").removeClass("oj-tree-loading"),b.removeData("oj-tree-is-loading"),this.f.Oa.Qf&&(this.po(b),c&&c.call(this))):this.f.Oa.Qf&&(this.fa.empty(),c&&c.call(this))},Iz:function(a){f.each(a.find("li a"),function(a,b){var c=b.innerHTML,c=c.replace("ins\x3e",
"ins\x3e\x3cspan class\x3d'oj-tree-title'\x3e");b.innerHTML=c+"\x3c/span\x3e"})},Ct:function(a){var b,c;this.f.types.fs&&(c=(b=this.options.types)?b.attr:this.f.types.ac.attr,f.each(a.find("li"),function(a,b){b=f(b);b.attr(c)||b.attr(c,"oj-tree-deftype").addClass("oj-tree-type")}))},Gy:function(){var a=this.f.dnd.Bb;if(a.xa&&a.xa.length){this.f.dnd.off=a.xa.offset();this.Dm&&(this.f.dnd.off.right=this.f.dnd.off.left+a.xa.width()-a.xa.find("\x3ea").width()-14);this.f.dnd.E_=a.xa.find("a").width();
if(this.f.dnd.nB)return a=this.options.dnd.drag_check.call(this,{o:a.wa,r:a.xa}),this.f.dnd.after=a.after,this.f.dnd.before=a.before,this.f.dnd.inside=a.inside,this.f.dnd.Mw=!0,this.ZE();this.yr(a.wa,a.xa,"before");this.f.dnd.before=this.check_move();this.yr(a.wa,a.xa,"after");this.f.dnd.after=this.check_move();this.Wk(a.xa)?(this.yr(a.wa,a.xa,"inside"),this.f.dnd.inside=this.check_move()):this.f.dnd.inside=!1;this.f.dnd.Mw=!0;return this.ZE()}},ZE:function(){var a=this.f.dnd,b=!1,c;if(a.Mw){var b=
["before","inside","after"],d=!1,e=a.dc,g=a.Bb,b=a.Gc<this.f.V.Xh/3?["before","inside","after"]:a.Gc<=2*this.f.V.Xh/3?a.Gc<this.f.V.Xh/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];f.each(b,f.proxy(function(a,b){if(this.f.dnd[b])return e.helper.children("ins").removeClass("oj-tree-drop-invalid").addClass("oj-tree-drop-ok"),this.ea.removeClass("oj-invalid-drop"),d=b,!1},this));!1===d?(e.helper.children("ins").removeClass("oj-tree-drop-ok").addClass("oj-tree-drop-invalid"),
g.xa.addClass("oj-invalid-drop")):g.xa.removeClass("oj-invalid-drop").addClass("oj-valid-drop");c=this.Dm?this.f.dnd.off.right-18:this.f.dnd.off.left+5;b=!this.isLeaf(g.xa);a=this.Dm?c+this.f.dnd.E_+18:c;c=this.Dm?a-this.f.dnd.EZ:c+8;switch(d){case "before":b=this.f.dnd.off.top-3;g.$c.css({left:a+"px",top:b-7+"px"}).show();g.bc&&g.bc.css({left:c+"px",top:b+"px"}).show();break;case "after":b=this.f.dnd.off.top+this.f.V.Xh-3;g.$c.css({left:a+"px",top:b-2+"px"}).show();g.bc&&g.bc.css({left:c+"px",top:b+
6+"px"}).show();break;case "inside":g.$c.css({left:a+(this.Dm?b?-4:0:4)+"px",top:this.f.dnd.off.top+this.f.V.Xh/2-8+"px"}).show();g.bc&&g.bc.hide();break;default:g.$c.hide(),g.bc&&g.bc.hide()}return g.oK=d}},YE:function(a){var b=this.f.dnd,c=b.Bb;b.JB&&(clearTimeout(b.JB),b.JB=!1);b.Mw=!1;c.xa=this.va(a);a=this.options.dnd;var d=a.check_timeout;d?(b.dj&&clearTimeout(b.dj),b.dj=setTimeout(f.proxy(this.Gy,this),d)):this.Gy();(a=a.open_timeout)?(b.bi&&clearTimeout(b.bi),c.xa&&c.xa.length&&c.xa.hasClass("oj-collapsed")&&
(b.bi=setTimeout(f.proxy(this.iQ,this),a))):c.xa&&c.xa.length&&c.xa.hasClass("oj-collapsed")&&this.iQ()},t6:function(a){var b=this.f.dnd,c=this.f.dnd.Bb;b.after=!1;b.before=!1;b.inside=!1;this.f.dnd.dc.helper.children("ins").removeClass("oj-tree-drop-ok").addClass("oj-tree-drop-invalid");this.ea.addClass("oj-invalid-drop");c.wa&&c.wa.removeClass("oj-valid-drop").removeClass("oj-invalid-drop");c.xa&&c.xa.removeClass("oj-valid-drop").removeClass("oj-invalid-drop");c.$c.hide();c.bc&&c.bc.hide();c.xa&&
c.xa[0]===a.target.parentNode&&(b.dj&&(clearTimeout(b.dj),b.dj=!1),b.bi&&(clearTimeout(b.bi),b.bi=!1))},iQ:function(){var a=this.f.dnd.Bb;this.f.dnd.bi=!1;this.expand(a.xa,f.proxy(this.Gy,this),!0)},s6:function(a){var b=this.f.dnd,c=this.f.dnd.Bb;b.nB?(b.after||b.before||b.inside)&&this.options.dnd.drag_finish.call(this,{o:c.wa,r:c.xa,p:c.oK}):(this.Gy(),this.sr(c.wa,c.xa,c.oK,a[this.options.dnd.copy_modifier+"Key"]));c.wa&&c.wa.removeClass("oj-drag").removeClass("oj-invalid-drop").removeClass("oj-valid-drop");
c.wa=!1;c.xa=!1;c.$c.hide();c.bc&&c.bc.hide()},Oda:function(a,b){var c=this.f.dnd,d=this.f.dnd.Bb;d.wa=this.va(a);if(!d.wa.hasClass("oj-disabled")&&!this.f.V.locked){this.f.ui&&this.isSelected(d.wa)&&(d.wa=this.va(null,!0));var e=1<d.wa.length?this.yu("labelMultiSelection"):this.getText(d.wa),f=this.ea,e=e.replace(/</ig,"\x26lt;").replace(/>/ig,"\x26gt;");d.wa.addClass("oj-drag");this.sQ(b,{oh:!0,tn:d.wa},"\x3cspan\x3e"+e+"\x3c/span\x3e");this.f.fb&&(d.$c&&d.$c.addClass("oj-tree-"+this.f.fb.ai),c.dc.helper.addClass("oj-tree-dnd-helper oj-tree-"+
this.f.fb.ai));c.Zr=f.offset();c.uJ=parseInt(f.width(),10);c.ch=parseInt(f.height(),10);c.ta=!0}},sQ:function(a,b,c){var d=this.f.dnd.dc;d.nh&&this.bF();try{a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return!1},a.currentTarget.style&&(a.currentTarget.style.MozUserSelect="none")}catch(e){}d.aK=a.pageX;d.bK=a.pageY;d.Gd=b;d.kK=!0;d.helper=f("\x3cdiv class\x3d'oj-tree-title oj-drag' style\x3d'top:-2000px' /\x3e").html(c);f(document).bind("mousemove",this.nQ.bind(this));
f(document).bind("mouseup",this.bF.bind(this));return!1},nQ:function(a){var b=this.f.dnd.dc,c=this.f.dnd.Bb;if(b.kK){if(!b.nh)if(5<Math.abs(a.pageX-b.aK)||5<Math.abs(a.pageY-b.bK))b.helper.appendTo("body"),b.nh=!0,f(document).triggerHandler("drag_start.ojtreeu",[{event:a,data:b.Gd}]);else return;if("mousemove"===a.type){var d=f(document),e=d.scrollTop(),d=d.scrollLeft();20>a.pageY-e?(c.te&&"down"===c.gs&&(clearInterval(c.te),c.te=void 0),c.te||(c.gs="up",c.te=setInterval(function(){f(document).scrollTop(f(document).scrollTop()-
b.yn)},150))):c.te&&"up"===c.gs&&(clearInterval(c.te),c.te=void 0);20>f(window).height()-(a.pageY-e)?(c.te&&"up"===c.gs&&(clearInterval(c.te),c.te=void 0),c.te||(c.gs="down",c.te=setInterval(function(){f(document).scrollTop(Number(f(document).scrollTop())+b.yn)},150))):c.te&&"down"===c.gs&&(clearInterval(c.te),c.te=void 0);20>a.pageX-d?(c.re&&"right"===c.hs&&(clearInterval(c.re),c.re=void 0),c.re||(c.hs="left",c.re=setInterval(function(){f(document).scrollLeft(f(document).scrollLeft()-b.yn)},150))):
c.re&&"left"===c.hs&&(clearInterval(c.re),c.re=void 0);20>f(window).width()-(a.pageX-d)?(c.re&&"left"===c.hs&&(clearInterval(c.re),c.re=void 0),c.re||(c.hs="right",c.re=setInterval(function(){f(document).scrollLeft(Number(f(document).scrollLeft())+b.yn)},150))):c.re&&"right"===c.hs&&(clearInterval(c.re),c.re=void 0)}e=b.lga;this.Dm&&c.wa&&(c=c.wa.find("span.oj-tree-title:first"))&&0<c.length&&(e=-e-c[0].offsetWidth);b.helper.css({left:a.pageX+e+"px",top:a.pageY+b.mga+"px"});f(document).triggerHandler("drag.ojtreeu",
[{event:a,data:b.Gd}])}},bF:function(a){var b=this.f.dnd.Bb,c=this.f.dnd.dc;b.re&&clearInterval(b.re);b.te&&clearInterval(b.te);b.wa&&b.wa.removeClass("oj-drag").removeClass("oj-invalid-drop").removeClass("oj-valid-drop");f(document).unbind("mousemove",this.nQ.bind(this));f(document).unbind("mouseup",this.bF.bind(this));f(document).triggerHandler("drag_stop.ojtreeu",[{event:a?a:{},data:c.Gd}]);c.helper.remove();c.aK=0;c.bK=0;c.Gd={};c.kK=!1;c.nh=!1;this.ea.removeClass("oj-invalid-drop")},Uca:function(){var a=
this;this.f.V.bg=[];this.fa.find("li.oj-expanded").each(function(){this.id&&a.f.V.bg.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))})},oA:function(a){var b=this,c=!0,d=[],e=[],g,h;a||(this.f.V.QK=!1,this.f.V.Yga=!0);this.faa()&&(this.f.V.bg=[],this.fa.find("li.oj-collapsed").each(function(){h="#"+f(this).attr("id");b.isExpanded(h)||b.f.V.bg.push(h)}));this.f.V.bg=f.map(f.makeArray(this.f.V.bg),
function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.f.V.ek=f.map(f.makeArray(this.f.V.ek),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.f.V.bg.length&&(this.f.V.ek=this.f.V.ek.concat(this.f.V.bg),this.f.V.ek=this.f.V.ek.reduce(function(a,b){0>a.indexOf(b)&&a.push(b);return a},
[]));this.f.V.ek.length&&(f.each(this.f.V.ek,function(a,c){if("#"==c)return!0;g=b.ea.find(c);g.length?b.isExpanded(c)||d.push(c):e.push(c)}),d.length&&(this.f.V.ek=e,f.each(d,function(a,d){b.Wk(d)||(b.Xk(d,function(){b.oA(!0)},function(){b.oA(!0)}),c=!1)})));this.f.V.bg.length&&f.each(this.f.V.bg,function(a,c){b.isExpanded(c)||b.ce(c,!1,!0)});c&&(this.f.V.QK&&clearTimeout(this.f.V.QK),this.f.V.QK=setTimeout(function(){b.sb({},"reload_nodes",!0)},50),this.f.V.Yga=!1,this.Eca())},setTheme:function(a,
b){if(!a)return!1;b||(b=this.f.fb.Hv+a+"/style.css");-1==f.inArray(b,this.f.fb.F_)&&(e({url:b}),this.f.fb.F_.push(b));this.f.fb.ai!=a&&(this.ea.removeClass("oj-tree-"+this.f.fb.ai),this.f.fb.ai=a);this.ea.addClass("oj-tree-"+a);this.f.fb.cw?this.dW():this.DS();this.f.fb.icons?this.mI():this.MG()},isIcons:function(){return this.f.fb.icons},mI:function(){this.f.fb.icons=!0;this.ea.children("ul").removeClass("oj-tree-no-icons")},MG:function(){this.f.fb.icons=!1;this.ea.children("ul").addClass("oj-tree-no-icons")},
toggleIcons:function(){},J6:function(){this.f.keys.Dfa=!0},G$:function(){this.y$();this.x$();this.US(!0);this.I$();this.WS();this.w$();this.K$();this.F$();this.VS();this.J$();this.z$();this.zm()},sb:function(a,b,c){if(b&&"string"===f.type(b)&&(!0!==this.f.V.locked||"unlock"===b||"isLocked"===b||"lock"===b)){var d,e=Array.prototype.slice.call(arguments);d=this.ea;var g="before"===b,h=c?!1:!0;h||(b="_tree"+b);var k={};k.item=a?a.obj:void 0;k.inst=d;g?(d=a.func,k.func=d,k.args=e,"rename"===d&&(k.title=
a.title,k.prevTitle=a.prevTitle)):h&&("move"==b?(k.position=a.Bl,k.reference=a.xa,k.data=a):"rename"==b?(k.title=a.title,k.prevTitle=a.prevTitle):"remove"==b?(k.parent=a.parent,k.prev=a.prev):"delete"==b?(k.prev=a.prev,k.parent=a.parent):"expandAll"===b||"collapseAll"===b||"deselectAll"===b?k.targ=a.targ:"loaded"===b&&(k.item=-1));if(h){if(e=this._trigger(b,new f.Event("oj"+b),k),g)return"undefined"!=typeof e&&(e=e?!0:!1),e}else this.ea.trigger(b,k)}},du:function(a,b,c,d){"selection"===a&&(null==
c&&(c=this.$F()),this.nP(b,c)||this.option(a,c,{_context:{originalEvent:d,mb:!0},changed:!0}))},bo:function(){return this.get_rollback()},bh:function(){this.Dm&&this.ea.addClass("oj-tree-rtl").css("direction","rtl");this.ea.html("\x3cul role\x3d'tree' tabindex\x3d'0' class\x3d'oj-tree-list' style\x3d'outline:none'"+(-1===this.f.V.Gl?" aria-multiselectable\x3d'true'":"")+"\x3e\x3cli class\x3d'oj-tree-last oj-tree-leaf'\x3e\x3cins class\x3d'oj-tree-icon'\x3e\x26#160;\x3c/ins\x3e\x3ca class\x3d'oj-tree-loading' href\x3d'#'\x3e\x3cins class\x3d'oj-tree-icon'\x3e\x26#160;\x3c/ins\x3e"+
this.yu("stateLoading")+"\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e");this.fa=this.ea.children("ul:eq(0)");this.ea.data("oj-tree-instance-id",this.Jd());this.f.V.Xh=this.fa.find("li.oj-collapsed, li.oj-tree-leaf").eq(0).height()||18;this.xT&&this.ea.delegate(".oj-tree-list ins.oj-tree-disclosure-icon","touchend.ojtree",f.proxy(function(a){a.preventDefault();a=f(a.target);this.toggleExpand(a)},this));this.ea.delegate(".oj-tree-list ins.oj-tree-disclosure-icon","click.ojtree",f.proxy(function(a){a=f(a.target);
this.toggleExpand(a)},this)).delegate(".oj-tree-list ins.oj-tree-disclosure-icon","mousedown",f.proxy(function(a){this.f.ui.wJ=!0;f(a.target).removeClass("oj-default").removeClass("oj-hover").addClass("oj-selected")},this)).delegate(".oj-tree-list ins.oj-tree-disclosure-icon","mouseup",f.proxy(function(a){f(a.target).removeClass("oj-selected").addClass("oj-default")},this)).bind("mousedown.ojtree",f.proxy(function(){this.vA()},this)).bind("dblclick.ojtree",function(){var a;if(document.selection&&
document.selection.empty)document.selection.empty();else if(window.getSelection){a=window.getSelection();try{a.removeAllRanges(),a.collapse(document.getElementsByTagName("body")[0],0)}catch(b){}}});this.fa.focus(f.proxy(function(){if(this.f.ui.wJ)this.f.ui.wJ=!1;else{this.f.ui.Ti=!0;var a;this.f.ui.Wi?(this.f.ui.yb=this.f.ui.Wi,a=this.f.ui.yb):this.f.ui.Gb&&0<this.f.ui.Gb.length?(this.f.ui.yb=this.f.ui.Gb,a=this.f.ui.yb):a=this.fa.find("li:first");a&&(this.hover(a),this.f.ui.Wi=null,this.fa.find("a.oj-selected").removeClass("oj-tree-inactive"))}},
this)).blur(f.proxy(function(){this.f.ui.Ti=!1;this.f.ui.Wi=this.f.ui.yb;this.f.ui.Wi&&this.dehover(this.f.ui.yb);this.fa.find("a.oj-selected").addClass("oj-tree-inactive")},this));this.sb({},"init",!0);this.JT();this.f.menu.qd&&this.gm();d({BS:this.nr,CV:this.fa,Iv:this});this.J6()},w$:function(){this.f.V.locked=!1;this.ea.addClass("oj-tree oj-tree-"+this.Jd());this.ea.css("outline","none");this.ea.css("MozUserSelect","none");this.ea.css("WebkitTouchCallout","none");this.ea.css("WebkitUserSelect",
"none");this.ea.css("WebkitTapHighlightColor","rgba(0,0,0,0)")},K$:function(){this.f.ui.selected=f();this.f.ui.Gb=!1;this.f.ui.yb=null;var a=this.options.selection;a&&"array"===f.type(a)&&0<a.length&&(this.f.ui.Tw=a,this.options.selection=[]);this.xT&&this.ea.delegate(".oj-tree-list a","touchend.ojtree",f.proxy(function(a){this.f.ui.Ip=!0;this.wS(a);f(a.currentTarget).hasClass("oj-tree-loading")||this.dehover()},this));this.ea.delegate(".oj-tree-list a","click.ojtree",f.proxy(function(a){this.f.ui.Ip=
!1;this.wS(a)},this)).delegate(".oj-tree-list a","mouseenter.ojtree",f.proxy(function(a){f(a.currentTarget).hasClass("oj-tree-loading")||this.hover(a.target)},this)).delegate(".oj-tree-list a","mouseleave.ojtree",f.proxy(function(a){f(a.currentTarget).hasClass("oj-tree-loading")||this.dehover(a.target)},this)).delegate(".oj-tree-list .oj-tree-disclosure-icon","mouseenter.ojtree",f.proxy(function(a){f(a.currentTarget).hasClass("oj-tree-loading")||this.gQ(a.target,!0)},this)).delegate(".oj-tree-list .oj-tree-disclosure-icon",
"mouseleave.ojtree",f.proxy(function(a){f(a.currentTarget).hasClass("oj-tree-loading")||this.gQ(a.target,!1)},this)).bind("_treereopen",f.proxy(function(){this.reselect()},this)).bind("_treeget_rollback",f.proxy(function(){this.dehover();this.saveSelected()},this)).bind("ojcollapse",f.proxy(function(a,b){var c=this.va(b.item),d=c&&c.length?c.children("ul").find("a.oj-selected"):f();!1!==this.options.selectedParentCollapse&&d.length&&d.each(function(){this.deselect(this);"selectParent"===this.options.selectedParentCollapse&&
this.select(c)})},this)).bind("ojremove",f.proxy(function(a,b){var c=this.options.selectPrevOnDelete,d=this.va(b.item),d=d&&d.length?d.find("a.oj-selected"):[],e=this,f;d.each(function(){e.deselect(this);e.f.ui.Wi&&(f=e.va(this))&&e.f.ui.Wi.attr("id")==f.attr("id")&&(e.f.ui.Wi=null)});c&&d.length&&b.prev&&b.prev.each(function(){if(this.parentNode)return e.select(this),!1})},this)).bind("ojmove",f.proxy(function(a,b){var c=b.data,d=c.lB;d&&c.FK&&(c.FK.find("a.oj-selected").removeClass("oj-selected"),
c.FK.removeAttr("aria-selected"));c.ck===c.xn||d||(d=c.ck.f.ui,d.Wi&&(c.wa.attr("id")==d.Wi.attr("id")&&(d.Wi=null),d.Gb&&c.wa.attr("id")==d.Gb.attr("id")&&(d.Gb=null)))},this))},VS:function(){this.H$();this.C$();this.B$()},H$:function(){1===this.f.Oa.type&&(this.GW=this.options.data||null,this.Xk=this.Caa,this.Wk=this.maa,this.Ad=this.aca)},C$:function(){3===this.f.Oa.type&&(this.f.Oa.Es&&this.ea.bind("_treeafter_close",function(a,b){b.item.children("ul").remove()}),this.Xk=this.Eaa,this.Wk=this.oaa,
this.Ad=this.bca)},B$:function(){4===this.f.Oa.type&&(this.tU(),this.Xk=this.Daa,this.Wk=this.naa,this.Ad=this.NH)},tU:function(){this.f.html.aC&&(this.f.html.zs||(this.f.html.zs=this.ea.find(" \x3e ul"),this.f.html.HB=f("\x3cdiv id\x3d'oj-tree-existing-markup-"+this.Jd()+"' style\x3d'display:none'\x3e").append(this.f.html.zs),this.ea.after(this.f.html.HB)),this.f.html.CZ=this.f.html.zs.find(" \x3e li"),this.f.html.dB=this.f.html.CZ.clone(!0),this.f.html.dB.find("li").addBack().contents().filter(function(){return 3==
this.nodeType}).remove())},F$:function(){!1===this.f.fb.Hv&&f("script").each(function(){if(this.src.toString().match(/jquery\.oj-tree[^\/]*?\.js(\?.*)?$/))return this.f.fb.Hv=this.src.toString().replace(/jquery\.oj-tree[^\/]*?\.js(\?.*)?$/,"")+"themes/",!1});!1===this.f.fb.Hv&&(this.f.fb.Hv="themes/");this.ea.bind("_treeinit",f.proxy(function(){var a=this.options;this.f.fb.cw=a.dots;this.f.fb.icons=a.icons;this.setTheme(this.f.fb.ai,this.f.fb.url)},this)).bind("ojloaded",f.proxy(function(){this.f.fb.cw?
this.dW():this.DS();this.f.fb.icons?this.mI():this.MG()},this))},J$:function(){var a=this.options.types;a&&this.ea.bind("_treeinit",f.proxy(function(){var b=f.extend(!0,{},a.types),c=a.attr||this.f.types.ac.attr,d="",g=this;f.each(b,function(a,b){f.each(b,function(a){/^(maxDepth|maxChildren|icon|validChildren)$/.test(a)||g.f.types.oX.push(a)});var e=typeof b.icon;if("undefined"===e){e=typeof b.image;if("boolean"===e&&!b.image)b.image="ojt$none";else if(!b.image&&!b.position)return!0;b.icon={};b.image&&
(b.icon.image=b.image,delete b.image);void 0!==b.position&&(b.icon.position=b.position,delete b.position)}if(b.icon.image||b.icon.position)"default"==a?(g.f.types.fs=!0,d+=".oj-tree-"+g.Jd()+" .oj-tree-list li.oj-tree-type a \x3e .oj-tree-node-icon { ",d+=g.kO(b,d),d+="} ",d+=".oj-tree-"+g.Jd()+" .oj-tree-list li["+c+'\x3d"oj-tree-deftype"].oj-tree-type \x3e a ins.oj-tree-node-icon { '):b.icon.image&&(d+=".oj-tree-"+g.Jd()+" .oj-tree-list li["+c+'\x3d"'+a+'"].oj-tree-type \x3e a \x3e ins.oj-tree-node-icon { '),
d+=g.kO(b,d),d+="} "});""!==d&&e({YB:d,title:"oj-tree-types"})},this)).bind("ojbefore",f.proxy(function(a,b){var c,d,e=b.func,g=b.item;if((c=(c=this.f.types.ac.useData?this.va(g):!1)&&-1!==c&&c.length?c.data("oj-tree"):!1)&&c.types&&!1===c[e]||-1!==f.inArray(e,this.f.types.oX)&&b.item&&(b.item.tagName||b.item.jquery)&&(c=this.options.types.types,d=this.lG(g),(c[d]&&"undefined"!==typeof c[d][e]||c["default"]&&"undefined"!==typeof c["default"][e])&&!1===this.WO(e,g)))return a.stopImmediatePropagation(),
!1},this))},kO:function(a){var b="",b="ojt$none"!==a.icon.image?b+(" background-image:url("+a.icon.image+"); "):b+" background-image:none; ";return b=a.icon.position?b+(" background-position:"+a.icon.position+"; "):b+" background-position:0 0; "},z$:function(){if(this.f.dnd.reorder){var a=this.f.dnd.Bb;a.$c=f("\x3cdiv class\x3d'oj-tree-drop-marker'\x3e\x3cspan class\x3d'oj-tree-drop-ptr oj-component-icon'\x3e\x26#160;\x3c/span\x3e\x3c/div\x3e").hide().bind("mouseleave mouseenter",f.proxy(function(a){var b=
this.f.dnd.Bb;b.$c.hide();b.bc.hide();a.preventDefault();a.stopImmediatePropagation();return!1},this)).appendTo("body");a.bc=f("\x3cdiv /\x3e").addClass("oj-tree-drop-marker-line").hide().bind("mouseup",function(a){var b=this.f.dnd.Bb;if(b.xa&&b.xa.length)return b.xa.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",f.proxy(function(a){var b=this.f.dnd.Bb,c=f(a.relatedTarget);if((c.is(".oj-tree")||0===c.closest(".oj-tree").length)&&b.xa&&b.xa.length)return b.xa.children("a").trigger(a),
b.$c.hide(),b.bc.hide(),a.preventDefault(),a.stopImmediatePropagation(),!1},this)).appendTo("body");this.f.dnd.EZ=a.bc.width();f(document).bind("drag_start.ojtreeu",f.proxy(function(a,b){var c=this.f.dnd.Bb;b.data.oh&&(c.$c.show(),c.bc&&c.bc.show())},this));f(document).bind("drag_stop.ojtreeu",f.proxy(function(a,b){var c=this.f.dnd.Bb;b.data.oh&&(c.$c.hide(),c.bc&&c.bc.hide())},this));this.ea.bind("mouseenter.ojtree",f.proxy(function(a){var b=this.f.dnd.dc,c=this.f.dnd.Bb;if(b.nh&&b.Gd.oh&&(this.options.themes&&
(c.$c.addClass("oj-tree-"+this.f.fb.ai),c.bc&&c.bc.addClass("oj-tree-"+this.f.fb.ai),b.helper.addClass("oj-tree-dnd-helper oj-tree-"+this.f.fb.ai)),a.currentTarget===a.target&&b.Gd.tn&&f(b.Gd.tn).length&&f(b.Gd.tn).parents(".oj-tree:eq(0)")[0]!==a.target))if(a=this.IH(a.target),a.data.dnd.nB){if(a=a.options.dnd.drag_check.call(this,{o:c.wa,r:a.ea,is_root:!0}),!0===a||!0===a.inside||!0===a.before||!0===a.after)b.helper.children("ins").removeClass("oj-tree-drop-invalid").addClass("oj-tree-drop-ok"),
this.ea.removeClass("oj-invalid-drop"),c.wa&&c.wa.removeClass("oj-invalid-drop").addClass("oj-valid-drop")}else a.yr(c.wa,a.ea,"last"),a.check_move()&&(b.helper.children("ins").removeClass("oj-tree-drop-invalid").addClass("oj-tree-drop-ok"),this.ea.removeClass("oj-invalid-drop"),c.wa&&c.wa.removeClass("oj-invalid-drop").addClass("oj-valid-drop"))},this)).bind("mouseup.ojtree",f.proxy(function(a){var b=this.f.dnd.Bb,c=this.f.dnd.dc;c.nh&&c.Gd.oh&&a.currentTarget===a.target&&c.Gd.tn&&f(c.Gd.tn).length&&
f(c.Gd.tn).parents(".oj-tree:eq(0)")[0]!==a.target&&(c=this.IH(a.currentTarget),c.data.dnd.foreign?(a=c.Mk().dnd.drag_check.call(this,{o:b.wa,r:c.ea,is_root:!0}),!0!==a&&!0!==a.inside&&!0!==a.before&&!0!==a.after||c.Mk().dnd.drag_finish.call(this,{o:b.wa,r:c.ea,is_root:!0})):c.sr(b.wa,c.ea,"last",a[c.options.dnd.copy_modifier+"Key"]))},this)).bind("mouseleave.ojtree",f.proxy(function(a){var b=this.f.dnd.dc;if(a.relatedTarget&&f(a.relatedTarget).hasClass("oj-tree-drop-marker-line"))return!1;b.nh&&
b.Gd.oh&&(this.f.dnd.kh&&clearInterval(this.f.dnd.kh),this.f.dnd.lh&&clearInterval(this.f.dnd.lh),this.f.dnd.dj&&clearTimeout(this.f.dnd.dj),this.f.dnd.bi&&clearTimeout(this.f.dnd.bi),b.helper.children("ins").hasClass("oj-tree-drop-ok")&&(b.helper.children("ins").removeClass("oj-tree-drop-ok").addClass("oj-tree-drop-invalid"),this.ea.addClass("oj-invalid-drop"),this.f.dnd.Bb.wa&&this.f.dnd.Bb.wa.removeClass("oj-valid-drop").removeClass("oj-invalid-drop")))},this)).bind("mousemove.ojtree",f.proxy(function(a){var b=
this.f.dnd.dc;if(b.nh&&b.Gd.oh){var c=this.ea[0];a.pageX+24>this.f.dnd.Zr.left+this.f.dnd.uJ?(this.f.dnd.kh&&clearInterval(this.f.dnd.kh),this.f.dnd.kh=setInterval(f.proxy(function(){this.scrollLeft+=b.yn},c),100)):a.pageX-24<this.f.dnd.Zr.left?(this.f.dnd.kh&&clearInterval(this.f.dnd.kh),this.f.dnd.kh=setInterval(f.proxy(function(){this.scrollLeft-=b.yn},c),100)):this.f.dnd.kh&&clearInterval(this.f.dnd.kh);a.pageY+24>this.f.dnd.Zr.top+this.f.dnd.ch?(this.f.dnd.lh&&clearInterval(this.f.dnd.lh),this.f.dnd.lh=
setInterval(f.proxy(function(){this.scrollTop+=b.yn},c),100)):a.pageY-24<this.f.dnd.Zr.top?(this.f.dnd.lh&&clearInterval(this.f.dnd.lh),this.f.dnd.lh=setInterval(f.proxy(function(){this.scrollTop-=b.yn},c),100)):this.f.dnd.lh&&clearInterval(this.f.dnd.lh)}},this)).bind("scroll.ojtree",f.proxy(function(){var a=this.f.dnd.dc,b=this.f.dnd.Bb;a.nh&&a.Gd.oh&&b.$c&&b.bc&&(b.$c.hide(),b.bc.hide())},this)).delegate(".oj-tree-list a","mousedown.ojtree",f.proxy(function(a){if(1===a.which)return this.Oda(a.currentTarget,
a),!1},this)).delegate(".oj-tree-list a","mouseenter.ojtree",f.proxy(function(a){var b=this.f.dnd.dc;b.nh&&b.Gd.oh&&this.YE(a.currentTarget)},this)).delegate(".oj-tree-list a","mousemove.ojtree",f.proxy(function(a){var b=this.f.dnd.dc,c=this.f.dnd.Bb;b.nh&&b.Gd.oh&&(c.xa&&c.xa.length&&c.xa.children("a")[0]===a.currentTarget||this.YE(a.currentTarget),"undefined"===typeof this.f.dnd.off.top&&(this.f.dnd.off=f(a.target).offset()),"undefined"===typeof this.f.dnd.off.top&&(this.f.dnd.off=f(a.target).offset()),
this.f.dnd.Gc=(a.pageY-(this.f.dnd.off.top||0))%this.f.V.Xh,0>this.f.dnd.Gc&&(this.f.dnd.Gc+=this.f.V.Xh),this.ZE())},this)).delegate(".oj-tree-list a","mouseleave.ojtree",f.proxy(function(a){var b=this.f.dnd.dc,c=this.f.dnd.Bb;if(b.nh&&b.Gd.oh){if(a.relatedTarget&&f(a.relatedTarget).hasClass("oj-tree-drop-marker-line"))return!1;c.$c&&c.$c.hide();c.bc&&c.bc.hide();this.f.dnd.JB=setTimeout(function(b){return function(){b.t6(a)}}(this),0)}},this)).delegate(".oj-tree-list a","mouseup.ojtree",f.proxy(function(a){var b=
this.f.dnd.dc;b.nh&&b.Gd.oh&&this.s6(a)},this));f(document).bind("drag_stop.ojtreeu",f.proxy(function(){var a=this.f.dnd,b=this.f.dnd.Bb;a.dj&&clearTimeout(a.dj);a.bi&&clearTimeout(a.bi);a.kh&&clearInterval(a.kh);a.lh&&clearInterval(a.lh);a.after=!1;a.before=!1;a.inside=!1;a.off=!1;a.Mw=!1;a.Gc=!1;a.dj=!1;a.bi=!1;a.kh=!1;a.lh=!1;a.ta=!1;a.nB=!1;b.$c&&b.$c.css({top:"-2000px"});b.bc&&b.bc.css({top:"-2000px"})},this)).bind("drag_start.ojtreeu",f.proxy(function(a,b){if(b.data.oh){var c=f(b.event.target);
c.closest(".jstree").hasClass("oj-tree-"+this.Jd())&&this.YE(c)}},this));a=this.options.dnd;a.drag_target&&f(document).delegate(a.drag_target,"mousedown.ojtree-"+this.Jd(),f.proxy(function(a){var b=this.f.dnd.dc,c=this.f.dnd,d=this.f.dnd.Bb;d.wa=a.target;this.sQ(a,{oh:!0,tn:a.target},"\x3cins class\x3d'oj-tree-icon'\x3e\x3c/ins\x3e"+f(a.target).text());this.f.fb&&(d.$c&&d.$c.addClass("oj-tree-"+this.f.fb.ai),d.bc&&d.bc.addClass("oj-tree-"+this.f.fb.ai),b.helper.addClass("oj-tree-dnd-helper oj-tree-"+
this.f.fb.ai));b.helper.children("ins").removeClass("oj-tree-drop-ok").addClass("oj-tree-drop-invalid");this.ea.addClass("oj-invalid-drop");d.wa&&d.wa.removeClass("oj-valid-drop").addClass("oj-invalid-drop");b=this.ea;c.Zr=b.offset();c.uJ=parseInt(b.width(),10);c.ch=parseInt(b.height(),10);c.nB=!0;a.preventDefault()},this));a.drop_target&&f(document).delegate(a.drop_target,"mouseenter.ojtree-"+this.Jd(),f.proxy(function(a){var b=this.f.dnd,c=this.f.dnd.Bb;b.ta&&this.options.dnd.drop_check.call(this,
{o:c.wa,r:f(a.target),e:a})&&(b.dc.helper.children("ins").removeClass("oj-tree-drop-invalid").addClass("oj-tree-drop-ok"),this.ea.removeClass("oj-invalid-drop"),c.wa&&c.wa.removeClass("oj-invalid-drop").addClass("oj-valid-drop"))},this)).delegate(a.drop_target,"mouseleave.ojtree-"+this.Jd(),f.proxy(function(){this.f.dnd.ta&&(this.f.dnd.dc.helper.children("ins").removeClass("oj-tree-drop-ok").addClass("oj-tree-drop-invalid"),this.ea.addClass("oj-invalid-drop"))},this)).delegate(a.drop_target,"mouseup.ojtree-"+
this.Jd(),f.proxy(function(a){var b=this.f.dnd.Bb;this.f.dnd.ta&&this.f.dnd.dc.helper.children("ins").hasClass("oj-tree-drop-ok")&&this.options.dnd.drop_finish.call(this,{o:b.wa,r:f(a.target),e:a})},this))}},WS:function(){this.f.dnd.reorder=!1;var a=this.options.dnd,b=!0;"object"===typeof a&&(a=a.reorder,"string"===typeof a&&("enable"===a?(this.f.dnd.reorder=!0,b=!1):"disable"==a&&(b=!1)));this.f.dnd.reorder?(this.options.dnd={},this.rO(this.options.dnd,this.f.dnd.ac),this.options.dnd.reorder="enable"):
b&&(this.options.dnd={reorder:"disable"})},kia:function(){},zm:function(a){var b,c;a||this.options.contextMenu||(b=this.ea.attr("contextmenu"))&&(this.options.contextMenu="#"+b);if(a||this.options.contextMenu){b=a||this.options.contextMenu;c=f.type(b);if("function"==c){try{b=b()}catch(d){b=null}c=f.type(b)}if("string"===c){if(b=f(b))b.css("display","none"),c=this.f.menu,c.ve=b,c.qd=!0;this.f.menu.qd&&a&&this.gm()}}},Ei:function(a,b){if(!b.inst&&this.f.menu.Cha==this.Jq.substr(1)){var c=b?b.item.attr("id"):
void 0;"ojtreecopy"===c?this.c6(this.f.menu.$i):"ojtreecut"===c?this.e6(this.f.menu.$i):"ojtreepaste"===c?this.f6(this.f.menu.$i):"ojtreeremove"===c?this.isSelected(this.f.menu.$i)?this.HP():this.HP(this.f.menu.$i):"ojtreerename"===c?this.IP(this.f.menu.$i):"ojtreecreate"===c&&this.d6(this.f.menu.$i)}},Xe:function(a,b,c){var d="keyboard"===c;if("contextmenu"==b.type||d||"touch"==c){this.f.menu.$i=d?this.f.ui.yb:f(b.target);var e=this.f.menu.$i.find(".oj-tree-title")[0];this.f.menu.aB=null;this.f.menu.$i?
(this.f.menu.Cha=this.f.menu.$i.closest("div").attr("id"),a={launcher:this.fa},d&&(a.position={of:e}),this.f.menu.qd&&this.f.menu.Js&&(d=!this.f.zc.Sh&&!this.f.zc.kp,!!this.f.menu.Js.hasClass("oj-disabled")!=d&&(d?this.f.menu.Js.addClass("oj-disabled"):this.f.menu.Js.removeClass("oj-disabled"),this.f.menu.ve.ojMenu("refresh"))),this.Ye(b,c,a)):b.preventDefault()}},x$:function(){var a=this.options.selectionMode,a=void 0==a?"single":a;"none"===a?a=0:"single"===a?a=1:"multiple"===a&&(a=-1);this.f.V.Gl=
a;this.f.fb.icons=this.options.icons;this.XS();this.f.V.ek=this.options.initLoaded},nia:function(){},US:function(b){var c=this.options.data,d;this.f.Oa.type=0;this.f.html.aC=!1;this.f.html.dB=!1;if(c)if(d=f.type(c),"string"===d)this.caa(c)?this.f.Oa.type=4:this.f.Oa.type=3;else if("array"===d)this.f.Oa.type=3;else if("object"===d){try{c instanceof a.Ic&&(this.f.Oa.type=1)}catch(e){this.f.Oa.type=-1}if(1!==this.f.Oa.type)try{c instanceof a.Ka&&(this.f.Oa.type=2)}catch(g){this.f.Oa.type=-1}1!==this.f.Oa.type&&
2!==this.f.Oa.type&&(c.data||c.ajax)&&((d=c.dataType)?"json"===d?this.f.Oa.type=3:"html"===d&&(this.f.Oa.type=4):(c.dataType="json",this.f.Oa.type=3))}b&&0==this.f.Oa.type&&0<this.ea.find("ul").length&&(this.f.Oa.type=4,this.f.html.aC=!0)},mia:function(){},jia:function(){},iia:function(){},lia:function(){},I$:function(){var a=this.options.types;"object"===typeof a&&this.rO(a,{attr:this.f.types.ac.attr})},XS:function(){this.f.V.bg=this.Fea(this.options,"initExpanded");null==this.f.V.bg&&(this.f.V.bg=
[])},y$:function(){var a=this.f;a.V={qga:[],Gl:1,Ria:!1,Xh:0,Xia:!1,bg:!1,ek:!1,$f:{},Hp:!1,sha:{}};a.ui={selected:f(),Gb:!1,yb:null,Wi:null,wJ:!1,Tw:null,opacity:1,aL:!1,Ti:!1,jX:null,Ip:!1};a.ui.ac={selectMultipleModifier:"ctrl",selectRangeModifier:"shift",disableSelectingChildren:!1};a.zc={};a.zc.kp=!1;a.zc.Sh=!1;a.zc.ac={inputWidthLimit:200,move:{alwaysCopy:!1,openOnMove:!0,defaultPosition:"last",checkMove:function(){return!0}}};a.zc.$f={};a.Oa={};a.Oa.OK=!1;a.Oa.Es=!1;a.Oa.Qf=!0;a.Oa.type=0;
a.Bga={};a.Bga.ac={data:!1,ajax:!1};a.html={};a.html.ac={data:!1,ajax:!1};a.html.aC=!1;a.html.zs=!1;a.html.HB=!1;a.html.CZ=!1;a.html.dB=!1;a.fb={};a.fb.icons=!0;a.fb.cw=!1;a.fb.ai="default";a.fb.url=!1;a.fb.F_=[];a.fb.Hv=!1;a.types={};a.types.oX=[];a.types.fs=!1;a.types.ac={maxChildren:-1,maxDepth:-1,validChildren:"all",useData:!1,attr:"type",types:{"default":{maxChildren:-1,maxDepth:-1,validChildren:"all"}}};a.menu={};a.menu.qd=!1;a.menu.ve=!1;a.menu.Js=!1;a.menu.$i=!1;a.menu.aB=!1;a.keys={};a.keys.Dfa=
!0;a.keys.bound=[];a.dnd={};a.dnd.reorder=!1;a.dnd.ta=!1;a.dnd.after=!1;a.dnd.inside=!1;a.dnd.before=!1;a.dnd.off=!1;a.dnd.Mw=!1;a.dnd.Gc=0;a.dnd.dj=!1;a.dnd.bi=!1;a.dnd.Zr=!1;a.dnd.uJ=!1;a.dnd.ch=!1;a.dnd.kh=!1;a.dnd.lh=!1;a.dnd.JB=!1;a.dnd.EZ=100;a.dnd.E_=100;a.dnd.ac={copy_modifier:"ctrl",check_timeout:100,open_timeout:500,drop_target:".oj-tree-drop",drop_check:function(){return!0},drop_finish:f.noop,drag_target:".oj-tree-draggable",drag_finish:f.noop,drag_check:function(){return{after:!1,before:!1,
inside:!0}}};a.dnd.Bb={};a.dnd.Bb.wa=!1;a.dnd.Bb.xa=!1;a.dnd.Bb.$c=!1;a.dnd.Bb.bc=!1;a.dnd.Bb.re=void 0;a.dnd.Bb.te=void 0;a.dnd.Bb.gs=!1;a.dnd.Bb.hs=!1;a.dnd.Bb.oK=!1;a.dnd.dc={};a.dnd.dc.kK=!1;a.dnd.dc.nh=!1;a.dnd.dc.helper=!1;a.dnd.dc.yn=10;a.dnd.dc.aK=0;a.dnd.dc.bK=0;a.dnd.dc.ija=5;a.dnd.dc.lga=15;a.dnd.dc.mga=5;a.dnd.dc.Gd={}},KQ:function(a){var b=this.ea[0];b.scrollHeight>b.offsetHeight&&(a=this.va(a))&&-1!==a&&a.length&&a.is(":visible")&&(a=a.offset().top-this.ea.offset().top,0>a&&(b.scrollTop=
b.scrollTop+a-1),a+this.f.V.Xh+(b.scrollWidth>b.offsetWidth?k:0)>b.offsetHeight&&(b.scrollTop+=a-b.offsetHeight+this.f.V.Xh+1+(b.scrollWidth>b.offsetWidth?k:0)))},vA:function(){},xia:function(){},bba:function(){return++q},Jd:function(){return this.s$},Mk:function(){return f.extend(!0,{},this.options)},$ha:function(){return this.ea},nr:{up:function(){this.hover(this.Nk(this.f.ui.yb||this.f.ui.Gb||-1));return!1},"ctrl+up":function(){this.hover(this.Nk(this.f.ui.yb||this.f.ui.Gb||-1));return!1},"shift+up":function(){this.select(this.Nk(this.f.ui.yb||
this.f.ui.Gb||-1),-1!==this.f.ui.Gl);return!1},down:function(){this.hover(this.xo(this.f.ui.yb||this.f.ui.Gb||-1));return!1},"ctrl+down":function(){this.hover(this.xo(this.f.ui.yb||this.f.ui.Gb||-1));return!1},"shift+down":function(){this.select(this.xo(this.f.ui.yb||this.f.ui.Gb||-1),-1!==this.f.ui.Gl);return!1},left:function(){var a=this.f.ui.yb||this.f.ui.Gb;a&&(a.hasClass("oj-expanded")?this.collapse(a):this.hover(this.Nk(a)));return!1},"ctrl+left":function(){var a=this.f.ui.yb||this.f.ui.Gb;
a&&(a.hasClass("oj-expanded")?this.collapse(a):this.hover(this.Nk(a)));return!1},"shift+left":function(){var a=this.f.ui.yb||this.f.ui.Gb;a&&(a.hasClass("oj-expanded")?this.collapse(a):this.hover(this.Nk(a)));return!1},right:function(){var a=this.f.ui.yb||this.f.ui.Gb;a&&a.length&&(a.hasClass("oj-collapsed")?this.expand(a):this.hover(this.xo(a)));return!1},"ctrl+right":function(){var a=this.f.ui.yb||this.f.ui.Gb;a&&a.length&&(a.hasClass("oj-collapsed")?this.expand(a):this.hover(this.xo(a)));return!1},
"shift+right":function(){var a=this.f.ui.yb||this.f.ui.Gb;a&&a.length&&(a.hasClass("oj-collapsed")?this.expand(a):this.hover(this.xo(a)));return!1},space:function(){this.f.ui.yb&&(this.f.ui.aL=!0,this.f.ui.yb.children("a:eq(0)").click(),this.f.ui.aL=!1);return!1},home:function(){this.hover(this.fa.find("li:first"));return!1},end:function(){var a=this.fa.find("li.oj-tree-last:visible");a&&a.length&&this.hover(a[a.length-1]);return!1},"*":function(){this.fa.find("a");this.gF(-1,!1);return!1},"ctrl+space":function(){if(this.f.ui.yb){var a=
f.Event("click");a.ctrlKey=!0;this.f.ui.yb.children("a:eq(0)").trigger(a)}return!1},"shift+space":function(){if(this.f.ui.yb){var a=f.Event("click");a.shiftKey=!0;this.f.ui.yb.children("a:eq(0)").trigger(a)}return!1},"shift+home":function(a){var b,c=this.f.ui.yb;if(c){var d=!0,e=this,g=this.fa.find("li:visible");this.f.V.Hp=!0;b=this.options.selection.slice(0);c=c[0];f.each(g,function(a,b){b==c&&(d=!1);e.Jj(b,!0);return d});this.f.V.Hp=!1;this.du("selection",b,null,a)}return!1},"shift+pgdn":function(a){var b,
c=this.f.ui.Gb||this.f.ui.yb;if(c){var d=!1,e=this,g=this.fa.find("li:visible");this.f.V.Hp=!0;b=this.options.selection.slice(0);c=c[0];f.each(g,function(a,b){d||(d=b==c);d&&!e.isSelected(b)&&e.Jj(b,!0);return!0});this.f.V.Hp=!1;this.du("selection",b,null,a)}return!1},f2:function(){this.IP(this.f.ui.yb||this.f.ui.Gb);return!1},del:function(){this.remove(this.f.ui.yb||this.va(null));return!1}},gm:function(){if(this.f.menu.qd){var a=this.f.menu.ve,b=this;a.on("ojselect",f.proxy(this.Ei,this));var c=
!1;a.find("[data-oj-command]").each(function(){var a;0===f(this).children("a").length&&(a=f(this).attr("data-oj-command").split("oj-tree-"),f(this).replaceWith(b.yi(a[a.length-1])),f(this).hasClass("oj-menu-divider")&&f(this).removeClass("oj-menu-divider").addClass("oj-menu-item"),c=!0)});c&&a.ojMenu("refresh");this.f.menu.Js=a.find("#ojtreepaste")}},io:function(){var a=this.f.menu;a.qd&&(a.qd=!1,a.ve.off("ojselect"),a.ve=null)},yi:function(a){return f(this.Hf(a))},Hf:function(a){return"\x3cli id\x3d"+
g[a]+"\x3e"+this.YD(a)+"\x3c/li\x3e"},YD:function(a){return'\x3ca href\x3d"#"\x3e'+this.yu(h[a])+"\x3c/a\x3e"},e6:function(a){a=this.va(a,!0);if(!a||!a.length)return!1;this.f.zc.kp=!1;this.f.zc.Sh=a;this.sb({obj:a},"cut")},c6:function(a){a=this.va(a,!0);if(!a||!a.length)return!1;this.f.zc.Sh=!1;this.f.zc.kp=a;this.sb({obj:a},"copy")},f6:function(a){a=this.va(a);if(!a||!a.length)return!1;var b=this.f.zc.Sh?this.f.zc.Sh:this.f.zc.kp;if(!this.f.zc.Sh&&!this.f.zc.kp)return!1;this.f.zc.Sh&&(this.NE(this.f.zc.Sh,
a),this.f.zc.Sh=!1);this.f.zc.Sh&&(this.NE(this.f.zc.Sh,a),this.f.zc.Sh=!1);this.f.zc.kp&&this.NE(this.f.zc.kp,a,!1,!0);this.sb({obj:a,nodes:b},"paste")},NE:function(a,b,c,d,e,f){var g=this.f.zc.ac.move;if(!e)return"undefined"===typeof c&&(c=g.defaultPosition),"inside"!==c||g.defaultPosition.match(/^(before|after)$/)||(c=g.defaultPosition),this.sr(a,b,c,d,!1,f);if(!0===g.alwaysCopy||"multitree"===g.alwaysCopy&&a.xn.Jd()!==a.ck.Jd())d=!0;this.sr(a,b,c,d,!0,f)},HP:function(a){a=this.va(a,!0);this.bo();
this.remove(a)},IP:function(a){a=this.va(a);this.bo();this.JP(a,function(){})},JP:function(a,b){a=this.va(a);var c=this.Dm,d=this.f.zc.ac.inputWidthLimit,e=a.children("ins").width(),g=a.find("\x3e a:visible \x3e ins").width()*a.find("\x3e a:visible \x3e ins").length,h=this.getText(a),k=this,l=f("\x3cdiv /\x3e",{css:{position:"absolute",top:"-200px",left:c?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),m=a.css("position","relative").append(f("\x3cinput /\x3e",{value:h,"class":"oj-tree-rename-input",
css:{padding:"0",border:"1px solid silver",position:"absolute",left:c?"auto":e+g+4+"px",right:c?e+g+4+"px":"auto",top:"0px",height:this.f.V.Xh-2+"px",lineHeight:this.f.V.Xh-2+"px",width:"150px"},blur:f.proxy(function(){var c=a.children(".oj-tree-rename-input"),d=c.val();""===d&&(d=h);l.remove();c.remove();this.jI(a,h);this.fV(a,d);b.call(this,a,d,h);a.css("position","")},this),keyup:function(a){a=a.keyCode||a.which;if(!k.$E)return k.$E=!0,!1;27==a?(k.$E=!1,this.value=h,this.blur()):13==a?(k.$E=!1,
this.blur()):m.width(Math.min(l.text("pW"+this.value).width(),d))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".oj-tree-rename-input");this.jI(a,"");l.css({fontFamily:m.css("fontFamily")||"",fontSize:m.css("fontSize")||"",fontWeight:m.css("fontWeight")||"",fontStyle:m.css("fontStyle")||"",fontStretch:m.css("fontStretch")||"",fontVariant:m.css("fontVariant")||"",letterSpacing:m.css("letterSpacing")||"",wordSpacing:m.css("wordSpacing")||""});m.width(Math.min(l.text("pW"+
m[0].value).width(),d))[0].select()},d6:function(a,b,c,d,e){var g=this;(a=this.va(a))||(a=-1);this.bo();return this.JE(a,b,c,function(a){var b=this.Di(a),c=f(a).index();d&&d.call(this,a);b.length&&b.hasClass("oj-collapsed")&&this.expand(b,!1,!0);e?g.sb({obj:a,name:this.getText(a),parent:b,position:c}):this.JP(a,function(a,d){g.sb({obj:a,name:d,parent:b,position:c})})})},caa:function(a){if(!a||3>a.length)return!1;a=a.trim();return"\x3c"===a.charAt(0)},d4:function(){var a=this.options.emptyText;"string"!==
typeof a&&(a=this.yu("labelNoData"));if(a&&0<a.length){var b=this.fa,c=f("\x3cli class\x3d'oj-tree-empty'\x3e\x3c/li\x3e");c[0].textContent=a;b.empty().append(c)}},Mba:function(a){var b,c,d;d=null;var e;a&&(b=a.subId);if(!b)return null;d=b.split("[");if(3===d.length&&(d[0]=d[0].trim(),"oj-tree-node"===d[0]&&(d[1]=d[1].trim(),b=d[1].charAt(0),b=d[1].indexOf(b,1),0<=b&&(a=d[1].substring(1,b).trim(),d[2]=d[2].trim(),b=d[2].charAt(0),b=d[2].indexOf(b,1),0<=b)))){d=d[2].substring(1,b).trim();try{c=this.va(a)}catch(f){c=
null}if(d&&c&&-1!==c)switch(d){case "icon":this.f.fb.icons&&(e=c.find(" \x3e a \x3e ins:eq(0)"));break;case "link":e=c.find(" \x3e a:eq(0)");break;case "disclosure":this.lT(c)||(e=c.find(" \x3e ins:eq(0)"));break;case "title":e=c.find(" \x3e a \x3e span")}}return e?e.length?e[0]:null:null},DS:function(){this.f.fb.cw=!1;this.ea.children("ul").addClass("oj-tree-no-dots")},dW:function(){this.f.fb.cw=!0;this.ea.children("ul").removeClass("oj-tree-no-dots")},faa:function(){var a=this.options.initExpanded;
return a&&"all"==a||f.isArray(a)&&a.length&&"all"==a[0]},yu:function(a){var b=this.f.V.sha,c;c=b[a];c||(c=this.D(a),c=this.Iy(c),b[a]=c);return c},Iy:function(a){var b=document.createElement("div");f(b).text(a);return b.textContent},m7:function(){var a=0,b,c;window.getComputedStyle&&(c=this.f.ui.jX,c||(c=f("\x3cdiv id\x3d'ojtree-comp-animduration'\x3e\x3cspan class\x3d'oj-tree-transition'\x3edummy\x3c/span\x3e\x3c/div\x3e"),this.f.ui.jX=c,f("body").append(c)),b=c[0].childNodes[0],b=window.getComputedStyle(b),
b=b.transitionDuration?b.transitionDuration:b["-webkit-transition-duration"]?b["-webkit-transition-duration"]:0,c.detach(),"string"==typeof b&&1<b.length&&(c=b.charAt(b.length-1).toLowerCase(),"s"==c?(b=b.substring(0,b.length-1),b=parseFloat(b),isNaN(b)||(a=1E3*b)):2<b.length&&(c=b.substring(b.length-2).toLowerCase(),"ms"==c&&(b=parseFloat(b),isNaN(b)||(a=b)))));return a},Fea:function(a,b){var c={};c[b]=a[b];return f.extend(!0,{},c)[b]}})})()});