/**
 * Copyright (c) 2014, 2015, Oracle and/or its affiliates.
 * All rights reserved.
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore"],function(a,f){a.Xd=function(a,b,c){this.Ab=b;this.A=a;this.Gw=!1;this.m_(c)};a.b.ga(a.Xd,a.b,"oj.DataSourceContentHandler");a.Xd.prototype.HandleResize=function(){};a.Xd.prototype.Ae=function(){f(this.Ab).empty();this.Ab=this.A=null};a.Xd.prototype.ax=function(){return!this.Gw};a.Xd.prototype.WK=function(){this.mk()?this.Ab.setAttribute("role","tree"):this.Ab.setAttribute("role","listbox")};a.Xd.prototype.ZL=function(){this.np(!1);this.WK()};a.Xd.prototype.ud=
function(a){return a.key};a.Xd.prototype.gg=function(a){var b,c,e;b=f(this.Ab).find("."+this.A.Tf());for(c=0;c<b.length;c++)if(e=b[c],a==this.ud(e))return e;return null};a.Xd.prototype.getDataSource=function(){return this.ph};a.Xd.prototype.m_=function(a){this.ph=a};a.Xd.prototype.np=function(){};a.Xd.prototype.dJ=function(a,b,c,e,g){var h;h=document.createElement("li");f(h).uniqueId();a.appendChild(h);void 0==g&&(g=this.Vr.bind(this));b=this.rJ(b,c,e,h);e=this.A.b8();null!=e?(c=e.call(this,b),null!=
c&&(null===c.parentNode||c.parentNode instanceof DocumentFragment?h.appendChild(c):null==c.parentNode&&c.toString&&(e=document.createElement("span"),e.appendChild(document.createTextNode(c.toString())),h.appendChild(e)))):(e=document.createElement("span"),e.appendChild(document.createTextNode(null==c?"":c.toString())),h.appendChild(e));h=a.lastElementChild;b.parentElement=h;g(h,b)};a.Xd.prototype.Vr=function(a,b){a.key=b.key;a=f(a);a.uniqueId();this.mk()?a.attr("role","treeitem"):a.attr("role","option");
this.gK(b)||a.addClass("oj-skipfocus");this.A.Vk()&&this.jK(b)&&a.attr("aria-selected","false");a.addClass(this.A.Tf())};a.Xd.prototype.rJ=function(a,b,c,e){var g,f;g={};g.parentElement=e;g.index=a;g.data=b;g.component=this.A.Eg();g.datasource=this.getDataSource();for(f in c)c.hasOwnProperty(f)&&(g[f]=c[f]);return g};a.Xd.prototype.gK=function(a){return this.A.ou("focusable",a,!0)};a.Xd.prototype.jK=function(a){return this.A.ou("selectable",a,!0)};a.Sb=function(d,b,c){a.Sb.q.constructor.call(this,
d,b,c)};a.b.ga(a.Sb,a.Xd,"oj.TableDataSourceContentHandler");a.Sb.prototype.mk=function(){return!1};a.Sb.prototype.Ae=function(){a.Sb.q.Ae.call(this);this.VU();null!=this.Fw&&(this.Fw.destroy(),this.tK=this.Fw=null)};a.Sb.prototype.HandleResize=function(a,b){this.Uk()&&void 0!=this.zZ&&this.zZ!=b&&(this.zZ=b,this.checkViewport())};a.Sb.prototype.Uk=function(){return"loadMoreOnScroll"==this.A.options.scrollPolicy?!0:!1};a.Sb.prototype.Bj=function(){return Math.max(0,this.A.options.scrollPolicyOptions.fetchSize)};
a.Sb.prototype.OF=function(){return this.A.options.scrollPolicyOptions.maxCount};a.Sb.prototype.m_=function(d){var b;this.VU();this.zK=!1;if(null!=d){d instanceof a.pa||(this.zK=!0,this.Uk()&&(b=this,this.tK=function(a){null!=a&&(a.maxCountLimit?b.CG():b.xG(a))},this.Fw=new a.ij(this.A.SJ(),d,{fetchSize:this.Bj(),maxCount:this.OF(),success:this.tK})));this.yZ=this.iga.bind(this);this.xZ=this.hga.bind(this);this.uZ=this.ega.bind(this);this.vZ=this.fga.bind(this);this.wZ=this.gga.bind(this);if(d instanceof
a.pa)d.on("sync",this.yZ);d.on("sort",this.xZ);d.on("add",this.uZ);d.on("remove",this.vZ);d.on("reset",this.wZ)}this.ph=d};a.Sb.prototype.Vr=function(d,b){var c;a.Sb.q.Vr.call(this,d,b);f(d).addClass(this.A.rl());this.Uk()&&(c=Math.min(this.ph.totalSize(),this.OF()),-1===c&&(c=this.OF()),0<c&&f(d).attr("aria-setsize",c).attr("aria-posinset",b.index+1));this.A.Cw(d,b)};a.Sb.prototype.Oea=function(a,b){var c,e,g;this.Vr(a,b);c=f(a);e=c.outerHeight();c.css("opacity","0");c.css("maxHeight","0");g=this.A.rl();
c.children().wrapAll("\x3cdiv\x3e\x3c/div\x3e");c.removeClass(g).addClass("oj-listview-item-add-remove-transition");c.children().first().addClass(g);null==this.qK&&(this.qK=this.S8.bind(this));c.on("transitionend",this.qK);requestAnimationFrame(function(){c.css("opacity","1");c.css("maxHeight",e+"px")})};a.Sb.prototype.CG=function(){a.u.error("max count reached")};a.Sb.prototype.VU=function(){null!=this.ph&&(this.ph.off("sync",this.yZ),this.ph.off("sort",this.xZ),this.ph.off("add",this.uZ),this.ph.off("remove",
this.vZ),this.ph.off("reset",this.wZ))};a.Sb.prototype.np=function(a){var b;if(this.ax()&&(this.Gw=!0,this.zK||a)){a={fetchType:"init",startIndex:0};this.Uk()&&(a.pageSize=this.Bj());b=this;a=this.ph.fetch(a);a.then(function(a){b.zK&&b.xG(a)},function(a){b.Qk(a)});return}this.A.El()};a.Sb.prototype.Qk=function(d){a.u.error(d);this.A.El()};a.Sb.prototype.ym=function(a,b){var c,e,g;c=this.Ab.childElementCount;for(e=0;e<a.length;e++)g=a[e],this.dJ(this.Ab,c,g,this.getMetadata(c,b[e],g)),c+=1};a.Sb.prototype.ega=
function(a){var b,c,e;if(null!=this.Ab&&(b=a.data,a=a.keys,null!=b&&null!=a&&0<a.length&&0<b.length&&a.length==b.length)){c=this.Ab.childElementCount;for(e=0;e<b.length;e++)this.dJ(this.Ab,c,b[e],this.getMetadata(c,a[e],b[e]),this.Oea.bind(this)),c++;this.SX()}};a.Sb.prototype.S8=function(a){f(a.target).removeClass("oj-listview-item-add-remove-transition").addClass(this.A.rl()).off("transitionend",this.qK).children().children().unwrap()};a.Sb.prototype.fga=function(a){var b,c;a=a.keys;if(null!=this.Ab&&
null!=a&&0!=a.length)for(b=0;b<a.length;b++)c=this.gg(a[b]),null!=c&&this.aV(c)};a.Sb.prototype.aV=function(a){var b;null==this.CK&&(this.CK=this.T9.bind(this));b=this.A.rl();a=f(a);a.children().wrapAll("\x3cdiv class\x3d'"+b+"'\x3e\x3c/div\x3e");a.removeClass(b).css("maxHeight",a.outerHeight()+"px").addClass("oj-listview-item-add-remove-transition").on("transitionend",this.CK);setTimeout(function(){a.css("opacity","0");a.css("maxHeight","0px")},10)};a.Sb.prototype.T9=function(a){var b;a=f(a.target);
b=a.parent();a.off("transitionend",this.CK);a.remove();0==b.get(0).childElementCount&&this.A.El()};a.Sb.prototype.gga=function(){var a=this;f(this.Ab).children("."+this.A.rl()).each(function(b,c){a.aV(c)})};a.Sb.prototype.xG=function(a){var b;null!=this.Ab&&(b=a.data,a=a.keys,Array.isArray(b)&&Array.isArray(a)&&b.length==a.length&&(this.ym(b,a),this.SX()))};a.Sb.prototype.iga=function(a){null!=this.Ab&&(f(this.Ab).empty(),this.A.lC(),this.xG(a))};a.Sb.prototype.hga=function(){null!=this.Ab&&(f(this.Ab).empty(),
this.A.lC(),this.A.Fi()&&this.A.jo(!0),this.np(!0))};a.Sb.prototype.SX=function(){this.Gw=!1;this.A.El();this.checkViewport()};a.Sb.prototype.checkViewport=function(){var a;null!=this.Fw&&0<this.ph.totalSize()&&this.ax()&&(a=this.Fw.checkViewport(),null!=a&&a.then(this.tK,null))};a.Sb.prototype.getMetadata=function(a,b,c){c=c.context;null==c&&(c={});null==c.index&&(c.index=a);null==c.key&&(c.key=b);return c};a.Fh=function(d,b,c){a.Fh.q.constructor.call(this,d,b,c)};a.b.ga(a.Fh,a.Xd,"oj.TreeDataSourceContentHandler");
a.Fh.prototype.mk=function(){return!0};a.Fh.prototype.np=function(){this.Rd(0,null,this.Ab,null)};a.Fh.prototype.Rd=function(a,b,c,e){this.Gw=!0;a={start:a,count:this.ph.nf(b)};this.ph.Rd(b,a,{success:function(a){this.ym(a,b,c,e)}.bind(this),error:function(a){this.Qk(a)}.bind(this)})};a.Fh.prototype.ym=function(a,b,c,e){var g,f,k,l;b=a.ua();g=a.Q();for(f=0;f<g;f++)k=a.getData(b+f),l=a.getMetadata(b+f),this.dJ(c,b+f,k,l);this.Gw=!1;null!=e&&e.call(null,c);this.A.El()};a.Fh.prototype.Vr=function(d,
b){var c,e,g,h,k,l;a.Fh.q.Vr.call(this,d,b);c=this.A.Uh();e=this.A.rl();g=this.A.Sf();h=this.A.op();k=this.A.Ui();d=f(d);!1==b.leaf?(d.children().wrapAll("\x3cdiv\x3e\x3c/div\x3e"),d.attr("aria-expanded","false"),l=d.children().first(),l.uniqueId().addClass(e).addClass(g),this.A.us()&&(d.addClass("oj-collapsed"),e=document.createElement("a"),f(e).attr("href","#").attr("aria-labelledby",l.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(k),l.prepend(e)),k=document.createElement("ul"),
f(k).addClass(c).addClass(h).attr("role","group"),d.append(k)):!0==b.leaf&&d.addClass(e);this.A.Cw(d[0],b)};a.Fh.prototype.Qk=function(d){a.u.error(d);this.A.El()};a.Fh.prototype.Np=function(a,b){var c,e;c=this.ud(a[0]);e=a.children("ul")[0];this.Rd(0,c,e,b)};a.Fh.prototype.Lp=function(a){a.empty()};a.vd=function(a,b){this.A=a;this.Ab=b};a.vd.prototype.Ae=function(){this.f_(this.Ab,0);this.Gha()};a.vd.prototype.ax=function(){return!0};a.vd.prototype.HandleResize=function(){};a.vd.prototype.ZL=function(){this.IZ(this.Ab,
0);this.WK();this.A.El()};a.vd.prototype.Np=function(a,b){var c;c="."+this.A.Uh();c=f(a).children(c)[0];f(c).css("display","block");b.call(null,c)};a.vd.prototype.Lp=function(){};a.vd.prototype.mk=function(){null==this.xK&&(this.xK=0<f(this.Ab).children("li").children("ul").length);return this.xK};a.vd.prototype.f_=function(a,b){var c,e,g,h,k,l,m,n,q;c=this.A.Uh();e=this.A.op();g=this.A.js();h=this.A.rl();k=this.A.Tf();l=a.children;for(m=0;m<l.length;m++)n=l[m],this.Fha(n),n=f(n),n.removeClass(k).removeClass(h).removeClass(this.A.HJ(b)).removeClass("oj-skipfocus").removeClass("oj-focus").removeClass("oj-hover").removeClass("oj-expanded").removeClass("oj-collapsed").removeClass("oj-selected"),
q=n.children("ul"),0<q.length&&(n.children("."+h).children().unwrap(),n.children(".oj-component-icon").remove(),n=f(q[0]),n.removeClass(c).removeClass(g).removeClass(e).removeAttr("role"),this.f_(n[0],b+1))};a.vd.prototype.IZ=function(a,b){var c,e,g,h,k,l,m,n,q,p,r,t,s,v;c=this.A.rl();e=this.A.Tf();g=this.A.Uh();h=this.A.Sf();k=this.A.op();l=this.A.Ui();m=a.children;n=this.A.us();for(q=0;q<m.length;q++)p=f(m[q]),r=this.rJ(p),this.hha(p,r),p.uniqueId().addClass(e),0<b&&p.addClass(this.A.HJ(b)),this.gK(r)||
p.addClass("oj-skipfocus"),t=p.children("ul"),0<t.length?(this.xK=!0,p.children(":not(ul)").wrapAll("\x3cdiv\x3e\x3c/div\x3e"),s=p.children().first(),s.addClass(c).addClass(h),this.jga(t[0])&&(p.attr("aria-expanded","false"),n&&(p.addClass("oj-collapsed"),s.uniqueId(),v=document.createElement("a"),f(v).attr("href","#").attr("role","button").attr("aria-labelledby",s.get(0).id).addClass("oj-component-icon oj-clickable-icon-nocontext").addClass(l),s.prepend(v))),t=f(t[0]),t.addClass(g).addClass(k).attr("role",
"group").css("display","none"),this.IZ(t[0],b+1)):p.addClass(c),this.A.Cw(p[0],r)};a.vd.prototype.WK=function(){this.mk()?this.Ab.setAttribute("role","tree"):this.Ab.setAttribute("role","listbox")};a.vd.prototype.Gha=function(){this.Ab.removeAttribute("role")};a.vd.prototype.jga=function(a){return 0<f(a).children("li").length};a.vd.prototype.rJ=function(a){var b;b={};b.key=a.attr("id");b.parentElement=a.children().first()[0];b.index=a.index();b.data=a[0];b.component=this.A.Eg();this.mk()&&(b.leaf=
0==a.children("ul").length,a=a.parents("li."+this.A.Tf()),b.depth=a.length,b.parentKey=0==a.length?null:a.first().attr("id"));return b};a.vd.prototype.hha=function(a,b){a.attr("role",this.mk()?"treeitem":"option");this.A.Vk()&&this.jK(b)&&a.attr("aria-selected",!1)};a.vd.prototype.Fha=function(a){a.removeAttribute("role");a.removeAttribute("aria-selected");a.removeAttribute("aria-expanded")};a.vd.prototype.ud=function(a){return f(a).attr("id")};a.vd.prototype.gg=function(a){return document.getElementById(a)};
a.vd.prototype.gK=function(a){return this.A.ou("focusable",a,!0)};a.vd.prototype.jK=function(a){return this.A.ou("selectable",a,!0)};a.qH=function(d,b){function c(){}a.b.ga(c,d,"");c.prototype=f.extend(c.prototype,b);return c}(Object,{Ps:37,ex:39,mC:40,LC:38,U0:9,m0:13,n0:27,o0:113,S0:32,mi:0,li:1,$L:2,ul:function(d){var b=this;this.la=d.la;this.element=d.element;this.options=d;this.element.uniqueId().addClass(this.tC()+" oj-component-initnode").attr("tabIndex",0);this.la._on(this.element,{click:function(a){b.yC(a);
b.AZ=!1},mousedown:function(){b.AZ=!0},mouseout:function(a){b.M9(a)},mouseover:function(a){b.N9(a)},keydown:function(a){b.HL(a)},focus:function(a){b.xC(a)},blur:function(a){b.wC(a)}});a.Qa.fw().browser===a.Qa.Ll.yL&&this.la._on(this.Yg(),{focus:function(){this.element.focus()}})},Ur:function(){var a;this.y4();this.TS();a=this.Yg();this.Pm(a[0])},refresh:function(){this.jV();this.Vs();this.TS()},destroy:function(){this.element.removeClass(this.tC()+" oj-component-initnode");this.Ov(this.Yg());this.jV();
a.C.unwrap(this.element,this.Yg())},jV:function(){this.NC();this.R4(this.element);null!=this.qe&&(this.qe.Ae(),this.qe=null);this.nb=null;this.lC()},NZ:function(){this.Yg().removeClass("oj-focus-ancestor");null!=this.nb&&f(this.nb.elem).removeClass("oj-focus");null!=this.yK&&this.Rr(this.yK,"oj-hover")},Wia:function(){},getNodeBySubId:function(a){return null==a?this.element?this.element[0]:null:"oj-listview-icon"===a.subId&&(a=a.key,a=this.gg(a),null!=a&&a.firstElementChild&&(a=a.firstElementChild.firstElementChild,
null!=a&&(f(a).hasClass(this.ol())||f(a).hasClass(this.Ui()))))?a:null},getSubIdByNode:function(a){if(null!=a&&f(a).hasClass(this.ol())||f(a).hasClass(this.Ui()))if(a=this.Kn(a),null!=a&&0<a.length&&(a=this.ud(a[0]),null!=a))return{subId:"oj-listview-icon",key:a};return null},Ov:function(d){d&&this.ah&&a.C.cj(d,this.ah)},Pm:function(d){d&&(null==this.ah&&(this.ah=this.Mf.bind(this)),a.C.fh(d,this.ah))},Mf:function(a,b){0<a&&0<b&&null!=this.qe&&this.qe.HandleResize(a,b)},bM:function(a){return null!=
a.data||null!=a.drillMode||null!=a.item||null!=a.scrollPolicy||null!=a.scrollPolicyOptions},Fs:function(a){var b,c,e;if(this.bM(a))return null!=a.data&&(null==a.currentItem&&this.Eh("currentItem",null),null==a.selection&&this.jo(!0)),!0;if(null!=a.currentItem)a=this.gg(a.currentItem),null!=a&&(a=f(a),this.pk(a)||this.co(a,null));else if(null!=a.expanded)this.qe.mk()&&(a=a.expanded,Array.isArray(a)&&(this.c5(),b=this,f.each(a,function(a,c){b.zJ(c,!1,!1)})));else if(null!=a.selection){if(this.Vk())for(a.selection=
this.a7(a.selection),c=a.selection,this.jo(!1),e=0;e<c.length;e++)a=this.gg(c[e]),null!=a&&this.Et(a,c[e])}else null!=a.selectionMode&&(this.jo(!0),this.Vs());return!1},Ul:function(a,b,c){return this.la._trigger(a,b,c)},Eh:function(a,b,c){this.la.option(a,b,c)},hg:function(a){return this.la.option(a)},TS:function(){var d;d=this.hg("data");if(null!=d)if(d instanceof a.R)this.qe=new a.Sb(this,this.element[0],d);else if(d instanceof a.Uc)this.qe=new a.Fh(this,this.element[0],d);else throw"Invalid data";
else this.qe=new a.vd(this,this.element[0]);this.Kda();this.qe.ZL()},Wp:function(a){this.element.attr("aria-activedescendant",a.attr("id"))},Vs:function(){this.element.attr("aria-activedescendant","");this.Fi()?this.element.attr("aria-multiselectable",!0):this.Vk()&&this.element.attr("aria-multiselectable",!1)},NC:function(){this.element.removeAttr("aria-activedescendant").removeAttr("aria-multiselectable")},y4:function(){var a,b;a=this.Yg();this.Vs();b=this.B4();a.append(b);this.BZ=b},B4:function(){var a=
f(document.createElement("div"));a.addClass("oj-listview-status").attr({id:this.LE("status"),role:"status"});return a},Kda:function(){var a=this.la.D("msgFetchingData");this.BZ.text(a).show()},m$:function(){this.BZ.hide()},SJ:function(){return this.Yg()},Yg:function(){null==this.tZ&&(this.tZ=this.B5());return this.tZ},B5:function(){var a=f(document.createElement("div"));a.addClass(this.DL()).addClass("oj-component");this.element.parent()[0].replaceChild(a[0],this.element[0]);a.prepend(this.element);
return a},O7:function(){return this.la.D("msgNoData")},u4:function(){var a,b;a=this.O7();b=document.createElement("li");b.id=this.LE("empty");b.className="oj-listview-empty-text";b.textContent=a;return b},Ee:function(a){a=a.attr("aria-expanded");return"true"==a?this.mi:"false"==a?this.li:this.$L},Qn:function(a,b){var c=this.us();b==this.mi?(a.attr("aria-expanded","true"),c&&a.removeClass("oj-collapsed").addClass("oj-expanded")):b==this.li&&(a.attr("aria-expanded","false"),c&&a.removeClass("oj-expanded").addClass("oj-collapsed"))},
ou:function(a,b,c){a=this.options.item[a];return"function"==typeof a&&c?a.call(this,b):a},b8:function(){var a=this.ou("renderer",null,!1);return"function"!=typeof a?null:a},Cw:function(a,b){var c,e,g;this.eQ(a);if(this.Vk())if(c=this.hg("selection"),this.Ah(a))for(e=0;e<c.length;e++){if(c[e]==b.key&&(this.Et(a,c[e]),!this.Fi())){1<c.length&&this.Eh("selection",[b.key],{_context:{originalEvent:null,mb:!0},changed:!0});break}}else e=c.indexOf(b.key),-1<e&&(c=c.slice(0),c.splice(e,1),this.Eh("selection",
c,{_context:{originalEvent:null,mb:!0},changed:!0}));this.qe.mk()&&this.Ee(f(a))==this.li&&(c=this.hg("expanded"),this.kr()?this.Jn(f(a),null,!1,null,!1,!1,!1):Array.isArray(c)&&(g=this,f.each(c,function(c,e){e==b.key&&g.Jn(f(a),null,!1,null,!1,!1,!1)})));null!=this.nb&&b.key==this.nb.key&&null!=this.nb.elem&&a!=this.nb.elem.get(0)&&(this.nb.elem=f(a))},El:function(){var a;this.m$();f(document.getElementById(this.LE("empty"))).remove();0==this.element[0].childElementCount?(a=this.u4(),this.element.append(a)):
(this.ws=null,a=this.hg("currentItem"),null==this.nb&&null!=a&&(a=this.gg(a),null==a||this.pk(f(a))||this.co(f(a),null)),this.Yg().hasClass("oj-focus-ancestor")&&null==this.nb&&this.YS());this.Ul("ready",null,{})},lC:function(){this.xs=this.ws=null},MZ:function(a,b,c){if(this.$w(f(b.target)))return!1;a=f(b.target).closest("."+this.Tf());0<a.length&&!this.pk(f(a[0]))&&this.co(f(a[0]),null);a={launcher:this.element,initialFocus:"menu"};"keyboard"===c&&(a.position={my:"start top",at:"start bottom",of:this.nb.elem});
this.la.Ye(b,c,a)},KL:function(a){return null!=a.prop("nodeName").match(/^INPUT|SELECT|OPTION|BUTTON|^A\b|TEXTAREA/)},$w:function(a){for(;null!=a&&a[0]!=this.element[0]&&"LI"!=a.prop("nodeName");){if(3!=a[0].nodeType){var b=a.attr("tabIndex"),c=a.attr("data-oj-tabindex");if(null!=b&&0<=b||this.KL(a)&&(-1!=b||-1!=c))return!0}a=a.parent()}return!1},eQ:function(a){var b;f(a).find("a, input, select, textarea, button, object, .oj-component-initnode").each(function(){f(this).removeAttr("data-first").removeAttr("data-last");
b=parseInt(f(this).attr("tabIndex"),10);(isNaN(b)||0<=b)&&f(this).attr("tabIndex",-1).attr("data-tabmod",isNaN(b)?-1:b)})},I6:function(a){var b;a=f(a).find("[data-tabmod]").each(function(){b=parseInt(f(this).attr("data-tabmod"),10);f(this).removeAttr("data-tabmod");-1==b?f(this).removeAttr("tabIndex"):f(this).attr("tabIndex",b)});a.first().attr("data-first","true");a.last().attr("data-last","true")},R4:function(a){f(a).find("[data-tabmod]").removeAttr("tabIndex").removeAttr("data-tabmod").removeAttr("data-first").removeAttr("data-last")},
pk:function(a){return a.hasClass("oj-skipfocus")},xC:function(a){this.Yg().addClass("oj-focus-ancestor");null==this.nb?this.mr()||this.AZ||this.YS(a):f(this.nb.elem).addClass("oj-focus")},YS:function(a){var b,c,e;b=this.pu();for(c=0;c<b.length;c++)if(e=f(b[c]),!this.pk(e)){this.co(e,a);break}},wC:function(){this.Yg().removeClass("oj-focus-ancestor");null!=this.nb&&f(this.nb.elem).removeClass("oj-focus")},M9:function(a){a=this.Kn(a.target);null!=a&&(this.yK=null,this.Rr(a,"oj-hover"))},N9:function(a){a=
this.Kn(a.target);null==a||this.pk(a)||(this.yK=a,this.OG(a,"oj-hover"))},HL:function(a){var b,c;if(this.us()&&(b=a.keyCode,b===this.Ps||b===this.ex))if(c=this.nb.elem,b===this.Ps){if(this.Ee(c)==this.mi){this.Ml(c,a,!0,this.nb.key,!0,!0);return}}else if(this.Ee(c)==this.li){this.Jn(c,a,!0,this.nb.key,!0,!0,!0);return}!0===this.IL(a)&&a.preventDefault()},yC:function(a){var b,c,e,g;0===a.button&&(b=this.Ui(),c=this.ol(),e=this.Sf(),g=f(a.target),g.hasClass(c)?(this.xj(a),a.preventDefault()):g.hasClass(b)?
(this.ce(a),a.preventDefault()):(b=this.Kn(g),null==b||0==b.length||this.pk(b)||(this.Vk()&&this.Ah(b[0])?this.mr()?this.d$(b,a):this.x0(b,a):this.X8(b,a),this.us()&&g.closest("."+e)&&(this.Ee(b)==this.li?this.ce(a):this.Ee(b)==this.mi&&this.xj(a)))))},mr:function(){return a.C.sf()},OE:function(d){return a.C.vs(d)},LE:function(a){return[this.element.attr("id"),a].join(":")},Kn:function(a){return f(a).closest("."+this.Tf())},g8:function(){null==this.sZ&&(this.sZ=parseInt(this.Yg().css("border-top-width"),
10)+parseInt(this.Yg().css("border-bottom-width"),10));return this.sZ},zV:function(a){var b,c,e,g;b=a.offsetTop;c=a.offsetHeight;a=this.Yg()[0];e=a.scrollTop;g=a.offsetHeight;b>=e&&b+c<=e+g||(b=Math.max(0,Math.min(b,Math.abs(b+c-g))),b>e&&(b+=this.g8()),a.scrollTop=b)},ud:function(a){return this.qe.ud(a)},gg:function(a){var b;return null!=this.xs&&(b=this.xs[a],null!=b)?document.getElementById(b):this.qe.gg(a)},Op:function(a){return a==this.LC||a==this.mC},pu:function(){var a,b,c;null==this.ws&&(a=
this.op(),b="."+this.Tf()+":visible",this.ws=this.element.find(b).filter(function(){return(c=f(this).parent().hasClass(a))?"false"!=f(this).parent().parent().attr("aria-expanded"):!0}));return this.ws},Nn:function(a,b,c){var e,g,h;if(!this.qe.ax())return!0;e=!b||this.GB?this.nb.elem:this.pn;g=!1;h=this.pu();e=h.index(e);switch(a){case this.LC:e--;if(0<=e){for(a=f(h[e]);this.pk(a);){e--;if(0>e)return!1;a=f(h[e])}b?(this.iF(a,c),this.GB=!1):(this.co(a,c),this.GB=!0)}g=!0;break;case this.mC:e++;if(e<
h.length){for(a=f(h[e]);this.pk(a);){e++;if(e==h.length)return!1;a=f(h[e])}b?(this.iF(a,c),this.GB=!1):(this.co(a,c),this.GB=!0)}g=!0}return g},W$:function(){return"actionable"==this.Hga},DV:function(a){this.Hga=a?"actionable":"navigation";a||this.element[0].focus()},EV:function(a,b){var c,e;if(null!=a){if(c=a[0],c=this.ud(c),null==this.nb||c!=this.nb.key)e={key:c,item:a},null!=this.nb&&(e.previousKey=this.nb.key,e.previousItem=this.nb.elem),e=!this.Ul("beforeCurrentItem",b,e),e||(this.nb=e={key:c,
elem:a},this.Wp(a),this.Eh("currentItem",c))}else this.nb=null},On:function(){null!=this.nb&&this.OG(this.nb.elem,"oj-focus")},MC:function(){null!=this.nb&&this.Rr(this.nb.elem,"oj-focus")},X8:function(a,b){this.co(a,b)},co:function(a,b){this.zV(a[0]);this.MC();this.EV(a,b);this.On()},Vk:function(){return"none"!=this.hg("selectionMode")},Fi:function(){return"multiple"==this.hg("selectionMode")},Ah:function(a){return a.hasAttribute("aria-selected")},a7:function(a){var b,c,e;b=[];for(c=0;c<a.length&&
(e=this.gg(a[c]),null==e||!this.Ah(e)||(b.push(a[c]),this.Fi()));c++);return b},nea:function(){var a,b;null!=this.xs&&(a=this,f.each(this.hg("selection"),function(c,e){b=a.gg(e);null!=b&&a.Rr(b,"oj-selected")}))},OG:function(a,b){this.AC(a,b,!0)},Rr:function(a,b){this.AC(a,b,!1)},AC:function(a,b,c){var e;a=f(a);"oj-selected"==b&&a.attr("aria-selected",c?"true":"false");e=a.children("."+this.Sf());0<e.length&&(a=f(e[0]));c?a.addClass(b):a.removeClass(b)},x0:function(a,b){var c,e;this.zV(a[0]);c=this.OE(b);
e=b.shiftKey;this.Fi()?c||e?!c&&e?this.iF(a,b):this.SD(a,b):this.Us(a,b):this.Us(a,b)},d$:function(a,b){this.Fi()?this.SD(a,b):this.Us(a,b)},jo:function(a){this.nea();a&&this.Eh("selection",[],{_context:{originalEvent:null,mb:!0},changed:!0});this.pn=null},Us:function(a,b){this.jo(!1);this.SD(a,b,[])},iF:function(a,b){var c;null!=this.nb&&(c=this.pn,c!=a&&this.wQ(this.nb.elem,a,b))},wQ:function(a,b,c){this.jo(!1);this.pn=b;this.p$(a,b,c);this.On()},p$:function(a,b,c){var e,g,f,k;e=[];g=this.pu();
a=g.index(a);f=g.index(b);a>f?b=f:(b=a,a=f);for(;b<=a;b++)f=g[b],this.Ah(f)&&(k=this.qe.ud(f),this.Et(f,k),e.push(k));this.Eh("selection",e,{_context:{originalEvent:c,mb:!0},changed:!0})},Et:function(a,b){null==this.xs&&(this.xs={});this.xs[b]=f(a).attr("id");this.OG(a,"oj-selected")},SD:function(a,b,c){var e,g;e=this.ud(a[0]);void 0==c&&(c=this.hg("selection").slice(0));this.MC();g=c.indexOf(e);-1<g?(this.Rr(a,"oj-selected"),c.splice(g,1)):(this.pn=a,this.Et(a,e),c.push(e));this.EV(a,b);this.On();
this.Eh("selection",c,{_context:{originalEvent:b,mb:!0},changed:!0})},ix:function(a,b,c){var e,g,f,k;e=this.hg("selection").slice(0);g=this.nb.elem;f=this.nb.key;k=e.indexOf(f);if(-1<k){if(c)return;this.Rr(g,"oj-selected");e.splice(k,1);0==e.length&&(this.pn=null)}else this.Ah(g[0])&&(b||(this.jo(!1),e.length=0),this.pn=g,this.Et(g,f),e.push(f));this.Eh("selection",e,{_context:{originalEvent:a,mb:!0},changed:!0})},IL:function(a){var b,c,e,g=!1;if(null==this.nb)return!1;b=a.keyCode;c=this.nb.elem;
this.W$()?b==this.n0?(this.DV(!1),this.eQ(c),this.On(),g=!0):b===this.U0&&(b=c.find("[data-first]"),c=c.find("[data-last]"),a.shiftKey?0<b.length&&0<c.length&&b!=c&&a.target==b[0]&&(c[0].focus(),g=!0):0<b.length&&0<c.length&&b!=c&&a.target==c[0]&&(b[0].focus(),g=!0)):b==this.o0?(this.I6(c),b=c.find("[data-first]"),0<b.length&&(b[0].focus(),this.DV(!0))):b==this.S0&&this.Vk()?(c=this.OE(a),(e=a.shiftKey)&&!c&&null!=this.pn&&this.Fi()?this.wQ(this.pn,this.nb.elem,a):this.ix(a,c&&!e&&this.Fi(),!1),g=
!0):b==this.m0&&this.Vk()?this.ix(a,!1,!0):this.Op(b)&&(c=this.OE(a),e=a.shiftKey,c||(g=this.Nn(b,e&&this.Vk()&&this.Fi(),a)));return g},us:function(){return"none"!=this.hg("drillMode")},kr:function(){var a=this.hg("expanded");if("auto"===a){if(!this.us())return!0}else if("all"===a)return!0;return!1},zJ:function(a,b,c){var e=this.gg(a);null!=e&&this.Jn(f(e),null,!1,a,b,c,b)},ce:function(a){var b=this.Kn(a.target);null!=b&&0<b.length&&this.Jn(b,a,!0,null,!0,!0,!0)},Jn:function(a,b,c,e,g,f,k){var l;
if(this.Ee(a)==this.li){null==e&&(e=this.ud(a[0]));l={item:a,key:e};if(k&&(e=!this.Ul("beforeExpand",b,l))&&g)return;this.qe.Np(a,function(a){this.R6(a,c,b,l,f)}.bind(this));this.ws=null;null!=b&&b.stopPropagation()}},R6:function(a,b,c,e,g){var h;this.gC(f(a),b);a=a.parentNode;a=f(a);this.Qn(a,this.mi);b=this.Ui();h=this.ol();a.children("."+this.Sf()).find("."+b).removeClass(b).addClass(h);g&&this.Ul("expand",c,e)},lO:function(a,b){var c;a.parentsUntil("ul.oj-component-initnode","ul."+this.Uh()).each(function(){c=
parseInt(f(this).css("maxHeight"),10);0<c&&f(this).css("maxHeight",c+b+"px")})},gC:function(a,b){var c=0;b?(a.children().each(function(){c+=f(this).outerHeight()}),this.mr()&&this.lO(a,c),null==this.uK&&(this.uK=this.r9.bind(this)),a.css("maxHeight","0px"),a.on("transitionend",this.uK),requestAnimationFrame(function(){a.css("maxHeight",c+"px")})):(this.mr()?(a.children().each(function(){c+=f(this).outerHeight()}),a.css("maxHeight",c+"px"),this.lO(a,c)):a.css("maxHeight",""),this.hC(a))},r9:function(a){a=
f(a.target);a.off("transitionend",this.uK);this.mr()||a.css("maxHeight","");this.hC(a)},hC:function(a){a.removeClass(this.op()).addClass(this.js())},yX:function(a,b,c){var e=this.gg(a);null!=e&&this.Ml(f(e),null,!1,a,b,c)},xj:function(a){var b=this.Kn(a.target);null!=b&&0<b.length&&this.Ml(b,a,!0,null,!0,!0)},Ml:function(a,b,c,e,g,f){var k;this.Ee(a)==this.mi&&(null==e&&(e=this.ud(a[0])),e={item:a,key:e},k=!this.Ul("beforeCollapse",b,e),k&&g||(this.eC(a,c),this.Qn(a,this.li),c=this.Ui(),g=this.ol(),
a.find("."+g).first().removeClass(g).addClass(c),this.ws=null,null!=b&&b.stopPropagation(),f&&this.Ul("collapse",b,e)))},eC:function(a,b){var c=0,e;e=a.children("ul").first();b?(null==this.rK&&(this.rK=this.Z8.bind(this)),e.children().each(function(){c+=f(this).outerHeight()}),e.css("transition-property","none"),e.css("maxHeight",c+"px"),e.css("transition-property",""),e.on("transitionend",this.rK),setTimeout(function(){e.css("maxHeight","0px")},100)):(e.css("maxHeight","0px"),this.fC(a))},Z8:function(a){a=
f(a.target);a.off("transitionend",this.rK);this.fC(a)},fC:function(a){a.removeClass(this.js()).addClass(this.op());null!=this.qe&&this.qe.Lp(a)},c5:function(){var a;a=this;this.pu().each(function(){a.Ml(f(this),null,!1,null,!1,!1)})},getExpanded:function(){var a,b,c;a=[];b=this;this.pu().each(function(){c=f(this);b.Ee(c)==b.mi&&a.push(b.ud(c[0]))});return a},Eg:function(){return a.Components.Eg(this.element)},DL:function(){return this.mr()?"oj-listview oj-listview-container-touch":"oj-listview oj-listview-container"},
tC:function(){return"oj-listview-element"},rl:function(){return"oj-listview-item"},Tf:function(){return"oj-listview-item-element"},Sf:function(){return"oj-listview-group-item"},Uh:function(){return"oj-listview-group"},js:function(){return"oj-listview-collapsible-transition"},op:function(){return this.js()},Ui:function(){return"oj-listview-collapse-icon"},ol:function(){return"oj-listview-expand-icon"},HJ:function(){return""}});o_("_ojListView",a.qH,a);a.Da("oj.ojListView",f.oj.baseComponent,{widgetEventPrefix:"oj",
options:{currentItem:null,data:null,drillMode:"collapsible",expanded:"auto",item:{focusable:!0,renderer:null,selectable:!0},scrollPolicy:"auto",scrollPolicyOptions:{fetchSize:25,maxCount:500},selection:[],selectionMode:"none",beforeCurrentItem:null,beforeExpand:null,beforeCollapse:null,collapse:null,expand:null,optionChange:null,ready:null},_ComponentCreate:function(){this._super();this.za()},za:function(){var d={};d.element=this.element;d.la=this;d=f.extend(this.options,d);this.Hg=new a.qH;this.Hg.ul(d)},
Sg:function(){this._super();this.Hg.Ur()},_destroy:function(){this.Hg.destroy();this._super()},Xe:function(a,b,c){this.Hg.MZ(a,b,c)},_setOptions:function(a,b){var c=this.Hg.Fs(a,b);this._super(a,b);c&&this.Hg.refresh()},_setOption:function(a,b){var c=!0;"selectionMode"==a?c="none"==b||"single"==b||"multiple"==b:"drillMode"==a?c="collapsible"==b||"none"==b:"scrollPolicy"==a&&(c="auto"==b||"loadMoreOnScroll"==b);if(c)this._super(a,b);else throw"Invalid value: "+b+" for key: "+a;},ti:function(){this.Hg.NZ()},
tk:function(){},widget:function(){return this.Hg.SJ()},refresh:function(){this._super();this.Hg.refresh()},getNodeBySubId:function(a){return this.Hg.getNodeBySubId(a)},getSubIdByNode:function(a){return this.Hg.getSubIdByNode(a)},expand:function(a,b){this.Hg.zJ(a,b,!0)},collapse:function(a,b){this.Hg.yX(a,b,!0)},getExpanded:function(){return this.Hg.getExpanded()}})});